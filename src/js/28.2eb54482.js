(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"0087":function(e,t,n){"use strict";var a=n("cbf0"),o=n.n(a);o.a},"0c4f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("toolbar-page",{attrs:{elements:e.elements,default:"chat"}})},o=[],s=n("08e9"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("p",{staticClass:"text-secondary"},[e._v("\n      Uses the socket server directy (i.e no api calls) to subscribe / publish\n    ")]),n("q-space"),n("p",[e._v("\n      "+e._s(e.time)+"\n      "),n("span",[e._v(" ms")])])],1),n("div",{staticClass:"row"},[n("p",{staticClass:"text-secondary"},[e._v("\n      "+e._s(e.server)+"\n    ")])]),n("div",{staticClass:"row q-px-md"},[n("div",{staticClass:"col-6 "},[n("q-input",{staticClass:"bg-black text-green",attrs:{outlined:"",dark:"",type:"textarea",autogrow:""},on:{keyup:e.keyUp},model:{value:e.sendText,callback:function(t){e.sendText=t},expression:"sendText"}})],1),n("div",{staticClass:"col-6 q-pl-lg"},[n("q-input",{staticClass:"bg-black text-green",attrs:{outlined:"",dark:"",type:"textarea",autogrow:"",readonly:""},model:{value:e.receiveText,callback:function(t){e.receiveText=t},expression:"receiveText"}})],1)])])},i=[],r={name:"PageLabSockets",data:function(){return{wamp:null,time:"Time of flight",wampSubscription:null,sendText:"",receiveText:"",sendTime:0,receiveTime:0,channel:"lab.sockets.chat",server:""}},components:{},methods:{keyUp:function(e){console.log("K:",e.key),this.sendTime=Date.now(),this.$wamp.publish(this.channel,[],{key:e.key},{exclude_me:!1})}},mounted:function(){this.server="wss://adazmq.marlboroughcollege.org/wss",this.wamp=this.$wamp.subscribe(this.channel,(function(e,t,n){var a=t.key;this.receiveTime=Date.now(),this.time=this.receiveTime-this.sendTime,1===a.length?this.receiveText+=a:"Backspace"===a&&(this.receiveText=this.receiveText.slice(0,-1))}),{acknowledge:!0}).then((function(e){this.sendText="",this.wampSubscription=e}))}},l=r,u=n("2be6"),d=Object(u["a"])(l,c,i,!1,null,null,null),f=d.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("p",{staticClass:"text-font"},[e._v("\n      Uses ZeroMQ Transport to send content from a running php script to the Ratchet (Websocket) server. Tests the console and progress channels.\n    ")]),n("q-space"),n("p",[e._v("\n      "+e._s(e.time)+"\n      "),n("span",[e._v(" ms")])])],1),n("div",{staticClass:"row q-mb-md"},[n("p",{staticClass:"text-font"},[e._v("\n      "+e._s(e.server)+" ["+e._s(e.zmqServer)+"] ("+e._s(e.consoleProgress)+")\n    ")]),n("q-space"),n("q-btn",{staticStyle:{width:"100px"},attrs:{color:"primary",dark:"",outline:""},on:{click:e.clear}},[e._v("Clear\n   ")])],1),n("div",{staticClass:"row q-mb-lg"},[n("q-btn",{staticStyle:{width:"100%"},attrs:{loading:e.loading,percentage:e.consoleProgress,color:"accent",dark:"",outline:""},on:{click:e.start},scopedSlots:e._u([{key:"loading",fn:function(){return[n("q-spinner-gears",{staticClass:"on-left"}),e._v("\n         Computing...\n       ")]},proxy:!0}])},[e._v("\n       Compute PI\n       ")])],1),n("div",{staticClass:"row q-px-md"},[n("div",{staticClass:"col"},[n("console",{staticStyle:{"min-height":"50vh"}})],1)])])},m=[],h=(n("e125"),n("4823"),n("2e73"),n("dde3"),n("76d0"),n("0c1f"),n("8e9e")),b=n.n(h),v=n("9ce4"),g=n("dd14"),k=n("4778"),y={postStartConsole:function(e,t,n){k["a"].post("/lab/sockets/console",n).then((function(t){e(t.data)})).catch((function(e){console.log(e),t&&t()}))},postNotify:function(e,t,n){k["a"].post("/lab/sockets/notify",n).then((function(t){e(t.data)})).catch((function(e){console.warn(e),t&&t()}))},getZMQ:function(e,t,n){k["a"].get("/lab/sockets/zmq").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getTable:function(e,t,n){k["a"].get("/lab/sockets/table").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getCars:function(e,t,n){k["a"].get("/lab/sockets/cars").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getTableSingle:function(e,t,n){k["a"].get("/lab/sockets/table/"+n.id).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},postTable:function(e,t,n){k["a"].post("/lab/sockets/table",n).then((function(t){e(t.data)})).catch((function(e){console.warn(e),t&&t()}))},putFavorite:function(e,t,n){k["a"].put("/lab/sockets/favorite",n).then((function(t){e(t.data)})).catch((function(e){console.warn(e),t&&t()}))},putTable:function(e,t,n){k["a"].put("/lab/sockets/table",n).then((function(t){e(t.data)})).catch((function(e){console.warn(e),t&&t()}))},deleteTable:function(e,t,n){k["a"].delete("/lab/sockets/table/"+n).then((function(t){e(t.data)})).catch((function(e){console.warn(e),t&&t()}))}};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={name:"PageLabConsole",data:function(){return{loading:!1,server:null,zmqServer:" - "}},components:{console:g["a"]},methods:x({},Object(v["b"])("sockets",["clearConsoleLog"]),{start:function(){var e=this;this.loading=!0,y.postStartConsole((function(){e.loading=!1}))},clear:function(){this.loading=!1,this.clearConsoleLog()}}),computed:x({},Object(v["c"])("sockets",["progress"]),{consoleProgress:function(){return this.progress("Lab.Sockets.Console")}}),mounted:function(){var e=this;this.server="wss://adazmq.marlboroughcollege.org/wss",y.getZMQ((function(t){console.log(t),e.zmqServer=t}))}},_=C,q=Object(u["a"])(_,p,m,!1,null,null,null),T=q.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),n("div",{staticClass:"row q-mb-md"},[n("p",{staticClass:"text-secondary"},[e._v("\n      "+e._s(e.server)+" ["+e._s(e.zmqServer)+"]\n    ")])]),n("div",{staticClass:"row q-px-md"},[n("div",{staticClass:"col"},[n("q-input",{staticClass:"bg-black text-green",attrs:{outlined:"",dark:"",type:"textarea"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send(t)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)])])},S=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("p",{staticClass:"text-secondary"},[e._v("\n      Sends a notification via ZMQ (API) and Sockets\n    ")])])}],j={name:"PageLabNotify",data:function(){return{text:"",server:"",zmqServer:""}},components:{},methods:{send:function(){var e=this;console.log("Sending"),y.postNotify((function(){e.text=""}),null,{message:this.text})}},mounted:function(){var e=this;this.server="wss://adazmq.marlboroughcollege.org/wss",y.getZMQ((function(t){e.zmqServer=t}))}},P=j,E=Object(u["a"])(P,O,S,!1,null,null,null),$=E.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("crud",{ref:"crud",attrs:{api:e.api,columns:e.columns,actions:e.actions,rowKey:"id",fullscreen:"",search:"",filterbox:"",filterchips:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",multiselectx:"",sortBy:"Name",indicator:"isFavorite",channel:"lab.sockets.data"},on:{favorite:e.makeFavorite}})],1)},L=[],D=n("d612"),F=n("89a2"),N={name:"LabSocketsData",data:function(){return{api:{get:y.getTable,getSingle:y.getTableSingle,put:y.putTable,post:y.postTable,delete:y.deleteTable},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"name",type:"string",align:"left",required:!0,validations:{required:F["required"],minLength:Object(F["minLength"])(6)},editable:!0,sortable:!0},{name:"Age",required:!0,label:"Age",field:"age",type:"number",sortable:!0,align:"right",editable:!0,validations:{required:F["required"]}},{name:"Car",label:"Car",field:"car",icon:"fal fa-car",type:"options",filter:!0,sortable:!0,options:[],align:"left",editable:!0,validations:{required:F["required"]}}],cars:[],actions:[{title:"Make Favorite",event:"favorite",icon:"fal fa-check"}]}},methods:{makeFavorite:function(e){var t=this;this.$refs.crud.data.forEach((function(e){e.isFavorite=!1})),e.isFavorite=!0,y.putFavorite((function(){t.$refs.crud.publish()}),null,{id:e.id})},setOptions:function(){var e=this;y.getCars((function(t){console.log(t),e.columns[3].options=t.map((function(e){return{value:e.id,label:e.car}})),console.log(e.columns[3].options)}))}},created:function(){this.setOptions()},components:{Crud:D["a"]}},M=N,Q=(n("0087"),Object(u["a"])(M,z,L,!1,null,"2f174bac",null)),Z=Q.exports,U={name:"PageLabSockets",data:function(){return{elements:[{name:"chat",label:"Chat",component:f,shortcut:"c"},{name:"console",label:"Console",component:T,shortcut:"s"},{name:"notify",label:"Notify",component:$,shortcut:"n"},{name:"data",label:"Data",component:Z,shortcut:"d"}]}},components:{toolbarPage:s["a"]},methods:{refresh:function(){this.$root.$emit("crud_refresh")}}},A=U,B=Object(u["a"])(A,a,o,!1,null,null,null);t["default"]=B.exports},cbf0:function(e,t,n){}}]);