(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{"185b":function(t,e,s){},"4f9b":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("toolbar-page",{attrs:{elements:t.elements,default:"dashboard"}})},i=[],a=s("08e9"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row bg-0 full-height full-width q-pa-md"},[s("div",{staticClass:"col q-mr-lg"},[s("div",{staticClass:"row justify-start items-start content-start",staticStyle:{height:"70px"}},[s("div",{staticClass:"qx-mb-xl row wrap justify-start items-start content-start full-width full-height",staticStyle:{"max-height":"60px"}},t._l(t.connections,(function(e){return s("div",{key:e.label,staticClass:"col-3 q-pa-xs"},[s("q-badge",{staticClass:"text-center full-width",staticStyle:{height:"50px"},attrs:{outline:e.value,color:e.value?"font":"warning"}},[s("span",{staticClass:"full-width text-center text-bold capitalize"},[t._v(t._s(e.label))])])],1)})),0),s("div",{staticClass:"row full-width q-my-md"},[s("q-linear-progress",{attrs:{size:"25px",value:.01*t.resources.disk.percentage,color:"accent","track-color":"grey-9"}})],1)]),s("div",{staticClass:"row full-height",attrs:{stylex:"margin-top:-40px"}},[s("q-scroll-area",{staticClass:"full-width full-height",attrs:{stylex:"height:60vh"}},[s("div",{staticClass:"q-pa-md"},[s("q-markup-table",{staticClass:"text-white no-shadow",attrs:{dense:""}},[s("tbody",t._l(t.logs.slice().reverse(),(function(e){return s("tr",{key:e.id,class:t.logColor(e),staticStyle:{border:"none"}},[s("td",{staticClass:"text-left text-grey",staticStyle:{width:"150px","border-bottom-width":"0px","font-size":"12px"}},[t._v(t._s(e.time))]),s("td",{staticClass:"text-left",staticStyle:{"border-bottom-width":"0px","font-size":"12px"}},["WARNING"===e.level?s("q-icon",{staticClass:"q-mr-sm",attrs:{color:"warning",size:"sm",name:"fa fa-exclamation-square"}}):t._e(),t._v("\n                  "+t._s(e.message)+"\n                ")],1)])})),0)])],1)])],1)]),s("div",{staticClass:"col-3"},[s("p",{staticClass:"text-secondary text-h5"},[t._v("CPU")]),s("div",{staticClass:"row full-width"},t._l(t.resources.cores,(function(e){return s("q-circular-progress",{key:e.id,staticClass:"q-ma-md text-accent col text-center",attrs:{"show-value":"","font-size":"10px",indeterminate:t.indeterminate,value:100-e.idle,size:"100px",color:"accent","track-color":"grey-8"}},[t._v("\n      "+t._s(100-Math.round(e.idle))+"%\n      ")])})),1),s("div",{staticClass:"full-width text-center"},[s("q-circular-progress",{staticClass:"q-ma-md text-accent",attrs:{"show-value":"","font-size":"31px",indeterminate:t.indeterminate,value:100-t.resources.cpuIdle,size:"200px",color:"accent","track-color":"grey-8"}},[t._v("\n      "+t._s(100-Math.round(t.resources.cpuIdle))+"%\n      ")]),s("div",{ref:"cpuhistory",staticClass:"full-width",attrs:{id:"cpuhistory"}})],1),s("p",{staticClass:"q-mt-md text-accent text-h5"},[t._v("MEMORY")]),s("div",{staticClass:"full-width text-center"},[s("q-circular-progress",{staticClass:"q-ma-md text-accent",attrs:{"show-value":"","font-size":"31px",indeterminate:t.indeterminate,value:t.resources.memory,size:"200px",color:"accent","track-color":"grey-8"}},[t._v("\n     "+t._s(t.resources.memory)+"%\n     ")]),s("div",{ref:"memhistory",staticClass:"full-width",attrs:{id:"cpuhistory"}})],1)])])},o=[],c=s("4778"),l={getLogs:function(t,e,s){c["a"].get("/admin/logs").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getResources:function(t,e,s){c["a"].get("/admin/logs/resources").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getConnections:function(t,e,s){c["a"].get("/admin/logs/connections").then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},d=s("915b"),u=s("3099"),h=s("d610");d["f"](h["a"]);var p={name:"Admin.Logs.Dashboard",data:function(){return{logs:[],resources:{cpuIdle:0,disk:{percentage:0}},indeterminate:!0,cpuHistory:[],cpuHistoryChartx:null,memHistory:[],memHistoryChartx:null,logInterval:2e3,resourcesInterval:2e3,connectionsInterval:5e3,graphMinutes:1,counter:0,connections:{}}},computed:{},methods:{fetchLogs:function(){l.getLogs(this.processLog)},fetchResources:function(){l.getResources(this.processResources)},fetchConnections:function(){l.getConnections(this.processConnections)},processConnections:function(t){this.connections=t},processLog:function(t){this.logs=t.messages},processResources:function(t){this.counter++,this.resources=t.resources,this.indeterminate=!1;var e=Date.parse(t.time),s={date:e,value:100-this.resources.cpuIdle},r={date:e,value:this.resources.memory};if(this.cpuHistoryChart&&this.counter%10!==0){var i=60*this.graphMinutes/(this.resourcesInterval/1e3),a=this.cpuHistory.length>i?1:0;this.cpuHistoryChart.addData(s,a),this.memHistoryChart.addData(r,a)}else this.cpuHistory.push(s),this.memHistory.push(r),this.createCpuSpark(),this.createMemSpark()},logColor:function(t){switch(t.level){case"CRITICAL":return"text-white bg-warning";default:return"text-tertiery"}},createCpuSpark:function(){this.cpuHistoryChart&&this.cpuHistoryChart.dispose();var t=d["c"](this.$refs.cpuhistory,u["l"]);t.data=this.cpuHistory,t.padding(0,0,0,0);var e=t.xAxes.push(new u["d"]);e.renderer.grid.template.disabled=!0,e.renderer.labels.template.disabled=!0,e.startLocation=.5,e.endLocation=.7,e.cursorTooltipEnabled=!1;var s=t.yAxes.push(new u["k"]);s.min=0,s.renderer.grid.template.disabled=!0,s.renderer.baseGrid.disabled=!0,s.renderer.labels.template.disabled=!0,s.cursorTooltipEnabled=!1,t.cursor=new u["m"],t.cursor.lineY.disabled=!0;var r=t.series.push(new u["g"]);r.tooltipText="{date}: [bold]{value}",r.dataFields.dateX="date",r.dataFields.valueY="value",r.tensionX=.8,r.strokeWidth=2;var i=r.bullets.push(new u["b"]);i.circle.opacity=0,i.circle.propertyFields.opacity="opacity",i.circle.radius=3,this.cpuHistoryChart=t},createMemSpark:function(){this.memHistoryChart&&this.memHistoryChart.dispose();var t=d["c"](this.$refs.memhistory,u["l"]);t.data=this.memHistory,t.padding(0,0,0,0);var e=t.xAxes.push(new u["d"]);e.renderer.grid.template.disabled=!0,e.renderer.labels.template.disabled=!0,e.startLocation=.5,e.endLocation=.7,e.cursorTooltipEnabled=!1;var s=t.yAxes.push(new u["k"]);s.min=0,s.renderer.grid.template.disabled=!0,s.renderer.baseGrid.disabled=!0,s.renderer.labels.template.disabled=!0,s.cursorTooltipEnabled=!1,t.cursor=new u["m"],t.cursor.lineY.disabled=!0;var r=t.series.push(new u["g"]);r.tooltipText="{date}: [bold]{value}",r.dataFields.dateX="date",r.dataFields.valueY="value",r.tensionX=.8,r.strokeWidth=2;var i=r.bullets.push(new u["b"]);i.circle.opacity=0,i.circle.propertyFields.opacity="opacity",i.circle.radius=3,this.memHistoryChart=t}},components:{},mounted:function(){this.$q.fullscreen.toggle()},created:function(){this.fetchLogs(),this.fetchResources(),this.fetchConnections(),this.logTimer=setInterval(function(){this.fetchLogs()}.bind(this),this.logInterval),this.resourcesTimer=setInterval(function(){this.fetchResources()}.bind(this),this.resourcesInterval),this.connectionsTimer=setInterval(function(){this.fetchConnections()}.bind(this),this.connectionsInterval),this.windowTimer=setInterval((function(){this.$forceUpdate()}),12e4)},beforeDestroy:function(){clearInterval(this.logTimer),clearInterval(this.windowTimer),clearInterval(this.resourcesTimer),clearInterval(this.connectionsTimer)}},m=p,f=(s("f823"),s("2be6")),g=Object(f["a"])(m,n,o,!1,null,"390d4c53",null),v=g.exports,b={name:"Page.Admin.Logs",data:function(){return{elements:[{name:"dashboard",label:"dashboard",component:v,noPadding:!0}]}},components:{toolbarPage:a["a"]},methods:{refresh:function(){}}},y=b,x=Object(f["a"])(y,r,i,!1,null,null,null);e["default"]=x.exports},f823:function(t,e,s){"use strict";var r=s("185b"),i=s.n(r);i.a}}]);