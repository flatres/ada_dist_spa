(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{1567:function(t,e,s){"use strict";var a=s("84e6"),r=s.n(a);r.a},"3e12":function(t,e,s){},"61a6":function(t,e,s){},"7aa3":function(t,e,s){},"84e6":function(t,e,s){},"9ece":function(t,e,s){"use strict";var a=s("3e12"),r=s.n(a);r.a},bf8b:function(t,e,s){"use strict";var a=s("7aa3"),r=s.n(a);r.a},d142:function(t,e,s){"use strict";var a=s("61a6"),r=s.n(a);r.a},e4b7:function(t,e,s){},f0d1:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getGlobalSubject?s("div",[s("div",{staticClass:"full-width bg-secondary",staticStyle:{height:"1px"}}),s("toolbar-page",{staticClass:"t-bar",attrs:{elements:t.elements,default:"wyap"},scopedSlots:t._u([{key:"before",fn:function(){return[s("year-bar",{staticClass:"yb-border",attrs:{exams:""}})]},proxy:!0}],null,!1,311916022)})],1):t._e()},r=[],n=(s("e125"),s("4823"),s("2e73"),s("76d0"),s("7f3a")),o=s.n(n),i=s("8e9e"),l=s.n(i),c=s("9ce4"),d=s("aba1"),u=s("89cf"),p=s("08e9"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col column no-scroll"},[s("loading",{attrs:{loading:t.loading,channel:"hod.metrics.wyaps"}}),t.loading?t._e():s("div",{staticClass:"row no-wrap q-px-xs q-pt-none text-left col items-stretch",attrs:{stylxe:"padding-bottom:200px"}},[s("div",{staticClass:"q-mr-md q-mb-md column",staticStyle:{"min-width":"200px"}},[s("q-scroll-area",{staticClass:"bg-tertiary col q-mb-xl"},[s("q-list",{},[s("q-item",{staticClass:"text-font-secondary",attrs:{dense:"",clickable:""},on:{click:function(e){t.newOpen=!0}}},[s("q-item-section",[s("q-item-label",{staticClass:"text-positive text-center"},[t._v("Create New "+t._s(t.yearCode)+" WYAP")])],1)],1),s("q-separator",{attrs:{color:"text-primary"}}),t._l(t.wyaps,(function(e){return s("div",{key:e.id},[s("q-item",{staticClass:"q-pa-xs text-white bg-tertiary q-my-xs",class:e.id===t.selectedWyapId?"active-class":"",attrs:{clickable:"",dense:"",group:"wyaps"},on:{click:function(s){return t.setWyap(e.id)}}},[s("q-item-section",[s("q-item-label",{staticClass:"q-pl-sm text-font"},[t._v("\n                    "+t._s(e.name)+"\n                  ")])],1),s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{name:"fas fa-chevron-right",color:"font-secondary",size:"xs"}})],1)],1),s("q-separator")],1)}))],2)],1)],1),s("div",{staticClass:"col no-scroll column"},[t.wyap?s("q-toolbar",{staticClass:"bg-tertiary text-white no-padding toolbar-slim",attrs:{shrink:"",dense:""}},[s("q-tabs",{attrs:{stretch:"","active-color":"accent",dense:""},model:{value:t.wyapTab,callback:function(e){t.wyapTab=e},expression:"wyapTab"}},[s("q-tab",{attrs:{name:"results",label:"results"}}),s("q-tab",{attrs:{name:"analysis",label:"analysis"}})],1),s("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",label:"edit",color:"positive",dense:""},on:{click:t.openUpdate}})],1):t._e(),t.wyap?s("q-tab-panels",{staticClass:"column col",attrs:{animated:""},model:{value:t.wyapTab,callback:function(e){t.wyapTab=e},expression:"wyapTab"}},[s("q-tab-panel",{staticClass:"q-px-none q-pb-xl q-pt-none column col",attrs:{name:"results"}},[s("results",{attrs:{results:t.results,wyap:t.wyap}})],1),s("q-tab-panel",{staticClass:"q-px-none q-pb-xl column col",attrs:{name:"analysis"}},[s("analysis",{attrs:{results:t.results,wyap:t.wyap,statistics:t.statistics}})],1),s("q-tab-panel",{staticClass:"q-px-none fit",attrs:{name:"update"}},[s("update",{attrs:{results:t.results}})],1)],1):t._e()],1)]),s("q-dialog",{attrs:{persistent:""},model:{value:t.newOpen,callback:function(e){t.newOpen=e},expression:"newOpen"}},[s("q-card",{staticClass:"bd-font-secondary bg-secondary",staticStyle:{"min-width":"300px"}},[s("q-card-section",{staticClass:"row items-center"},[s("q-input",{staticClass:"full-width",attrs:{color:"font-secondary",label:"Name","stacked-label":"",autofocus:""},model:{value:t.newWyap.name,callback:function(e){t.$set(t.newWyap,"name",e)},expression:"newWyap.name"}}),s("q-input",{staticClass:"full-width",attrs:{color:"font-secondary",label:"Out of how many marks?","stacked-label":"",type:"number"},model:{value:t.newWyap.marks,callback:function(e){t.$set(t.newWyap,"marks",e)},expression:"newWyap.marks"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"font"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:0===t.newWyap.name.length||!t.newWyap.marks,flat:"",label:"CREATE",color:"accent"},on:{click:t.createNew}})],1)],1)],1),t.wyap?s("q-dialog",{key:t.key,staticStyle:{height:"100vh"},attrs:{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.updateOpen,callback:function(e){t.updateOpen=e},expression:"updateOpen"}},[s("q-card",{staticClass:"bg-primary bd-font-secondary text-white column",staticStyle:{"overflow-y":"hidden","max-width":"900px",height:"90vh"}},[s("update",{staticClass:"col",attrs:{results:t.results,id:t.wyap.id,name:t.wyap.name,marks:t.wyap.marks},on:{close:function(e){t.updateOpen=!1},refresh:t.refresh,deleted:t.deletedWyap}})],1)],1):t._e()],1)},m=[],f=s("47783"),b=s("452d"),y={getWyaps(t,e,s,a){var r=b["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+r.id+"/wyaps/"+s+"/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},postWyap(t,e,s,a,r){var n=b["a"].getters["user/getGlobalSubject"];f["a"].post("/hod/"+n.id+"/wyaps/"+s+"/"+a,r).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},putWyap(t,e,s){var a=b["a"].getters["user/getGlobalSubject"];f["a"].put("/hod/"+a.id+"/wyaps/"+s.id,s).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},deleteWyap(t,e,s){var a=b["a"].getters["user/getGlobalSubject"];f["a"].delete("/hod/"+a.id+"/wyaps/"+s).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getWyapResults(t,e,s){var a=b["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+a.id+"/wyaps/"+s).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},g=s("10ac"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pr-sm col column"},[s("div",{staticClass:"col column"},[s("div",{staticClass:"col column q-mt-md"},[s("q-scroll-area",{staticClass:"column col q-pb-xl"},[s("q-markup-table",{staticClass:"q-mb-xl",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("name")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Name")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("boarding")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Hs")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("classCode")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Class")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("mark")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Mark / "+t._s(t.wyap.marks))],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("percentage")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("%")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("rank")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Rank")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("hasUnderperformed")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Flag")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("comment")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Comment")],1),s("th")])]),s("tbody",{on:{onpaste:t.paste}},t._l(t.sorted,(function(e){return s("tr",{key:e.id,class:t.rowClass(e),on:{onpaste:t.paste}},[s("td",{staticClass:"text-left"},[t._v(t._s(e.lastName+",  "+e.preName))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.boarding))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.classCode))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.mark))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.percentage))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.rank))]),s("td",{staticClass:"text-left"},[1===e.hasUnderperformed?s("q-badge",{attrs:{color:"warning"}},[s("q-icon",{attrs:{name:"far fa-thumbs-down",color:"white"}}),s("q-tooltip",{staticClass:"bg-font-secondary"},[t._v("Underperformed")])],1):t._e()],1),s("td",{staticClass:"text-left"},[e.comment?s("q-badge",{attrs:{color:"positive",outline:""}},[t._v("\n                  Comment\n                  "),s("q-tooltip",{staticClass:"bg-font-secondary"},[t._v(t._s(e.comment))])],1):t._e()],1),s("td",{staticClass:"text-left"})])})),0)])],1)],1)])])},x=[],C=(s("632c"),{name:"hods.metrics.wyaps.results_",props:{results:{type:Array,required:!0},wyap:{type:Object,required:!0}},data(){return{students:[],search:"",loading:!0,dates:[],sortKey:"lastName",sortDir:"asc",results_:[]}},methods:{setSort(t){t===this.sortKey&&(this.sortDir="asc"===this.sortDir?"desc":"asc"),this.sortKey=t},paste(t){},rowClass(t){var e=0;"classCode"===this.sortKey&&(e=this.classes.indexOf(t.classCode)),"boarding"===this.sortKey&&(e=this.boarding.indexOf(t.boarding));var s=e%2===1?"bg-tertiary":"";return s},cloneResults(){this.results&&(this.results_=this.$cloneArray(this.results))}},computed:{visible(){return this.results_},sorted(){var t=this.visible.filter((function(t){return t.id>0}));return t.sort(this.$compare(this.sortKey,this.sortDir))},classes(){return this.$parseOptions(this.sorted,"classCode").map((function(t){return t.value}))},boarding(){return this.$parseOptions(this.sorted,"boarding").map((function(t){return t.value}))}},watch:{results_(){},results(){this.cloneResults()}},components:{},created(){this.cloneResults()}}),w=C,q=s("2be6"),k=s("bc74"),_=s("26a8"),S=s("2e0b"),O=s("34ff"),W=s("f987"),j=s("3aaf"),$=s("e279"),Q=s.n($),T=Object(q["a"])(w,v,x,!1,null,"f3bcbb88",null),E=T.exports;Q()(T,"components",{QInput:k["a"],QScrollArea:_["a"],QMarkupTable:S["a"],QIcon:O["a"],QBadge:W["a"],QTooltip:j["a"]});var D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-none full-width column",staticStyle:{"overflow-y":"hidden"}},[s("q-bar",{staticClass:"bg-tertiary bd-font-secondary",staticStyle:{height:"50px"}},[s("q-input",{staticClass:"full-width bg-tertiary text-center q-pl-sm",staticStyle:{"font-size":"13px","max-height":"39px"},attrs:{size:"xs",color:"font-secondary","hide-bottom-space":"",borderless:""},on:{input:t.changed},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),s("q-space"),s("q-input",{staticClass:"full-width bg-tertiary text-center q-pl-sm",staticStyle:{"font-size":"13px","max-height":"39px","max-width":"80px"},attrs:{size:"xs",label:"marks /",color:"font-secondary","hide-bottom-space":"",borderless:""},on:{input:t.changed},model:{value:t.newMarks,callback:function(e){t.newMarks=e},expression:"newMarks"}})],1),t.hasErrors?s("q-banner",{staticClass:"text-font bg-warning q-py-xs",attrs:{"inline-actions":""}},[s("ul",t._l(t.errors,(function(e,a){return s("li",{key:a},[t._v(t._s(e))])})),0)]):t._e(),s("q-scroll-area",{staticClass:"col"},[s("q-markup-table",{staticClass:"q-mb-xl",staticStyle:{"overflow-y":"hidden"},attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th"),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("classCode")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Class")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("name")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Name")],1),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("mark")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Mark")],1),s("th",{staticClass:"text-center",on:{click:function(e){return t.setSort("hasUnderPerformed")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Underperformed")],1),s("th"),s("th",{staticClass:"text-left",on:{click:function(e){return t.setSort("comment")}}},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"fal fa-arrows-alt-v",color:"accent"}}),t._v("Comment")],1),s("th")])]),s("tbody",t._l(t.sorted,(function(e,a){return s("tr",{key:e.id,staticClass:"q-py-lg",class:t.rowClass(e)},[s("td",[t._v(t._s(a+1))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.classCode))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.lastName+",  "+e.preName))]),s("td",{staticClass:"text-left ada-mark"},[s("q-input",{staticClass:"full-width text-center q-pl-sm",class:t.inputClass(e),staticStyle:{"font-size":"13px","min-width":"60px","max-width":"60px","max-height":"25px"},attrs:{size:"xs",color:"font-secondary","hide-bottom-space":"",borderless:""},on:{paste:function(e){return t.onPaste(a,e)},input:t.changed},model:{value:e.mark,callback:function(s){t.$set(e,"mark",t._n(s))},expression:"s.mark"}})],1),s("td",{staticClass:"text-center"},[s("q-toggle",{class:0===e.hasUnderperformed?"up-toggle-off":"",attrs:{tabindex:"-1",dense:"","checked-icon":"check",color:"warning","unchecked-icon":"clear","true-value":1,"false-value":0},on:{input:function(e){t.hasChanged=!0}},model:{value:e.hasUnderperformed,callback:function(s){t.$set(e,"hasUnderperformed",s)},expression:"s.hasUnderperformed"}})],1),s("td"),s("td",{staticClass:"text-left",attrs:{stylex:"width: 600px"}},[s("q-input",{staticClass:"full-width bg-secondary q-px-xs",staticStyle:{"font-size":"13px"},attrs:{tabindex:"-1",type:"textarea",autogrow:"",size:"xs",color:"font-secondary",borderless:"","hide-bottom-space":"",dense:""},on:{input:function(e){t.hasChanged=!0}},model:{value:e.comment,callback:function(s){t.$set(e,"comment",s)},expression:"s.comment"}})],1),s("td",{staticClass:"text-left"})])})),0)])],1),s("q-bar",{staticClass:"bg-tertiary bd-font-secondary",staticStyle:{height:"60px"}},[s("q-btn",{attrs:{color:"warning",label:"delete wyap",flat:"",size:"md"},on:{click:function(e){t.deleteConfirm=!0}}}),s("q-space"),s("q-btn",{attrs:{label:"close",flat:"",size:"md"},on:{click:t.close}}),s("q-btn",{staticClass:"text-font-negative",attrs:{disable:!t.hasChanged,label:"save",color:"positive",size:"md"},on:{click:t.save}})],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.closeConfirm,callback:function(e){t.closeConfirm=e},expression:"closeConfirm"}},[s("q-card",{staticClass:"bd-font-secondary bg-tertiary"},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[t._v("Sure about this? You have unsaved changes.")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close",color:"font"},on:{click:function(e){return t.$emit("close")}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-font-negative",attrs:{label:"Save",color:"positive"},on:{click:t.save}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.deleteConfirm,callback:function(e){t.deleteConfirm=e},expression:"deleteConfirm"}},[s("q-card",{staticClass:"bd-font-secondary bg-tertiary"},[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm text-warning text-bold full-width"},[t._v("DELETE WYAP")]),s("span",{staticClass:"q-ml-sm text-warning text-bold full-width"},[t._v("Warning: This cannot be undone")])]),s("q-separator"),s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm text-font text-bold full-width"},[t._v("Type DELETE to proceed:")]),s("q-input",{staticClass:"full-width q-mt-md",attrs:{placeholder:"Name",outlined:"",dense:"",autofocus:"",color:"font"},model:{value:t.deleteName,callback:function(e){t.deleteName=e},expression:"deleteName"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"font"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-font-negative",attrs:{disable:"delete"!==t.deleteName.toLowerCase(),label:"DELETE",color:"warning"},on:{click:t.deleteWyap}})],1)],1)],1)],1)},A=[],M=(s("c880"),s("4fb0"),{name:"hods.metrics.wyaps.results",props:{results:{type:Array,required:!0},name:{type:String,required:!0},marks:{type:Number,required:!0},id:{type:Number,required:!0}},data(){return{students:[],search:"",loading:!0,dates:[],sortKey:"lastName",sortDir:"asc",newResults:[],newName:null,newMarks:null,hasChanged:!1,closeConfirm:!1,deleteConfirm:!1,hasErrors:!1,errors:[],deleteName:""}},methods:{setSort(t){t===this.sortKey&&(this.sortDir="asc"===this.sortDir?"desc":"asc"),this.sortKey=t},onPaste(t,e){e.stopPropagation(),e.preventDefault();var s,a=e.clipboardData.getData("text/plain"),r=a.split("\n");for(s=0;s<r.length;s++)this.sorted[s+t].mark=r[s];return!1},close(){this.hasChanged?this.closeConfirm=!0:this.$emit("close")},verify(){var t=this;this.errors=[],this.hasErrors=!1,0===this.newName.length&&(this.hasErrors=!0,this.errors.push("The title cannot be blank.")),parseInt(this.newMarks)||(this.hasErrors=!0,this.errors.push("The marks make no sense"));var e=this.newResults.filter((function(e){return t.markError(e.mark)}));e.length>0&&(this.hasErrors=!0,this.errors.push("Marks must be either a number or blank"));var s=this.newResults.filter((function(e){return e.mark>t.newMarks}));return s.length>0&&(this.hasErrors=!0,this.errors.push("Marks cannot be higher than "+this.newMarks)),0===this.errors.length},save(){var t=this;if(this.verify()){var e={id:this.id,name:this.newName,marks:this.newMarks,results:this.newResults};y.putWyap((function(e){t.$emit("refresh")}),this.$errorHandler,e)}},deleteWyap(){var t=this;y.deleteWyap((function(e){t.$emit("deleted"),t.deleteName=""}),this.$errorHandler,this.id)},markError(t){if(t)return"number"!==typeof t},changed(){this.hasChanged=!0,this.verify()},rowClass(t){var e=0;"classCode"===this.sortKey&&(e=this.classes.indexOf(t.classCode)),"boarding"===this.sortKey&&(e=this.boarding.indexOf(t.boarding));var s=e%2===1?"bg-tertiary":"";return s},inputClass(t){var e=0;"classCode"===this.sortKey&&(e=this.classes.indexOf(t.classCode)),"boarding"===this.sortKey&&(e=this.boarding.indexOf(t.boarding));var s=e%2===1?"bg-tertiary":"bg-secondary";return s}},computed:{visible(){return this.newResults},sorted(){var t=this.visible.filter((function(t){return t.id>0}));return t.sort(this.$compare(this.sortKey,this.sortDir))},classes(){return this.$parseOptions(this.sorted,"classCode").map((function(t){return t.value}))},boarding(){return this.$parseOptions(this.sorted,"boarding").map((function(t){return t.value}))}},watch:{},components:{},created(){this.newResults=this.$cloneArray(this.results),this.newName=this.name,this.newMarks=this.marks}}),N=M,P=(s("d142"),s("5d16")),z=s("f85a"),G=s("f962c"),H=s("01a4"),I=s("3d3c"),Y=s("2ef0"),B=s("e81c"),L=s("ebe6"),R=s("965d"),K=s("5b32"),F=s("96f0"),U=s("58c0"),X=Object(q["a"])(N,D,A,!1,null,null,null),J=X.exports;Q()(X,"components",{QBar:P["a"],QToolbarTitle:z["a"],QInput:k["a"],QSpace:G["a"],QBanner:H["a"],QScrollArea:_["a"],QMarkupTable:S["a"],QIcon:O["a"],QToggle:I["a"],QBtn:Y["a"],QDialog:B["a"],QCard:L["a"],QCardSection:R["a"],QCardActions:K["a"],QSeparator:F["a"]}),Q()(X,"directives",{ClosePopup:U["a"]});var V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pr-sm col column"},[s("q-toolbar",{staticClass:"bg-secondary toolbar-slim"},[s("q-tabs",{staticClass:"text-font",attrs:{dense:"","active-color":"accent"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab",{attrs:{name:"table",icon:"fal fa-table"}},[s("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v("\n             Table of results (%) by class\n           ")])],1),s("q-tab",{attrs:{name:"bar",icon:"fal fa-chart-bar"}},[s("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v("\n             Mark distribution\n           ")])],1)],1),s("q-space"),s("q-badge",{attrs:{color:"font-secondary","text-color":"font",outline:"",size:"lg"}},[t._v(t._s(t.count)+" results")]),s("q-badge",{staticClass:"q-mx-md",attrs:{color:"font-secondary",outline:""}},[t._v("Average = "+t._s(t.statistics.mean)+" mks")]),s("q-badge",{attrs:{color:"font-secondary",outline:""}},[t._v("Std Dev = "+t._s(t.statistics.sd)+" mks")])],1),t.wyap?s("q-tab-panels",{staticClass:"col column",attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab-panel",{staticClass:"q-px-none col column",attrs:{name:"bar"}},[s("bar",{staticClass:"col column q-pb-xl",attrs:{results:t.results,wyap:t.wyap,statistics:t.statistics}})],1),s("q-tab-panel",{staticClass:"q-px-none q-pb-xl col column",attrs:{name:"table"}},[s("classTable",{staticClass:"col column",attrs:{results:t.results,wyap:t.wyap,statistics:t.statistics},on:{fullscreen:function(e){t.fsCt=!0}}})],1)],1):t._e(),s("q-dialog",{attrs:{maximized:""},model:{value:t.fsCt,callback:function(e){t.fsCt=e},expression:"fsCt"}},[s("q-card",{staticClass:"full-width column bg-primary",staticStyle:{height:"100vh"}},[s("classTable",{staticClass:"col column full-width",attrs:{"full-screen":"",results:t.results,wyap:t.wyap,statistics:t.statistics},on:{close:function(e){t.fsCt=!1}}})],1)],1)],1)},Z=[],tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"chart"})},et=[],st=s("915b"),at=s("3099"),rt=s("3903"),nt=s("d610");st["f"](nt["a"]),st["f"](rt["a"]);var ot={name:"Hod.Wyap.Analysis.Bar",props:{results:{type:Array,required:!0},wyap:{type:Object,required:!0},statistics:{type:Object,required:!0}},data(){return{chart:null}},methods:{makeChart(){var t=st["c"](this.$refs.chart,at["l"]);t.data=this.data;var e=t.xAxes.push(new at["a"]);e.renderer.grid.template.location=0,e.dataFields.category="category",e.renderer.minGridDistance=15,e.renderer.grid.template.location=.5,e.renderer.grid.template.strokeDasharray="1,3",e.renderer.labels.template.rotation=-90,e.renderer.labels.template.horizontalCenter="left",e.renderer.labels.template.location=.5,e.title.text="Mark / "+this.wyap.marks,e.renderer.labels.template.adapter.add("dx",(function(t,e){return-e.maxRight/2}));var s=t.yAxes.push(new at["k"]);s.tooltip.disabled=!0,s.title.text="# pupils",s.renderer.ticks.template.disabled=!0,s.renderer.axisFills.template.disabled=!0;var a=t.series.push(new at["c"]);a.dataFields.categoryX="category",a.dataFields.valueY="value",a.tooltipText="{names}",a.sequencedInterpolation=!0,a.fillOpacity=0,a.strokeOpacity=1,a.strokeDashArray="1,3",a.columns.template.width=.01,a.tooltip.pointerOrientation="horizontal",t.cursor=new at["m"],this.chart=t}},computed:{data(){for(var t=[],e=0;e<this.wyap.marks;e++){var s=this.results.filter((function(t){return t.mark===e+1})),a=s.map((function(t){return t.firstName+" "+t.lastName+"\n"}));t.push({category:e,value:s.length,names:a})}return t}},watch:{},components:{},created(){},mounted(){this.makeChart()},beforeDestroy(){this.chart&&this.stacked.dispose()}},it=ot,lt=(s("9ece"),Object(q["a"])(it,tt,et,!1,null,"11c96365",null)),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pr-sm col column"},[s("div",{staticClass:"row fit col column"},[s("div",{staticClass:"col q-mt-none column"},[s("q-scroll-area",{staticClass:"column col"},[s("q-markup-table",{staticClass:"q-mb-xl col column bg-primary",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-pb-md"},[s("tr",[s("th",{staticClass:"q-mx-none",staticStyle:{"padding-left":"0px"},attrs:{colspan:t.classes.length+2}},[s("q-toolbar",{staticClass:"full-width no-padding",staticStyle:{"min-height":"10px","max-height":"10px",height:"10px"},attrs:{dense:""}},[s("span",{staticClass:"q-mx-md"},[t.fullScreen?t._e():s("q-btn",{attrs:{icon:"fas fa-expand-arrows-alt",flat:"",color:"positive",size:"xs",dense:""},on:{click:function(e){return t.$emit("fullscreen")}}}),t.fullScreen?s("q-btn",{attrs:{icon:"fas fa-times",flat:"",color:"positive",size:"xs",dense:""},on:{click:function(e){return t.$emit("close")}}}):t._e()],1),s("q-btn-toggle",{staticClass:"no-shadow q-mr-md",attrs:{"toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:t.modeOptions,size:"sm"},scopedSlots:t._u([{key:"flagged",fn:function(){return[s("q-tooltip",[t._v("Flagged as underperformed")])]},proxy:!0},{key:"gender",fn:function(){return[s("q-tooltip",[t._v("View by gender")])]},proxy:!0},{key:"names",fn:function(){return[s("q-tooltip",[t._v("View names")])]},proxy:!0}]),model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}}),s("q-space")],1)],1)]),s("tr",{staticClass:"bg-tertiary",staticStyle:{"max-height":"8px",height:"8px","overflow-y":"hidden"}},[s("th",{staticClass:"text-left"},[t._v("%")]),t._l(t.data,(function(e){return s("th",{key:e.name,staticClass:"text-center"},[t._v(t._s(e.name))])})),s("th",{staticClass:"text-right"})],2)]),s("tbody",{staticClass:"bg-primary q-mt-md",staticStyle:{"font-size":"5px"}},t._l(101,(function(e){return s("tr",{key:e,staticClass:"ct-row db-primary ct-border"},[s("td",{staticClass:"text-left ct-row ct-border",class:t.rowBgColor(102-e),staticStyle:{width:"10px"}},[t._v(t._s((102-e)%5==0?102-e:""))]),t._l(t.data,(function(a){return s("td",{key:a.name,staticClass:"ct-row ct-border text-center bg-primary",class:(102-e)%10==0?"bg-secondary":""},[t._l(t.getPctResults(a,102-e),(function(e){return"names"===t.mode?s("span",{key:e.id,staticClass:"q-mx-xs",class:t.nameClass(e)},[t._v(t._s(e.lastName))]):t._e()})),t._l(t.getPctResults(a,102-e),(function(e){return"names"!==t.mode?s("q-btn",{key:e.id,staticClass:"q-pa-none",staticStyle:{"max-height":"4px",height:"4px","font-size":"8px","padding-top":"0px","padding-bottom":"0px","margin-left":"1px","margin-right":"1px"},attrs:{color:t.badgeColor(e),"text-color":t.badgeColor(e),label:t.badgeLabel(e),size:"xs",dense:""},on:{click:function(s){return t.showResult(e)}}},[t._v(".\n                  "),s("q-tooltip",{attrs:{"content-class":"bg-font-secondary"}},[s("p",{staticClass:"text-bold"},[t._v(t._s(e.name))]),s("p",[t._v(t._s(e.mark)+" / "+t._s(t.wyap.marks))]),s("p",[t._v(t._s(e.percentage)+"%")])])],1):t._e()}))],2)})),s("td",{staticClass:"ct-row ct-border bg-secondary",staticStyle:{width:"10px"}},[t._v(t._s((102-e)%5==0?102-e:""))])],2)})),0)])],1)],1)])])},ut=[],pt={name:"hods.metrics.wyaps.results",props:{results:{type:Array,required:!0},wyap:{type:Object,required:!0},statistics:{type:Object,required:!0},fullScreen:{type:Boolean}},data(){return{mode:"flagged",modeOptions:[{icon:"fas fa-flag",value:"flagged",slot:"flagged"},{icon:"fas fa-venus-mars",value:"gender",slot:"gender"},{icon:"fas fa-user",value:"names",slot:"names"}]}},methods:{getPctResults(t,e){return e<1||e>100?[]:t.results.find((function(t){return t.pct===e})).results},nameClass(t){return t.hasUnderperformed?"text-warning":"font-secondary"},badgeColor(t){return"gender"===this.mode?"M"===t.gender?"red-3":"blue-4":t.hasUnderperformed?"warning":"font-secondary"},badgeLabel(t){return"names"===this.mode?t.lastName:"."},rowBgColor(t){return Math.round(t)===Math.round(this.meanPct)?"bg-accent text-font-negative":"bg-secondary"}},computed:{visible(){return this.results},sorted(){var t=this.visible.filter((function(t){return t.id>0}));return t.sort(this.$compare(this.sortKey,this.sortDir))},classes(){var t=this.$parseOptions(this.results,"classCode").map((function(t){return t.value}));return t.sort()},boarding(){var t=this.$parseOptions(this.results,"boarding").map((function(t){return t.value}));return t.sort()},data(){var t=[],e=this;return this.classes.forEach((function(s,a){for(var r={name:s,results:[]},n=100;n>0;n--){var o=e.results.filter((function(t){return t.classCode===s&&Math.round(t.percentage)===n})),i={pct:n,results:o};r.results.push(i)}t.push(r)})),t},meanPct(){return this.wyap.marks?100*this.statistics.mean/this.wyap.marks:0}},watch:{},components:{},created(){},mounted(){console.log("kjkj",this.statistics)}},ht=pt,mt=(s("1567"),s("eb05")),ft=s("6dd6"),bt=Object(q["a"])(ht,dt,ut,!1,null,null,null),yt=bt.exports;Q()(bt,"components",{QInput:k["a"],QScrollArea:_["a"],QMarkupTable:S["a"],QToolbar:mt["a"],QBtn:Y["a"],QBtnToggle:ft["a"],QTooltip:j["a"],QSpace:G["a"]});var gt={name:"hods.metrics.wyaps.results",props:{results:{type:Array,required:!0},wyap:{type:Object,required:!0},statistics:{type:Object,required:!0}},data(){return{tab:"table",fsCt:!1}},methods:{},computed:{count(){return this.results.filter((function(t){return t.mark})).length}},components:{Bar:ct,ClassTable:yt},created(){console.warn(this.statistics)}},vt=gt,xt=s("4776"),Ct=s("dd08"),wt=s("1411"),qt=s("1d98"),kt=Object(q["a"])(vt,V,Z,!1,null,"70b55649",null),_t=kt.exports;Q()(kt,"components",{QToolbar:mt["a"],QTabs:xt["a"],QTab:Ct["a"],QTooltip:j["a"],QSpace:G["a"],QBadge:W["a"],QTabPanels:wt["a"],QTabPanel:qt["a"],QDialog:B["a"],QCard:L["a"]});var St={name:"HOD.Data.Wyaps",props:{},data(){return{loading:!1,wyaps:[],newOpen:!1,newWyap:{name:"",marks:null},selectedWyapId:null,wyapTab:"results",results:[],statistics:[],maximizedToggle:!1,updateOpen:!1,key:1,years:[],yearCode:""}},methods:{process(t){this.loading=!1,this.wyaps=t,this.wyaps.length>0&&(this.selectedWyapId=this.wyaps[0].id)},getWyaps(){this.year=this.$store.getters["hod/activeYear"],this.yearCode=this.$store.getters["hod/activeYearCode"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,y.getWyaps(this.process,this.$errorHandler,this.year,this.exam)},createNew(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],y.postWyap(this.processNew,this.$errorHandler,this.year,this.exam,this.newWyap)},processNew(){this.getWyaps(),this.newWyap={name:"",marks:null}},processResults(t){this.results=t.results,this.statistics=t.statistics,this.$q.loading.hide()},setWyap(t){this.selectedWyapId=t},openUpdate(){this.key++,this.updateOpen=!0},getWyap(t){this.$q.loading.show(),y.getWyapResults(this.processResults,this.$errorHandler,t)},refresh(){this.getWyaps(),this.getWyap(this.selectedWyapId),this.updateOpen=!1},deletedWyap(){this.getWyaps(),this.updateOpen=!1}},computed:{columns(){var t=[];return t},wyap(){var t=this,e=this.wyaps.find((function(e){return e.id===t.selectedWyapId}));return e}},watch:{selectedWyapId(t){this.getWyap(t)}},components:{Loading:g["a"],Results:E,Update:J,Analysis:_t},created(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getWyaps(),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getWyaps),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getWyaps),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getWyaps)},beforeDestroy(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch(),this.examWatch&&this.examWatch()}},Ot=St,Wt=(s("bf8b"),s("6c93")),jt=s("ac9b"),$t=s("66dc"),Qt=s("7d9a"),Tt=s("8c18"),Et=Object(q["a"])(Ot,h,m,!1,null,null,null),Dt=Et.exports;Q()(Et,"components",{QScrollArea:_["a"],QList:Wt["a"],QItem:jt["a"],QItemSection:$t["a"],QIcon:O["a"],QItemLabel:Qt["a"],QSeparator:F["a"],QPopupProxy:Tt["a"],QBanner:H["a"],QToolbar:mt["a"],QTabs:xt["a"],QTab:Ct["a"],QBtn:Y["a"],QTabPanels:wt["a"],QTabPanel:qt["a"],QDialog:B["a"],QCard:L["a"],QCardSection:R["a"],QInput:k["a"],QCardActions:K["a"]}),Q()(Et,"directives",{ClosePopup:U["a"]});var At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loading,channel:"hod.metrics.history"}}),t.loading?t._e():s("history-table",{key:t.componentKey,attrs:{history:t.subject.history,grades:t.subject.grades,bands:t.subject.bands,bandedHistory:t.subject.bandedHistory}}),t.loading?t._e():s("history-stack",{key:t.componentKey,ref:"stack",attrs:{id:"1",profile:t.subject.stackedHistory,grades:t.subject.grades}})],1)},Mt=[],Nt={getClassMetrics(t,e,s){var a=b["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+a.id+"/metrics/class/"+s).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getYearMLO(t,e,s,a,r){var n=b["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+n.id+"/metrics/year/"+s+"/MLO/"+a,{cancelToken:r}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getYearMetrics(t,e,s,a,r){var n=b["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+n.id+"/metrics/year/"+s+"/metrics/"+a,{cancelToken:r}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getYearMetricsSpreadsheet(t,e,s,a,r){var n=b["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+n.id+"/metrics/year/"+s+"/metrics/"+a+"/spreadsheet",{cancelToken:r}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getExamHistory(t,e,s,a){var r=b["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+r.id+"/metrics/year/"+s+"/history/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{spread:"","no-caps":"",dense:"",outline:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:t.styles,year:"full-width"},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),s("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{outline:"",spread:"","no-caps":"",dense:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:t.modes,year:"full-width"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1),"linear"===t.style?s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-right"},[t._v(t._s("percentage"===t.mode?"%":"Abs"))]),t._l(t.grades,(function(e){return s("th",{key:e.grade},[t._v("\n          "+t._s(e.grade)+"\n          "),"GCSE Avg"===e.grade?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):t._e()],1)})),s("th")],2)]),s("tbody",t._l(t.history,(function(e){return s("tr",{key:e.year},[s("td",{staticClass:"text-right"},[t._v(t._s(e.year))]),t._l(t.grades,(function(a){return s("td",{key:a.grade,staticClass:"text-center"},[t._v("\n          "+t._s(t.getGrade(a.grade,e))+"\n        ")])})),s("td")],2)})),0)]):t._e(),"banded"===t.style?s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-right"},[t._v(t._s("percentage"===t.mode?"%":"Abs"))]),t._l(t.bands,(function(e){return s("th",{key:e},[t._v("\n          "+t._s(e)+"\n          "),"GCSE Avg"===e?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):t._e()],1)})),s("th")],2)]),s("tbody",t._l(t.bandedHistory,(function(e){return s("tr",{key:e.year},[s("td",{staticClass:"text-right"},[t._v(t._s(e.year))]),t._l(t.bands,(function(a){return s("td",{key:a.bands,staticClass:"text-center"},[t._v("\n          "+t._s(t.getBandData(a,e))+"\n        ")])})),s("td",["Avg Last 3 Yrs"===e.year?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              Last 3 (if available) year's grades are treated as a single cohort with the final absolute values divided by 3.\n            ")])],1):t._e()],1)],2)})),0)]):t._e()],1)},zt=[],Gt={name:"HOD.Metrics.MLO.ProfileTable",props:{history:{type:Array,required:!0},bandedHistory:{type:Array,required:!0},grades:{type:Array,required:!0},bands:{type:Array,required:!0},title:{tyle:String,default:""}},data(){return{mode:"percentage",modes:[{value:"percentage",label:"Percentage"},{value:"absolute",label:"Absolute"}],style:"banded",styles:[{value:"banded",label:"Banded"},{value:"linear",label:"Linear"}]}},computed:{ordered(){return parseInt(this.profile[0])<7?this.profile.split().reverse():this.profile}},methods:{getGrade(t,e){var s=e.results.find((function(e){return e.grade===t}));return s?"absolute"===this.mode||"GCSE Avg"===t?s.count:s.pct:"-"},getBandData(t,e){var s=e.results.find((function(e){return e.band===t}));if(!s)return"-";var a="absolute"===this.mode?s.abs:s.pct;return 0===a?"":a}},watch:{},components:{},created(){}},Ht=Gt,It=Object(q["a"])(Ht,Pt,zt,!1,null,"5191f8cd",null),Yt=It.exports;Q()(It,"components",{QBtnToggle:ft["a"],QMarkupTable:S["a"],QIcon:O["a"],QTooltip:j["a"]});var Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"stacked",staticStyle:{height:"200px"}})])},Lt=[];st["f"](rt["a"]);var Rt={name:"HOD.Metrics.MLO.HistoryStack",props:{profile:{type:Array,required:!0},grades:{type:Array,required:!0},title:{tyle:String,default:""}},data(){return{stacked:null,chart:null}},methods:{createStacked(){var t=st["c"](this.$refs.stacked,at["l"]);this.stacked=t,t.hiddenState.properties.opacity=0,t.colors.step=4,t.padding(10,10,10,10);var e=t.xAxes.push(new at["a"]);e.dataFields.category="year",e.renderer.grid.template.location=0,e.renderer.minGridDistance=50;var s=t.yAxes.push(new at["k"]);s.min=0,s.max=100,s.strictMinMax=!0,s.calculateTotals=!0,s.renderer.minWidth=50,t.data=this.stackData()},addStackSeries(t,e){var s=t.series.push(new at["c"]);s.sequencedInterpolation=!0,s.columns.template.width=st["e"](80),s.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",s.name=e,s.dataFields.categoryX="year",s.dataFields.valueY=e,s.dataFields.valueYShow="totalPercent",s.dataItems.template.locations.categoryX=.5,s.stacked=!0,s.tooltip.pointerOrientation="vertical";var a=this.getColor(e);s.fill=st["b"](a)},getColor(t){var e="";switch(t){case"9":case"D1":e="#FF00FF";break;case"D2":case"A*":case"8":e="#9900ff";break;case"D3":case"A":case"7":e="#0000ff";break;case"M1":case"B":case"6":e="#4a86e8";break;case"M2":case"C":case"5":e="#00ffff";break;case"M3":case"D":case"4":e="#00ff00";break;case"P1":case"E":case"3":e="#ffff00";break;case"P2":case"2":e="#ff9900";break;case"U":e="#ff0000";break;default:e="#980000"}return e},stackData(){var t=this;return this.grades.forEach((function(e){Number.isInteger(e.grade)||t.stacked.colors.reset(),"GCSE Avg"!==e.grade&&t.addStackSeries(t.stacked,e.grade)})),this.profile}},computed:{},watch:{},components:{},created(){},mounted(){this.createStacked()},beforeDestroy(){this.stacked.dispose()}},Kt=Rt,Ft=Object(q["a"])(Kt,Bt,Lt,!1,null,"5e19ad04",null),Ut=Ft.exports,Xt=s("8206"),Jt=s.n(Xt),Vt={name:"HOD.Data.MLO",props:{},data(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0,request:null,componentKey:1}},methods:{process(t){t.year===this.year&&t.id===this.subject.id&&t.examId===this.exam&&(this.componentKey++,this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.subject=t,this.loading=!1)},getHistory(){this.loading=!0,this.request&&this.request.cancel(),this.request=Jt.a.CancelToken.source(),this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.subject=this.$store.getters["user/getGlobalSubject"],Nt.getExamHistory(this.process,this.$errorFunction,this.year,this.exam,this.request)}},computed:{},watch:{},components:{HistoryTable:Yt,HistoryStack:Ut,Loading:g["a"]},created(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getHistory(),this.subWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getHistory),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getHistory),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getHistory)},beforeDestroy(){this.subWatch(),this.yearWatch(),this.examWatch()}},Zt=Vt,te=(s("f1e9"),Object(q["a"])(Zt,At,Mt,!1,null,"7c11e2db",null)),ee=te.exports;function se(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function ae(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?se(Object(s),!0).forEach((function(e){l()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):se(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var re={name:"Page.HOD.Metrics",data(){return{elements_:[{name:"wyap",label:"wyap",component:Dt,tooltip:"Whole Year Assessment Point"}]}},computed:ae(ae(ae({},Object(c["c"])("user",["getGlobalSubject"])),Object(c["c"])("hod",["activeYear"])),{},{elements(){var t=[{name:"history",label:"history",component:ee}];return t=[],11===this.activeYear||13===this.activeYear?[].concat(o()(this.elements_),o()(t)):this.elements_}}),methods:ae({},Object(c["d"])("hod",["setActiveYear"])),components:{toolbarPage:p["a"],YearBar:d["a"],ExamBar:u["a"]},created(){var t=this;this.setActiveYear(13),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.setClass),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.setClass)},beforeDestroy(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch()}},ne=re,oe=Object(q["a"])(ne,a,r,!1,null,null,null);e["default"]=oe.exports},f1e9:function(t,e,s){"use strict";var a=s("e4b7"),r=s.n(a);r.a}}]);