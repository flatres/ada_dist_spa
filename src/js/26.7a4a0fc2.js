(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{1394:function(e,t,a){"use strict";var n=a("4a2e"),s=a.n(n);s.a},"4a2e":function(e,t,a){},"5beb1":function(e,t,a){"use strict";var n=a("e381"),s=a.n(n);s.a},"9de1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("toolbar-page",{attrs:{elements:e.elements,default:"students"}})},s=[],o=a("08e9"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-tree",{staticClass:"q-mt-lg",attrs:{nodes:e.tree,color:"accent","default-expand-all":"","node-key":"id","label-key":"name",dark:""},scopedSlots:e._u([{key:"default-header",fn:function(t){return a("div",{on:{click:function(a){return e.clickNode(t.node)}}},[a("span",{staticClass:"text-weight-thin no-shadow"},[t.node.newCat||t.node.newTag?e._e():a("q-icon",{staticClass:"q-mt-xs q-mr-xs q-ml-sm",attrs:{name:"fal fa-tag",color:e.nodeColor(t.node)}}),t.node.newCat?a("new-button",{staticClass:"q-mt-xs q-mr-xs q-ml-sm",attrs:{color:e.nodeColor(t.node),success:e.newCat}}):e._e(),t.node.newTag?a("new-button",{staticClass:"q-mt-xs q-mr-xs q-ml-sm",attrs:{color:e.nodeColor(t.node),success:e.newTag}}):e._e()],1),a("span",[e._v("\n         "+e._s(t.node.name)+"\n       ")])])}}])})],1)},r=[],d=(a("c880"),a("4778")),l={getStudentTagTree(e,t,a){d["a"].get("/admin/tags/tree/students/"+a).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getTags(e,t,a){d["a"].get("/admin/tags").then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getCategories(e,t,a){d["a"].get("/admin/tags/categories").then(t=>{e(t.data)}).catch(e=>{console.log(e)})},postCategory(e,t,a){d["a"].post("/admin/tags/categories",{name:a}).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},postTag(e,t,a,n){d["a"].post("/admin/tags/tag",{catName:a,name:n}).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getTag(e,t,a){d["a"].get("/admin/tags/"+a.id).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},putTag(e,t,a){d["a"].put("/admin/tags",a).then(t=>{e(t.data)}).catch(e=>{console.log(e),t()})},deleteTag(e,t,a){d["a"].delete("/admin/tags/"+a).then(t=>{e(t.data)}).catch(e=>{console.log(e)})}},i=a("ad81"),m={name:"AdminTagsStudents",data(){return{tree:[],currentNodeId:null,currentCatId:null}},methods:{process(e){console.log(e),this.tree=e.map(e=>(e.tags.unshift({newTag:!0,name:"",id:"nt_"+e.id,catName:e.name,catId:e.id}),{id:"c"+e.id,name:e.name,children:e.tags,catId:e.id})),this.tree.unshift({newCat:!0,name:"",id:"c0"}),console.log(this.tree)},newCat(e){if(0===e.length)return!1;l.postCategory(this.fetchTree,this.$errorHandler,e)},newTag(e){if(0===e.length)return!1;console.log(this.currentCatName),l.postTag(this.fetchTree,this.$errorHandler,this.currentCatName,e)},clickNode(e){console.log(e),e.catId&&(this.currentNodeId=e.id,this.currentCatId="c"+e.catId,e.catName.length>0&&(this.currentCatName=e.catName),console.log(this.currentCatName))},nodeColor(e){return e.catId?e.id===this.currentNodeId?"accent":"white":e.id===this.currentCatId?"accent":"white"},fetchTree(){l.getStudentTagTree(this.process,null,0)}},computed:{},components:{NewButton:i["a"]},created(){this.fetchTree()}},u=m,g=(a("5beb1"),a("2be6")),h=a("5840"),p=a("34ff"),f=a("e279"),C=a.n(f),w=Object(g["a"])(u,c,r,!1,null,"397508f5",null),T=w.exports;C()(w,"components",{QTree:h["a"],QIcon:p["a"]});var b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:""}})],1)},N=[],q=a("d612"),v=a("89a2"),_={name:"ComponentCompanies",data(){return{api:{get:l.getTags,getSingle:l.getTag,put:l.putCompanies,post:l.postCompanies,delete:l.deleteCompanies},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"name",type:"string",align:"left",validations:{required:v["required"],minLength:Object(v["minLength"])(4)},editable:!0}],showForm:!0}},computed:{},components:{Crud:q["a"]},created(){}},I=_,x=(a("1394"),a("e81c")),k=Object(g["a"])(I,b,N,!1,null,"d1c2763a",null),y=k.exports;C()(k,"components",{QDialog:x["a"]});var S={name:"PageAdminTags",data(){return{elements:[{name:"students",label:"Students",component:T,shortcut:"s"},{name:"staff",label:"Staff",component:y,shortcut:"t"}]}},components:{toolbarPage:o["a"]},methods:{refresh(){}}},E=S,$=Object(g["a"])(E,n,s,!1,null,null,null);t["default"]=$.exports},e381:function(e,t,a){}}]);