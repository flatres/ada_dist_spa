(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"0dd4":function(e,t,s){},"22a0":function(e,t,s){"use strict";var n=s("f08c"),a=s.n(n);a.a},"25d5":function(e,t,s){},"6cc1":function(e,t,s){"use strict";var n=s("25d5"),a=s.n(n);a.a},"71f0":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("toolbar-page",{attrs:{elements:e.elements,default:"all"},scopedSlots:e._u([{key:"side",fn:function(){},proxy:!0}])})},a=[],r=s("08e9"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?e._e():s("div",[s("crud",{ref:"crud",attrs:{dataOverride:e.absences,columns:e.columns,search:"",download:"",sortBy:"timestamp"}})],1),e.loading?s("div",{staticClass:"flex flex-center col",staticStyle:{height:"70vh"}},[s("div",{staticClass:"row flex flex-center full-width"},[s("div",{staticClass:"text-center",staticStyle:{width:"500px","max-width":"90vw"}},[s("q-circular-progress",{staticClass:"q-ma-md row full-width text-center",attrs:{indeterminate:"",size:"90px",thickness:.2,color:"accent","center-color":"secondary","track-color":"transparent"}}),s("span",{staticClass:"text-font q-mt-lg full-width text-center"},[e._v("Extracting absences from iSams...")])],1)])]):e._e()])},i=[],o=(s("e125"),s("4823"),s("2e73"),s("dde3"),s("76d0"),s("0c1f"),s("8e9e")),l=s.n(o),u=s("d612"),b=s("4778"),d={getAllAbsences:function(e,t,s){b["a"].get("/home/absences/all").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getSubjectAbsences:function(e,t,s){b["a"].get("/home/absences/subjects").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}},f=s("9ce4");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){l()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"ComponentCompanies",data:function(){return{columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"timestamp",label:"timestamp",field:"timestamp",type:"string",align:"left",hidden:!0},{name:"lastName",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"boarding",label:"House",field:"boardingHouse",type:"string",align:"left",sortable:!0,filter:!0},{name:"year",label:"Year",field:"year",type:"string",align:"left",sortable:!0},{name:"reason",label:"Reason",field:"reason",type:"string",align:"left",sortable:!0},{name:"start",label:"Start",field:"start",type:"string",align:"left",sortable:!0},{name:"end",label:"End",field:"finish",type:"string",align:"left",sortable:!0}],absences:[],sets:[],subjects:[],loading:!0}},methods:{processAbsences:function(e){this.subjects=e.subjects,this.sets=e.sets,this.absences=e.absences,this.loading=!1}},computed:m({},Object(f["c"])("sockets",["progress"]),{syncProgress:function(){return this.progress("Home/Absences/All")}}),components:{Crud:u["a"]},created:function(){this.loading=!0,d.getAllAbsences(this.processAbsences,this.$errorHandler)}},h=g,j=(s("d535"),s("2be6")),y=s("e279"),O=s.n(y),v=s("cf19"),w=s("4f61"),x=Object(j["a"])(h,c,i,!1,null,"caf8cb3c",null),S=x.exports;O()(x,"components",{QCircularProgress:v["a"],QLinearProgress:w["a"]});var C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?e._e():s("div",[s("subjects",{on:{change:e.changeSubject}}),e.subject?s("crud",{ref:"crud",attrs:{dataOverride:e.filteredData,columns:e.columns,searchx:"",downloadx:"",sortBy:"displayName",filterboxx:""}}):e._e()],1),e.loading?s("div",{staticClass:"flex flex-center col",staticStyle:{height:"70vh"}},[s("div",{staticClass:"row flex flex-center full-width"},[s("div",{staticClass:"text-center",staticStyle:{width:"500px","max-width":"90vw"}},[s("q-circular-progress",{staticClass:"q-ma-md row full-width text-center",attrs:{indeterminate:"",size:"90px",thickness:.2,color:"accent","center-color":"secondary","track-color":"transparent"}}),s("span",{staticClass:"text-font q-mt-lg full-width text-center"},[e._v("Extracting absenses from iSams...")])],1)])]):e._e()])},P=[],_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"q-gutter-md row"},[s("q-select",{staticStyle:{"min-width":"300px"},attrs:{filled:"",dense:"","use-input":"","input-debounce":"0",label:"Subjects",options:e.options,clearable:""},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[e._v("\n            No Subjects\n          ")])],1)]},proxy:!0}]),model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1)])},A=[],k=(s("288e"),s("c880"),{getSubjectNames:function(e,t){b["a"].get("/subjects/names").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}}),E={name:"Component.Dropdowns.Subjects",props:{optionsOverride:{type:Array,default:function(){return[]}},subjectStore:{type:String}},data:function(){return{subjects:[],filter:null,subjectOptions:[],options:[],subject:null}},methods:{process:function(e){if(this.subjects=e,this.subjectOptions=e.map((function(e){return{value:e.name,label:e.name,name:e.name,code:e.code}})),this.options=this.subjectOptions,this.subjectStore){var t=this.$store.getters[this.subjectStore];this.subject=this.subjectOptions.find((function(e){return e.value===t.id}))}},filterFn:function(e,t){var s=this;t(""!==e?function(){var t=e.toLowerCase();s.options=s.subjectOptions.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){s.options=s.subjectOptions})}},computed:{},watch:{subject:function(){this.$emit("change",{label:this.subject.name,value:this.subject.name,name:this.subject.name,code:this.subject.code})}},components:{},created:function(){k.getSubjectNames(this.process)}},N=E,q=(s("6cc1"),s("3946")),D=s("ac9b"),H=s("66dc"),$=s("2ef0"),Q=Object(j["a"])(N,_,A,!1,null,"0cd69c4f",null),L=Q.exports;function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach((function(t){l()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}O()(Q,"components",{QSelect:q["a"],QItem:D["a"],QItemSection:H["a"],QBtn:$["a"]});var F={name:"ComponentCompanies",data:function(){return{columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"timestamp",label:"timestamp",field:"timestamp",type:"string",align:"left",hidden:!0},{name:"displayName",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"boarding",label:"House",field:"boardingHouse",type:"string",align:"left",sortable:!0},{name:"year",label:"Year",field:"year",type:"string",align:"left",sortable:!0},{name:"set",label:"Set",field:"setCode",type:"string",align:"left",sortable:!0},{name:"reason",label:"Reason",field:"reason",type:"string",align:"left",sortable:!0},{name:"start",label:"Start",field:"start",type:"string",align:"left",sortable:!0},{name:"end",label:"End",field:"finish",type:"string",align:"left",sortable:!0}],absences:[],sets:[],subjects:[],loading:!0,subject:null}},methods:{changeSubject:function(e){this.subject=e},processAbsences:function(e){this.subjects=e.subjects,this.sets=e.sets,this.absences=e.absences,this.loading=!1,this.subjectOptions=this.$parseOptions(this.absences,"subjectName")}},computed:z({},Object(f["c"])("sockets",["progress"]),{syncProgress:function(){return this.progress("Home/Absences/All")},filteredData:function(){var e=this;return this.subject?this.absences.filter((function(t){return t.subjectName===e.subject.value})):[]}}),components:{Crud:u["a"],Subjects:L},created:function(){this.loading=!0,d.getSubjectAbsences(this.processAbsences,this.$errorHandler)}},I=F,J=(s("22a0"),Object(j["a"])(I,C,P,!1,null,"4b808b08",null)),R=J.exports;O()(J,"components",{QCircularProgress:v["a"],QLinearProgress:w["a"]});var Y={name:"PageHomeAbsences",data:function(){return{elements:[{name:"all",label:"all",component:S},{name:"subjects",label:"subjects",component:R}]}},components:{toolbarPage:r["a"]},methods:{}},G=Y,K=Object(j["a"])(G,n,a,!1,null,null,null);t["default"]=K.exports},d535:function(e,t,s){"use strict";var n=s("0dd4"),a=s.n(n);a.a},f08c:function(e,t,s){}}]);