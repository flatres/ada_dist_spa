(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["41a0d4a8"],{"1d986":function(e,t,s){},"2b85":function(e,t,s){},"2c4f":function(e,t,s){},"3bfd":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("toolbar-page",{attrs:{elements:e.elements,default:"sessions"}})},i=[],a=s("08e9"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-ma-md"},[s("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,actions:e.actions,rowKey:"id",search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",indicator:"isActive",channel:"transport.sessions",reverse:"",newComponent:e.newComponent},on:{update:function(t){return e.$emit("update")},activate:e.activate,change:function(t){return e.$emit("update")},new:e.setRoutes,routes:e.setRoutes}}),s("q-dialog",{attrs:{persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("q-card",{staticClass:"bg-dark text-white"},[s("q-bar",{staticClass:"bg-toolbar"},[e._v("\n        Copy Routes\n        "),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),s("q-card-section",[s("set-routes",{attrs:{activeSession:e.activeSession},on:{hide:function(t){e.dialog=!1}}})],1)],1)],1)],1)},c=[],l=s("d612"),r=s("9d37"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"text-positive text-bold"},[e._v(e._s(e.currentSession.description))]),e.currentSessionRoutes.length>0?s("div",[s("span",{staticClass:"full-width text-h4 text-center"},[e._v("This session already has routes. Delete all routes to re-enable the copying feature.")]),s("critical-button",{staticClass:"q-mt-md full-width",attrs:{label:"Close",success:function(){e.$emit("hide")}}})],1):e._e(),0===e.currentSessionRoutes.length?s("div",[s("div",{staticClass:"row"},[s("q-select",{staticClass:"q-mb-lg text-lime13",staticStyle:{width:"300px"},attrs:{label:"Copy Coaches From",options:e.options,dark:"","content-class":"text-lime13"},model:{value:e.selectedSession,callback:function(t){e.selectedSession=t},expression:"selectedSession"}}),s("div",{staticClass:"q-py-md q-ml-md col"},[s("critical-button",{staticClass:"full-width",attrs:{label:"SAVE",success:e.copyRoutes}})],1)],1),s("div",{staticClass:"row"},[s("routes",{staticClass:"col",attrs:{locked:"",session:e.selectedSessionId}})],1)]):e._e()])},d=[],p=(s("ce9c"),s("423b")),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-btn",{staticClass:"col q-ma-sm",attrs:{size:e.size,outline:"",color:"positive",dense:"",icon:e.icon,label:e.label},on:{click:function(t){return e.success()}}})},m=[],b={name:"Component.Buttons.critical",props:{success:{type:Function,required:!0},size:{type:String,default:"md"},icon:{type:String,default:""},label:{type:String,default:"Delete"}},data:function(){return{}},methods:{},computed:{},components:{},created:function(){}},h=b,v=(s("4c26"),s("2be6")),g=Object(v["a"])(h,f,m,!1,null,"55eb597c",null),D=g.exports,w=s("5228"),S={name:"Tbs.Coaches.Routes",props:{activeSession:{required:!0,type:Number}},data:function(){return{sessions:[],deployedSession:null,selectedSession:null,selectedSessionId:null,currentSessionRoutes:[],currentSession:[]}},methods:{setOptions:function(e){this.sessions=e,this.sessions.unshift({id:0,description:"DEFAULT ROUTES"})},getGlobalOptions:function(){r["a"].getSessions(this.setOptions)},copyRoutes:function(){this.$q.loading.show(),w["a"].postCopyRoutes(this.copied,null,this.selectedSession.id,this.activeSession)},copied:function(){this.$q.loading.hide(),this.$emit("hide")}},watch:{selectedSession:function(){this.selectedSessionId=this.selectedSession.value}},computed:{options:function(){return this.sessions.map((function(e){return{value:e.id,label:e.description,sublabel:1===e.isActive?"ACTIVE":""}}))}},components:{Routes:p["a"],CriticalButton:D},created:function(){var e=this;this.getGlobalOptions(),this.selectedSession={value:0,label:"DEFAULT ROUTES"},this.selectedSession.id=0,w["a"].getRoutes((function(t){e.currentSessionRoutes=t}),null,this.activeSession),r["a"].getSession((function(t){e.currentSession=t,console.log(e.currentSession)}),null,this.activeSession)}},R=S,y=(s("b1d6"),Object(v["a"])(R,u,d,!1,null,"9b9eb802",null)),C=y.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-form"},[s("insert",e._b({ref:"insert",on:{input:e.input}},"insert",e.$props,!1))],1)},Y=[],O=(s("4fb0"),s("5a18")),q=s("c286"),$={name:"ComponentCrudNew",props:{rowKey:{default:"id"},columns:{required:!0,type:Array},data:{required:!0,type:Array},api:{required:!0,type:Object}},data:function(){return{}},methods:{input:function(e,t){switch(t.field){case"dateOut":var s=e.split("-"),n=new Date(s[2],s[1]-1,s[0]),i=q["b"].addToDate(n,{days:2}),a=q["b"].subtractFromDate(n,{days:13}),o=q["b"].subtractFromDate(n,{days:6}),c=q["b"].subtractFromDate(i,{days:13}),l=q["b"].subtractFromDate(i,{days:6});this.$refs.insert.newRow.dateRtn=q["b"].formatDate(i,"DD-MM-YYYY"),this.$refs.insert.newRow.taxiOutDeadline=q["b"].formatDate(a,"DD-MM-YYYY"),this.$refs.insert.newRow.coachOutDeadline=q["b"].formatDate(o,"DD-MM-YYYY"),this.$refs.insert.newRow.taxiRetDeadline=q["b"].formatDate(c,"DD-MM-YYYY"),this.$refs.insert.newRow.coachRetDeadline=q["b"].formatDate(l,"DD-MM-YYYY");break;case"dateRet":var r=e.split("-"),u=new Date(r[2],r[1]-1,r[0]),d=q["b"].subtractFromDate(u,{days:13}),p=q["b"].subtractFromDate(u,{days:6});this.$refs.insert.newRow.taxiRetDeadline=q["b"].formatDate(d,"DD-MM-YYYY"),this.$refs.insert.newRow.coachRetDeadline=q["b"].formatDate(p,"DD-MM-YYYY");break;default:}console.log(e,t)}},computed:{},components:{Insert:O["default"]},created:function(){console.log(this.$props)},mounted:function(){}},_=$,M=(s("8824"),Object(v["a"])(_,x,Y,!1,null,"79df3c78",null)),E=M.exports,T=s("89a2"),k={name:"ComponentCompanies",data:function(){return{dialog:!1,newComponent:E,activeSession:null,api:{get:r["a"].getSessions,getSingle:r["a"].getSession,put:r["a"].putSession,post:r["a"].postSession,delete:r["a"].deleteSession},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"description",label:"Description",field:"description",type:"string",align:"left",validations:{required:T["required"],minLength:Object(T["minLength"])(4)},editable:!0},{name:"dteOutward",label:"Outward Date",field:"dateOut",type:"date",align:"right",validations:{},editable:!0},{name:"dteRet",label:"Ret Date",field:"dateRtn",type:"date",align:"right",validations:{},editable:!0},{name:"taxiOutDeadlineDateTime",label:"Taxi Out Deadline",field:"taxiOutDeadline",type:"datetime",align:"right",validations:{},editable:!0},{name:"coachOutDeadline",label:"Coach Out Deadline",field:"coachOutDeadline",type:"datetime",align:"right",validations:{},editable:!0},{name:"taxiRetDeadline",label:"Txi Rtn Deadline",field:"taxiRetDeadline",type:"datetime",align:"right",validations:{},editable:!0},{name:"coachRetDeadline",label:"Coach Rtn Deadline",field:"coachRetDeadline",type:"datetime",align:"right",validations:{},editable:!0}],actions:[{title:"Make Active",event:"activate",icon:"fal fa-check",confirm:!0,confirmMessage:"Are you sure?"},{title:"Copy Routes",event:"routes",icon:"fal fa-bus"}],showForm:!0,maxWidth:800}},methods:{setRoutes:function(e){this.activeSession=e.id?e.id:e,this.dialog=!0},activate:function(e){var t=this;r["a"].activateSession((function(){t.update()}),(function(){console.warn("Unable to Activate")}),e["id"])},update:function(){this.$refs.crud.get(),this.$emit("update")}},computed:{},components:{Crud:l["a"],SetRoutes:C},created:function(){}},A=k,F=(s("437a"),Object(v["a"])(A,o,c,!1,null,"78bd2f18",null)),j=F.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("routes",{attrs:{session:0}})},U=[],z={name:"Tbs.Settings.DefaultRoutes",data:function(){return{}},methods:{},watch:{},computed:{},components:{Routes:p["a"]},created:function(){}},L=z,N=(s("a59f"),Object(v["a"])(L,I,U,!1,null,"7e4124e6",null)),B=N.exports,G={name:"Page.TBS.Settings",data:function(){return{elements:[{name:"sessions",label:"sessions",component:j,shortcut:"b"},{name:"routes",label:"default routes",shortcut:"a",component:B}]}},components:{toolbarPage:a["a"]}},J=G,K=Object(v["a"])(J,n,i,!1,null,null,null);t["default"]=K.exports},"437a":function(e,t,s){"use strict";var n=s("2b85"),i=s.n(n);i.a},"4c26":function(e,t,s){"use strict";var n=s("5ca5"),i=s.n(n);i.a},"5ca5":function(e,t,s){},8824:function(e,t,s){"use strict";var n=s("8cc4"),i=s.n(n);i.a},"8cc4":function(e,t,s){},a59f:function(e,t,s){"use strict";var n=s("1d986"),i=s.n(n);i.a},b1d6:function(e,t,s){"use strict";var n=s("2c4f"),i=s.n(n);i.a}}]);