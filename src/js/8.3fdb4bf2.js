(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0029":function(t,e,a){},"077a":function(t,e,a){},"11c0":function(t,e,a){},"1c33":function(t,e,a){"use strict";var o=a("077a"),i=a.n(o);i.a},"34a0":function(t,e,a){},4584:function(t,e,a){"use strict";var o=a("b778"),i=a.n(o);i.a},6198:function(t,e,a){"use strict";var o=a("34a0"),i=a.n(o);i.a},"71c1":function(t,e,a){"use strict";var o=a("ee21"),i=a.n(o);i.a},7697:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.activeSession?a("toolbar-page",{attrs:{elements:t.elements,default:"home"}}):t._e(),t._v("\n  "+t._s(t.activeSession)+"\n  "),t.activeSession?t._e():a("h1",{staticClass:"q-ma-lg"},[t._v("No Session Selected")])],1)},i=[],s=(a("e125"),a("2e73"),a("8e9e")),n=a.n(s),r=a("08e9"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-mb-md"},[a("q-input",{staticClass:"row full-width text-font",attrs:{"label-color":"font",filled:"",dense:"",label:"Search",autofocus:this.$q.platform.is.desktop},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"fad fa-search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"row q-gutter-xs scroll"},[a("div",{staticClass:"col-md col-12 bg-secondary"},[a("q-bar",{staticClass:"bg-accent",attrs:{dense:""}},[a("div",{staticClass:"text-dark"},[t._v("New / Changed")]),a("q-space"),t.newBookings.length>0?a("q-badge",{attrs:{color:"blue-9"}},[t._v("\n          "+t._s(t.newBookings.length)+"\n        ")]):t._e()],1),a("q-scroll-area",{staticStyle:{"max-height":"80vh",height:"80vh"},attrs:{visible:"false"}},[a("q-list",{staticClass:"no-padding"},t._l(t.newBookings,(function(e){return a("booking-card",{key:e.id,staticClass:"q-pa-xs text-white bg-grey-9 q-my-sm q-mx-xs",attrs:{group:"new",dense:"",booking:e,taxiCompanies:t.taxiCompanies},on:{change:t.getBookings}})})),1)],1)],1),a("div",{staticClass:"col-md-3 col-12 bg-secondary"},[a("q-bar",{staticClass:"bg-orange",attrs:{dense:""}},[a("div",{staticClass:"text-dark"},[t._v("Enquiry Made")]),a("q-space"),t.pendingBookings.length>0?a("q-badge",{attrs:{color:"orange-9"}},[t._v("\n          "+t._s(t.pendingBookings.length)+"\n        ")]):t._e(),a("q-btn",{attrs:{dense:"",color:"dark",flat:"",icon:"fal fa-envelope"}})],1),a("q-scroll-area",{staticStyle:{"max-height":"80vh",height:"80vh"},attrs:{visible:"false"}},[a("q-list",{staticClass:"no-padding"},t._l(t.pendingBookings,(function(e){return a("booking-card",{key:e.id,staticClass:"q-pa-xs text-white bg-grey-9 q-my-sm q-mx-xs",attrs:{group:"pending",dense:"",booking:e,taxiCompanies:t.taxiCompanies},on:{change:t.getBookings}})})),1)],1)],1),a("div",{staticClass:"col-md-3 col-12 bg-secondary"},[a("q-bar",{staticClass:"bg-light-green-5",attrs:{dense:""}},[a("div",{staticClass:"text-dark"},[t._v("Confirmed To Parents")]),a("q-space")],1),a("q-scroll-area",{staticStyle:{"max-height":"80vh",height:"80vh"},attrs:{visible:"false"}},[a("q-list",{staticClass:"no-padding"},t._l(t.confirmedBookings,(function(e){return a("booking-card",{key:e.id,staticClass:"q-pa-xs text-white bg-grey-9 q-my-sm q-mx-xs",attrs:{group:"confirmed",dense:"",booking:e,taxiCompanies:t.taxiCompanies},on:{change:t.getBookings}})})),1)],1)],1),a("div",{staticClass:"col-md-2 col-12 bg-secondary"},[a("q-bar",{staticClass:"bg-red-14",attrs:{dense:""}},[a("div",{staticClass:"text-dark"},[t._v("Cancelled")]),a("q-space")],1),a("q-scroll-area",{staticStyle:{"max-height":"80vh",height:"80vh"},attrs:{visible:"false"}},[a("q-list",{staticClass:"no-padding",attrs:{"q-mx-xs":""}},t._l(t.cancelledBookings,(function(e){return a("booking-card",{key:e.id,staticClass:"q-pa-xs text-white bg-grey-9 q-my-sm",attrs:{group:"cancelled",dense:"",booking:e,taxiCompanies:t.taxiCompanies}})})),1)],1)],1)])])},c=[],u=a("4778"),p=a("452d"),d={getAllBookings(t,e,a){var o=p["a"].getters["transport/activeSession"];u["a"].get("/transport/taxis/bookings/"+o).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getBookings(t,e,a){var o=p["a"].getters["transport/activeSession"];u["a"].get("/transport/taxis/bookings/"+o+"/"+a.type).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getNewCount(t,e){var a=p["a"].getters["transport/activeSession"];u["a"].get("/transport/taxis/newbookings/"+a).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getBookingsByCompany(t,e,a){var o=p["a"].getters["transport/activeSession"];u["a"].get("/transport/taxis/companies/bookings/"+o).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getBooking(t,e,a){var o=p["a"].getters["transport/activeSession"];u["a"].get("/transport/taxis/bookings/"+o+"/"+a.id).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},putBooking(t,e,a){u["a"].put("/transport/taxis/bookings",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},putTaxiAssignment(t,e,a){u["a"].put("/transport/taxis/assignment",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},putUnshareTaxi(t,e,a){u["a"].put("/transport/taxis/share/remove",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},putShareTaxi(t,e,a){u["a"].put("/transport/taxis/share",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},putConfirmBooking(t,e,a){u["a"].put("/transport/taxis/confirm",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},postBooking(t,e,a){u["a"].post("/transport/taxis/bookings",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},deleteBooking(t,e,a){u["a"].delete("/transport/taxis/bookings/"+a).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getSummary(t,e,a){var o=p["a"].getters["transport/activeSession"];u["a"].get("/transport/taxis/summary/"+o+"/"+a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},postSummary(t,e,a){u["a"].post("/transport/taxis/summary",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})}},g={getSession(t,e,a){u["a"].get("/transport/taxis/session/"+t).then(t=>{e(t.data)}).catch(t=>{console.log(t)})},getStations(t,e,a){u["a"].get("/transport/taxis/locations/stations").then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getStation(t,e,a){u["a"].get("/transport/taxis/locations/stations/"+a.id).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},putStation(t,e,a){u["a"].put("/transport/taxis/locations/stations",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},postStation(t,e,a){u["a"].post("/transport/taxis/locations/stations",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},deleteStation(t,e,a){u["a"].delete("/transport/taxis/locations/stations/"+a).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getAirports(t,e,a){u["a"].get("/transport/taxis/locations/airports").then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getAirport(t,e,a){u["a"].get("/transport/taxis/locations/airports/"+a.id).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},putAirport(t,e,a){u["a"].put("/transport/taxis/locations/airports",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},postAirport(t,e,a){u["a"].post("/transport/taxis/locations/airports",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},deleteAirport(t,e,a){u["a"].delete("/transport/taxis/locations/airports/"+a).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getPickupLocations(t,e,a){u["a"].get("/transport/taxis/locations/pickup").then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getPickupLocation(t,e,a){u["a"].get("/transport/taxis/locations/pickup/"+a.id).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},putPickupLocations(t,e,a){u["a"].put("/transport/taxis/locations/pickup",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},postPickupLocations(t,e,a){u["a"].post("/transport/taxis/locations/pickup",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},deletePickupLocations(t,e,a){u["a"].delete("/transport/taxis/locations/pickup/"+a).then(e=>{t(e.data)}).catch(t=>{console.log(t)})},getCompanies(t,e){u["a"].get("/transport/taxis/companies").then(e=>{t(e.data)}).catch(t=>{console.log(t)})},putCompanies(t,e,a){u["a"].put("/transport/taxis/companies",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},postCompanies(t,e,a){u["a"].post("/transport/taxis/companies",a).then(e=>{t(e.data)}).catch(t=>{console.log(t),e()})},deleteCompanies(t,e,a){u["a"].delete("/transport/taxis/companies/"+a).then(e=>{t(e.data)}).catch(t=>{console.log(t)})}},m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[t.hasNote?a("q-icon",{staticClass:"text-lime cursor-pointer",attrs:{size:"xs",name:"note",color:"positive"},on:{click:function(e){e.stopPropagation(),t.showNote=!0}}},[a("q-popup-proxy",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down"}},[a("q-banner",{staticClass:"bg-lime text-black",staticStyle:{"max-width":"200px"}},[a("p",{staticClass:"text-black"},[t._v(t._s(t.row.note))])])],1)],1):t._e()],1)},b=[],h={name:"",props:{columns:{required:!1,type:Array},row:{required:!0}},data(){return{showNote:!1}},methods:{show(){}},computed:{hasNote(){return!!this.row.note&&this.row.note.length>0}},components:{},created(){}},k=h,f=(a("c3b3"),a("2be6")),x=a("34ff"),y=a("8c18"),v=a("01a4"),q=a("e81c"),C=a("ebe6"),_=a("965d"),w=a("96f0"),T=a("e279"),S=a.n(T),B=Object(f["a"])(k,m,b,!1,null,"af9e42c6",null),O=B.exports;S()(B,"components",{QIcon:x["a"],QPopupProxy:y["a"],QBanner:v["a"],QDialog:q["a"],QCard:C["a"],QCardSection:_["a"],QSeparator:w["a"]});var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col",staticStyle:{"min-width":"500px","min-height":"50vh"}},[a("div",{staticClass:"col-12"},[a("q-select",{ref:"name",attrs:{"map-options":"",dense:"",autofocus:"",clearable:"",outlined:"",options:t.pupilOptions,label:"Pupil Name","content-class":"bg-primary",dark:"",error:t.$v.booking.pupilId.$error,"use-input":"","input-debounce":"0",readonly:t.isEdit},on:{change:function(e){return t.pupilDetails(t.selectedPupil)},input:function(e){return t.pupilDetails(t.selectedPupil)},filter:t.pupilFilter},model:{value:t.selectedPupil,callback:function(e){t.selectedPupil=e},expression:"selectedPupil"}}),t.pupilHouse?a("q-chip",{attrs:{dense:"",icon:"home",size:"10px"}},[t._v(t._s(t.pupilHouse))]):t._e(),t.pupilEmail?a("q-chip",{attrs:{dense:"",icon:"mail",size:"10px"}},[t._v(t._s(t.pupilEmail))]):t._e()],1),a("br"),t.pupilHouse?a("q-tabs",{staticClass:"bg-tertiery text-accent",attrs:{dense:"","active-bg-color":"tertiary"},model:{value:t.journeyTab,callback:function(e){t.journeyTab=e},expression:"journeyTab"}},[t.isRetOnly?t._e():a("q-tab",{attrs:{name:"out",label:"Outbound"}}),t.isOutOnly?t._e():a("q-tab",{attrs:{name:"ret",label:"Return"}})],1):t._e(),t.pupilHouse?a("q-tab-panels",{attrs:{animated:""},model:{value:t.journeyTab,callback:function(e){t.journeyTab=e},expression:"journeyTab"}},[a("q-tab-panel",{staticClass:"bg-secondar q-px-xs",attrs:{name:"out"}},[a("div",{staticClass:"row q-mt-md"},[t.hasPassengersOut?t._e():a("q-btn",{staticClass:"text-accent col-3",attrs:{size:"sm",outline:"",icon:"fal fa-user-graduate fa-xs",label:"Add Pupil"},nativeOn:{click:function(e){t.hasPassengersOut=!0}}}),t.hasPassengersOut?a("h1",{staticClass:"q-mx-none q-pa-xs fullwidth bgx-grey-8"},[t._v("Passengers")]):t._e(),t.hasPassengersOut?a("q-select",{staticClass:"col q-ml-md q-py-none",attrs:{"map-options":"",dense:"",autofocus:"",outlined:"",options:t.pupilOptions,label:"Pupil Name","content-class":"bg-dark",dark:"","use-input":"","input-debounce":"0"},on:{input:t.addPassengerOut,filter:t.pupilFilter},model:{value:t.booking.currentPassengerOut,callback:function(e){t.$set(t.booking,"currentPassengerOut",e)},expression:"booking.currentPassengerOut"}}):t._e()],1),t.hasPassengersOut?a("div",{staticClass:"q-mt-sm",attrs:{id:"passengers"}},t._l(t.booking.out.passengers,(function(e){return a("q-chip",{key:e.id,attrs:{size:"small",outline:"",removable:"",color:"accent","text-color":"accent",icon:"fal fa-user-graduate"},on:{remove:function(a){return t.removePassengerOut(e.id)}}},[t._v(t._s(e.lastName+", "+e.firstName.charAt(0)+" ("+e.boardingHouse+")")+"\n            ")])})),1):t._e(),a("h1",{staticClass:"q-mx-none q-pa-xs fullwidth bgx-grey-8"},[t._v("Pickup")]),a("q-input",{attrs:{dark:"",outlined:"",dense:"",label:"Pickup Time",mask:"time",placeholder:"15:00",rules:["time"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{model:{value:t.booking.out.pickupTime,callback:function(e){t.$set(t.booking.out,"pickupTime",e)},expression:"booking.out.pickupTime"}})],1)],1)]},proxy:!0}],null,!1,1777172983),model:{value:t.booking.out.pickupTime,callback:function(e){t.$set(t.booking.out,"pickupTime",e)},expression:"booking.out.pickupTime"}}),a("br"),a("q-select",{attrs:{"map-options":"",outlined:"",dense:"",clearable:"",options:t.pickupOptions,label:"From","content-class":"bg-dark",dark:"","use-input":"","emit-value":"","input-debounce":"0"},on:{filter:t.pickupFilter},model:{value:t.booking.out.pickup,callback:function(e){t.$set(t.booking.out,"pickup",e)},expression:"booking.out.pickup"}}),t.booking.out.pickup?a("h1",{staticClass:"q-mx-none q-pa-xs fullwidth bgx-grey-8"},[t._v("Destination")]):t._e(),t.booking.out.pickup?a("q-btn-toggle",{staticClass:"q-my-md toggles",attrs:{"toggle-color":"accent","text-color":"white",spread:"",unelevated:"","toggle-text-color":"black",options:[{label:"Flight",value:"flight"},{label:"Train",value:"train"},{label:"Address",value:"address"}]},model:{value:t.booking.out.journeyType,callback:function(e){t.$set(t.booking.out,"journeyType",e)},expression:"booking.out.journeyType"}}):t._e(),"flight"===t.booking.out.journeyType&&t.booking.out.pickup?a("div",[a("q-select",{attrs:{"map-options":"",outlined:"",dense:"",error:t.$v.booking.out.airport.$error,options:t.airports,label:"Airport / Terminal","content-class":"bg-dark",dark:"","emit-value":""},model:{value:t.booking.out.airport,callback:function(e){t.$set(t.booking.out,"airport",e)},expression:"booking.out.airport"}}),a("q-input",{attrs:{label:"Flight Number",outlined:"",dense:"",type:"text",error:t.$v.booking.out.flightNumber.$error,dark:""},model:{value:t.booking.out.flightNumber,callback:function(e){t.$set(t.booking.out,"flightNumber",e)},expression:"booking.out.flightNumber"}}),a("q-input",{attrs:{dark:"",outlined:"",dense:"",label:"Flight Time",mask:"time",placeholder:"15:00",rules:["time"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{model:{value:t.booking.out.flightTime,callback:function(e){t.$set(t.booking.out,"flightTime",e)},expression:"booking.out.flightTime"}})],1)],1)]},proxy:!0}],null,!1,685679835),model:{value:t.booking.out.flightTime,callback:function(e){t.$set(t.booking.out,"flightTime",e)},expression:"booking.out.flightTime"}})],1):t._e(),"train"===t.booking.out.journeyType&&t.booking.out.pickup?a("div",[a("q-select",{attrs:{"map-options":"",outlined:"",dense:"",error:t.$v.booking.out.station.$error,options:t.stations,label:"Train Station","content-class":"bg-dark",dark:"","emit-value":""},model:{value:t.booking.out.station,callback:function(e){t.$set(t.booking.out,"station",e)},expression:"booking.out.station"}}),"train"===t.booking.out.journeyType?a("q-input",{attrs:{dark:"",placeholder:"15:00",outlined:"",dense:"",label:"Train Time",mask:"time",rules:["time"]},scopedSlots:t._u([{key:"append",fn:function(){return["train"===t.booking.out.journeyType?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{model:{value:t.booking.out.trainTime,callback:function(e){t.$set(t.booking.out,"trainTime",e)},expression:"booking.out.trainTime"}})],1)],1):t._e()]},proxy:!0}],null,!1,4015994318),model:{value:t.booking.out.trainTime,callback:function(e){t.$set(t.booking.out,"trainTime",e)},expression:"booking.out.trainTime"}}):t._e()],1):t._e(),"address"===t.booking.out.journeyType&&t.booking.out.pickup?a("div",[a("q-input",{staticClass:"q-mt-lg",attrs:{filled:"",label:"Destination Address",error:t.$v.booking.out.address.$error&&t.hasSubmitted,dark:"",type:"textarea"},model:{value:t.booking.out.address,callback:function(e){t.$set(t.booking.out,"address",e)},expression:"booking.out.address"}})],1):t._e()],1),a("q-tab-panel",{staticClass:"bg-secondar q-px-xs",attrs:{name:"ret"}},[a("div",{staticClass:"row q-mt-md"},[t.hasPassengersRet?t._e():a("q-btn",{staticClass:"text-accent col-3",attrs:{size:"sm",outline:"",dark:"",icon:"fal fa-user-graduate fa-xs",label:"Add Pupil"},nativeOn:{click:function(e){t.hasPassengersRet=!0}}}),t.hasPassengersRet?a("h1",{staticClass:"q-mx-none q-pa-xs fullwidth bgx-grey-8"},[t._v("Passengers")]):t._e(),t.hasPassengersRet?a("q-select",{staticClass:"col q-ml-md q-py-none",attrs:{"map-options":"",dense:"",autofocus:"",outlined:"",options:t.pupilOptions,label:"Pupil Name","content-class":"bg-dark",dark:"","use-input":"","input-debounce":"0"},on:{input:t.addPassengerRet,filter:t.pupilFilter},model:{value:t.booking.currentPassengerRet,callback:function(e){t.$set(t.booking,"currentPassengerRet",e)},expression:"booking.currentPassengerRet"}}):t._e()],1),t.hasPassengersRet?a("div",{staticClass:"q-mt-sm",attrs:{id:"passengers"}},t._l(t.booking.ret.passengers,(function(e){return a("q-chip",{key:e.id,attrs:{size:"small",dense:"",removable:"",color:"accent","text-color":"black",icon:"fal fa-user-graduate"},on:{remove:function(a){return t.removePassengerRet(e.id)}}},[t._v(t._s(e.lastname+", "+e.firstname.charAt(0)+" ("+e.boardingHouse+")")+"\n            ")])})),1):t._e(),a("h1",{staticClass:"q-mx-none q-pa-xs fullwidth bgx-grey-8"},[t._v("Pickup")]),a("q-input",{attrs:{dark:"",outlined:"",dense:"",label:"Pickup Time",mask:"time",placeholder:"15:00",rules:["time"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{model:{value:t.booking.ret.pickupTime,callback:function(e){t.$set(t.booking.ret,"pickupTime",e)},expression:"booking.ret.pickupTime"}})],1)],1)]},proxy:!0}],null,!1,4118592282),model:{value:t.booking.ret.pickupTime,callback:function(e){t.$set(t.booking.ret,"pickupTime",e)},expression:"booking.ret.pickupTime"}}),a("q-btn-toggle",{staticClass:"q-my-md toggles",attrs:{"toggle-color":"accent","text-color":"white",spread:"",unelevated:"","toggle-text-color":"black",options:[{label:"None",value:null},{label:"Flight",value:"flight"},{label:"Train",value:"train"},{label:"Address",value:"address"}]},model:{value:t.booking.ret.journeyType,callback:function(e){t.$set(t.booking.ret,"journeyType",e)},expression:"booking.ret.journeyType"}}),"flight"===t.booking.ret.journeyType?a("div",[a("q-select",{attrs:{"map-options":"",outlined:"",dense:"",error:t.$v.booking.ret.airport.$error,options:t.airports,label:"Airport / Terminal","content-class":"bg-dark",dark:"","emit-value":""},model:{value:t.booking.ret.airport,callback:function(e){t.$set(t.booking.ret,"airport",e)},expression:"booking.ret.airport"}}),a("q-input",{attrs:{label:"Flight Number",outlined:"",dense:"",type:"text",error:t.$v.booking.ret.flightNumber.$error,placeholder:"15:00",dark:""},model:{value:t.booking.ret.flightNumber,callback:function(e){t.$set(t.booking.ret,"flightNumber","string"===typeof e?e.trim():e)},expression:"booking.ret.flightNumber"}}),a("q-input",{attrs:{dark:"",outlined:"",dense:"",error:t.$v.booking.ret.flightTime.$error,placeholder:"15:00",label:"Pickup Time",mask:"time",rules:["time"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{model:{value:t.booking.ret.flightTime,callback:function(e){t.$set(t.booking.ret,"flightTime",e)},expression:"booking.ret.flightTime"}})],1)],1)]},proxy:!0}],null,!1,4007507766),model:{value:t.booking.ret.flightTime,callback:function(e){t.$set(t.booking.ret,"flightTime",e)},expression:"booking.ret.flightTime"}})],1):t._e(),"train"===t.booking.ret.journeyType?a("div",[a("q-select",{attrs:{"map-options":"",outlined:"",dense:"",error:t.$v.booking.ret.station.$error,options:t.stations,label:"Train Station","content-class":"bg-dark",dark:"","emit-value":""},model:{value:t.booking.ret.station,callback:function(e){t.$set(t.booking.ret,"station",e)},expression:"booking.ret.station"}}),a("q-input",{attrs:{dark:"",outlined:"",dense:"",error:t.$v.booking.ret.trainTime.$error,label:"Pickup Time",mask:"time",rules:["time"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{model:{value:t.booking.ret.trainTime,callback:function(e){t.$set(t.booking.ret,"trainTime",e)},expression:"booking.ret.trainTime"}})],1)],1)]},proxy:!0}],null,!1,2063631726),model:{value:t.booking.ret.trainTime,callback:function(e){t.$set(t.booking.ret,"trainTime",e)},expression:"booking.ret.trainTime"}})],1):t._e(),"address"===t.booking.ret.journeyType?a("div",[a("q-input",{staticClass:"q-mt-lg",attrs:{filled:"",label:"Pickup Address",error:t.$v.booking.ret.address.$error,dark:"",type:"textarea"},model:{value:t.booking.ret.address,callback:function(e){t.$set(t.booking.ret,"address",e)},expression:"booking.ret.address"}})],1):t._e(),t.booking.ret.journeyType?a("h1",{staticClass:"q-mx-none q-pa-xs fullwidth bgx-grey-8"},[t._v("Destination")]):t._e(),t.booking.ret.journeyType?a("q-select",{attrs:{"map-options":"",outlined:"",dense:"",options:t.pickupOptions,label:"From","content-class":"bg-dark",dark:"","use-input":"","input-debounce":"0","emit-value":"",error:t.$v.booking.ret.destination.$error},on:{filter:t.pickupFilter},model:{value:t.booking.ret.destination,callback:function(e){t.$set(t.booking.ret,"destination",e)},expression:"booking.ret.destination"}}):t._e()],1)],1):t._e(),t.showBottomButtons?a("div",[a("div",{staticClass:"row col-3"},[a("q-btn",{staticClass:"text-accent col-3",attrs:{outline:"",dark:"",iconx:"fal fa-pen fa-xs",label:"Add Note"},nativeOn:{click:function(e){t.booking.hasNote=!t.booking.hasNote}}})],1),t.pupilHouse?a("div",{staticClass:"row full-width col"},[t.booking.hasNote?a("q-input",{staticClass:"q-mt-lg col",attrs:{filled:"",label:"",dark:"",type:"textarea"},model:{value:t.booking.note,callback:function(e){t.$set(t.booking,"note",e)},expression:"booking.note"}}):t._e()],1):t._e(),a("div",{staticClass:"row q-mt-md full-width"},[a("q-btn",{staticClass:"text-accent col",attrs:{size:"large",outlinex:"",xflat:"",color:"accent","text-color":"black",dark:"",icon:"fal fa-check",label:t.isEdit?"Save Changes":"Submit Booking"},nativeOn:{click:function(e){return t.submit(e)}}})],1)]):t._e()],1)},P=[],j=a("8b05"),I=a("89a2"),N={name:"TBSTaxiBookingNew",props:{bookingToEdit:{type:Object},id:{type:Number},channel:{type:String,default:""}},data(){return{dark:!0,isEdit:!1,isOutOnly:!1,isRetOnly:!1,hasSubmitted:!1,pupilNames:[],pupilOptions:[],journeyTab:"out",selectedPupil:null,pupilHouse:null,pupilEmail:null,pickupLocations:[],pickupOptions:[],currentPassengerOut:null,hasPassengersOut:!1,currentPassengerRet:null,hasPassengersRet:!1,airports:[],stations:[],booking:{id:null,pupilId:null,sessionId:null,hasNote:!1,note:null,out:{journeyType:null,newPassenger:[],passengers:[],pickup:null,pickupTime:"13:00",destination:null,flightTime:null,flightNumber:null,airport:null,trainTime:null,station:null,address:""},ret:{journeyType:null,newPassenger:[],passengers:[],pickup:null,pickupTime:"13:00",destination:null,flightTime:null,flightNumber:null,airport:null,station:null,trainTime:null,address:null}}}},validations(){return{booking:{pupilId:{required:I["required"]},out:{pickup:{},flightTime:{requiredIf:Object(I["requiredIf"])(()=>"flight"===this.booking.out.journeyType&&this.booking.out.pickup&&this.hasSubmitted)},flightNumber:{requiredIf:Object(I["requiredIf"])(()=>"flight"===this.booking.out.journeyType&&this.booking.out.pickup&&this.hasSubmitted)},airport:{requiredIf:Object(I["requiredIf"])(()=>"flight"===this.booking.out.journeyType&&this.booking.out.pickup&&this.hasSubmitted)},trainTime:{requiredIf:Object(I["requiredIf"])(()=>"train"===this.booking.out.journeyType&&this.booking.out.pickup&&this.hasSubmitted)},station:{requiredIf:Object(I["requiredIf"])(()=>"train"===this.booking.out.journeyType&&this.booking.out.pickup&&this.hasSubmitted)},address:{requiredIf:Object(I["requiredIf"])(()=>"address"===this.booking.out.journeyType&&this.booking.out.pickup&&this.hasSubmitted)}},ret:{destination:{requiredIf:Object(I["requiredIf"])(()=>this.booking.ret.journeyType&&this.hasSubmitted)},flightNumber:{requiredIf:Object(I["requiredIf"])(()=>"flight"===this.booking.ret.journeyType&&this.hasSubmitted)},flightTime:{requiredIf:Object(I["requiredIf"])(()=>"flight"===this.booking.ret.journeyType&&this.hasSubmitted)},airport:{requiredIf:Object(I["requiredIf"])(()=>"flight"===this.booking.ret.journeyType&&this.hasSubmitted)},trainTime:{requiredIf:Object(I["requiredIf"])(()=>"train"===this.booking.ret.journeyType&&this.hasSubmitted)},station:{requiredIf:Object(I["requiredIf"])(()=>"train"===this.booking.ret.journeyType&&this.hasSubmitted)},address:{requiredIf:Object(I["requiredIf"])(()=>"address"===this.booking.ret.journeyType&&this.hasSubmitted)}}}}},methods:{submit(){this.hasSubmitted=!0,this.$v.booking.$touch(),this.$v.booking.$error?this.$q.notify("Please review fields again."):(this.$q.loading.show(),this.isEdit?d.putBooking(()=>{this.$q.notify("Submitted"),this.$q.loading.hide(),this.$emit("saved")},()=>{this.$q.notify("Sad Face :("),this.$q.loading.hide()},this.booking):d.postBooking(()=>{this.$q.notify("Submitted"),this.$q.loading.hide(),this.$emit("saved")},()=>{this.$q.notify("Sad Face :("),this.$q.loading.hide()},this.booking))},pupilDetails(t){this.booking.pupilId=t.value,j["a"].getDetails(t=>{this.pupilHouse=t.boardingHouse,this.pupilEmail=t.email},null,{id:t.value})},getStudents(){j["a"].getNames(t=>{this.pupilNames=t.map(t=>({value:t.id,label:t.lastname+", "+t.firstname,sublabel:"Millmead"}));var e=this.pupilNames.find(t=>t.value===this.bookingToEdit.studentId);for(var a of(this.selectedPupil=this.bookingToEdit?e:null,this.pupilDetails(e),this.bookingToEdit.passengerIds))this.isOutOnly&&this.addPassengerOut({value:a}),this.isRetOnly&&this.addPassengerRet({value:a})})},getPickupLocations(){g.getPickupLocations(t=>{this.pickupLocations=t.map(t=>({value:t.id,label:t.name}));var e=this.pickupLocations.find(t=>t.value===this.bookingToEdit.schoolLocation);this.isEdit&&this.isOutOnly&&(this.booking.out.pickup=e),this.isEdit&&this.isRetOnly&&(this.booking.ret.destination=e)})},getAirports(){g.getAirports(t=>{this.airports=t.map(t=>({value:t.id,label:t.name}));var e=this.airports.find(t=>t.value===this.bookingToEdit.airportId);this.isEdit&&this.isOutOnly&&(this.booking.out.airport=e),this.isEdit&&this.isRetOnly&&(this.booking.ret.airport=e)})},getStations(){g.getStations(t=>{this.stations=t.map(t=>({value:t.id,label:t.name}));var e=this.stations.find(t=>t.value===this.bookingToEdit.stationId);this.isEdit&&this.isOutOnly&&(this.booking.out.station=e),this.isEdit&&this.isRetOnly&&(this.booking.ret.station=e)})},pupilFilter(t,e){e(""!==t?()=>{var e=t.toLowerCase();this.pupilOptions=this.pupilNames.filter(t=>t.label.toLowerCase().indexOf(e)>-1)}:()=>{this.pupilOptions=this.pupilNames})},pickupFilter(t,e){e(""!==t?()=>{var e=t.toLowerCase();this.pickupOptions=this.pickupOptions.filter(t=>t.label.toLowerCase().indexOf(e)>-1)}:()=>{this.pickupOptions=this.pickupLocations})},addPassengerOut(t){this.hasPassengersOut=!0,this.booking.out.passengers.find(e=>e.id===t.value)||t.value===this.booking.pupilId||j["a"].getDetails(t=>{this.booking.out.passengers.push(t)},null,{id:t.value})},removePassengerOut(t){this.booking.out.passengers=this.booking.out.passengers.filter(e=>e.id!==t)},addPassengerRet(t){this.hasPassengersRet=!0,this.booking.ret.passengers.find(e=>e.id===t.value)||t.value===this.booking.pupilId||j["a"].getDetails(t=>{this.booking.ret.passengers.push(t)},null,{id:t.value})},removePassengerRet(t){this.booking.ret.passengers=this.booking.ret.passengers.filter(e=>e.id!==t)},mergeJourney(t,e){console.log(t),t.journeyType=e.journeyType,t.pickupTime=e.pickupTime,t.flightTime=e.flightTime,t.flightNumber=e.flightNumber,t.trainTime=e.trainTime,t.address=e.address}},computed:{showBottomButtons(){return this.isEdit||this.booking.out.pickup&&this.booking.out.journeyType||this.booking.ret.destination}},watch:{},components:{},created(){if(this.bookingToEdit){var t=this.bookingToEdit;this.isEdit=!0,this.booking.sessionId=t.sessionId,this.booking.note=t.note,this.booking.id=t.id,t.note&&(this.booking.hasNote=!0),t.isReturn?(this.isRetOnly=!0,this.mergeJourney(this.booking.ret,t),this.journeyTab="ret"):(this.isOutOnly=!0,this.mergeJourney(this.booking.out,t))}this.getStudents(),this.getPickupLocations(),this.getAirports(),this.getStations(),this.booking.sessionId=this.$store.getters["transport/activeSession"]}},E=N,Q=(a("c621"),a("3946")),A=a("4840"),L=a("4776"),R=a("dd08"),D=a("1411"),F=a("1d98"),z=a("2ef0"),H=a("bc74"),J=a("d538"),M=a("6dd6"),U=Object(f["a"])(E,$,P,!1,null,"1d52247b",null),W=U.exports;S()(U,"components",{QSelect:Q["a"],QChip:A["a"],QSeparator:w["a"],QTabs:L["a"],QTab:R["a"],QTabPanels:D["a"],QTabPanel:F["a"],QBtn:z["a"],QInput:H["a"],QIcon:x["a"],QPopupProxy:y["a"],QTime:J["a"],QBtnToggle:M["a"]});var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-xs q-my-sm bg-tertiary",class:t.booking.revision>1&&t.status<3?"bd-warning":"bd-font-secondary",attrs:{draggable:t.status<4},on:{dragleave:t.onDragLeave,dragenter:t.onDragEnter,dragover:t.onDragOver,drop:t.onDrop,dragstart:t.onDragStart}},[a("q-expansion-item",{staticClass:"font bg-tertiary",attrs:{group:t.group,dense:""},scopedSlots:t._u([{key:"header",fn:function(){return[1===t.status?a("q-item-section",{staticClass:"flex bg-tertiary",attrs:{avatar:""}},[0===t.booking.isReturn?a("q-icon",{attrs:{color:"white",name:"fal fa-arrow-square-right"}}):t._e(),1===t.booking.isReturn?a("q-icon",{attrs:{name:"fal fa-arrow-square-left",color:"accent"}}):t._e()],1):t._e(),1===t.status?a("q-item-section",[a("q-item-label",[a("div",{staticClass:"row fullwidth"},["address"===t.booking.journeyType?a("q-icon",{attrs:{left:"",name:"fal fa-location",size:"xs"}}):t._e(),"flight"===t.booking.journeyType?a("q-icon",{attrs:{name:"fal fa-paper-plane",color:"",size:"xs",left:""}}):t._e(),"train"===t.booking.journeyType?a("q-icon",{attrs:{name:"fal fa-train",color:"",size:"xs",left:""}}):t._e(),0===t.booking.isReturn?a("div",{staticClass:"text-white col"},[t._v(t._s("address"===t.booking.journeyType?"Address":t.booking.displayTo))]):t._e(),1===t.booking.isReturn?a("div",{staticClass:"text-white col"},[t._v(t._s("address"===t.booking.journeyType?"Address":t.booking.displayFrom))]):t._e()],1)]),a("q-item-label",{staticClass:"text-white",attrs:{caption:""}},[t._v("\n          "+t._s(t.booking.displayName)+"\n          "),t.booking.passengerCount>0?a("q-badge",{staticClass:"text-font-negative",attrs:{color:"positive"}},[t._v("\n            + "+t._s(t.booking.passengerCount)+"\n          ")]):t._e(),t.booking.note?a("q-icon",{attrs:{size:"xs",name:"note",color:"positive",right:""},on:{click:function(t){t.stopPropagation()}}},[a("q-popup-proxy",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down"}},[a("q-banner",{staticClass:"bg-positive text-font",staticStyle:{"max-width":"200px"}},[a("p",{staticClass:"text-black"},[t._v(t._s(t.booking.note))])])],1)],1):t._e()],1)],1):t._e(),t.status>1?a("q-item-section",[a("q-item-label",[a("div",{staticClass:"row full-width"},[0===t.booking.isReturn?a("q-icon",{attrs:{color:"white",name:"fal fa-arrow-square-right",left:""}}):t._e(),1===t.booking.isReturn?a("q-icon",{attrs:{name:"fal fa-arrow-square-left",left:""}}):t._e(),t.status>2&&0===t.booking.sentToCompany?a("q-icon",{attrs:{name:"fal fa-taxi",left:"",color:"warning"}},[a("q-tooltip",[t._v("Booking not sent to company")])],1):t._e(),"address"===t.booking.journeyType?a("q-icon",{attrs:{name:"fal fa-location"}}):t._e(),1===t.status?a("div",[0===t.booking.isReturn?a("span",{staticClass:"text-white q-ml-xs"},[t._v(t._s("address"===t.booking.journeyType?"Address":t.booking.displayTo))]):t._e(),1===t.booking.isReturn?a("span",{staticClass:"text-white q-ml-xs"},[t._v(t._s("address"===t.booking.journeyType?"Address":t.booking.displayTo))]):t._e()]):t._e(),t.status>1?a("div",[a("span",{staticClass:"text-white q-ml-xs"},[t._v(t._s(t.taxiCompanyName)+" @ "+t._s(t.booking.pickupTime))])]):t._e()],1)]),a("q-item-label",{staticClass:"text-white",attrs:{caption:""}},[a("div",{staticClass:"row"},[t._v("\n            "+t._s(t.booking.displayName)+"\n            "),t.booking.passengerCount>0?a("q-badge",{staticClass:"q-ml-xs",attrs:{color:"red"}},[t._v("\n            + "+t._s(t.booking.passengerCount)+"\n            ")]):t._e(),t.booking.note?a("q-icon",{attrs:{size:"xs",name:"note",color:"positive",right:""},on:{click:function(t){t.stopPropagation()}}},[a("q-popup-proxy",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down"}},[a("q-banner",{staticClass:"bg-lime text-black",staticStyle:{"max-width":"200px"}},[a("p",{staticClass:"text-black"},[t._v(t._s(t.booking.note))])])],1)],1):t._e()],1)])],1):t._e()]},proxy:!0}])},[a("q-item-section",{staticClass:"bg-secondary booking-details"},[a("q-item-label",{staticClass:"q-ml-md q-mt-md"},[a("q-badge",{staticClass:"q-mr-xs label",attrs:{outline:"",color:"font-secondary","text-color":"white",label:"Ref"}}),t._v("\n        "+t._s(t.booking.id)+"\n      ")],1),a("q-item-label",{staticClass:"q-ml-md q-mt-md"},[a("q-badge",{staticClass:"q-mr-xs  label",attrs:{color:"font-secondary",outline:"","text-color":"white",label:"Pickup"}}),t._v("\n        "+t._s(t.booking.pickupTime)+" - "+t._s(t.booking.displayFrom)+"\n      ")],1),t._l(t.booking.revisions,(function(e){return a("q-item-label",{key:e.createdAt,staticClass:"q-ml-md q-mt-md ",class:!0===e.recent?"text-warning":"text-font-secondary"},[a("q-badge",{staticClass:"q-mr-xs  label",attrs:{color:"secondary","text-color":"text-secondary",label:t.Pickup}}),t._v("\n        "+t._s(e.pickupTime)+" - "+t._s(e.displayFrom)+"\n      ")],1)})),a("q-item-label",{staticClass:"q-ml-md q-mt-md row"},[a("q-badge",{staticClass:"q-mr-xs  label",attrs:{outline:"",color:"font-secondary","text-color":"white",label:"Dropoff"}}),a("span",{staticClass:"row col"},[a("div",{staticClass:"col-12 q-ml-xs"},[t._v(t._s(t.booking.displayTo))])])],1),t._l(t.booking.revisions,(function(e){return a("q-item-label",{key:e.createdAt,staticClass:"q-ml-md q-mt-md ",class:!0===e.recent?"text-warning":"text-font-secondary"},[a("q-badge",{staticClass:"q-mr-xs  label",attrs:{color:"secondary","text-color":"text-secondary",label:t.Pickup}}),t._v("\n        "+t._s(e.displayTo)+"\n      ")],1)})),t.status>1?a("q-item-label",{staticClass:"q-ml-md q-mt-md"},[a("q-badge",{staticClass:"q-mr-xs text-right label",attrs:{outline:"",color:"font-secondary","text-color":"white",label:"Company"}}),t._v("\n        "+t._s(t.booking.companyName)+"\n      ")],1):t._e(),t.booking.actionedBy?a("q-item-label",{staticClass:"q-ml-md q-mt-md"},[a("q-badge",{staticClass:"q-mr-xs  label",attrs:{outline:"",color:"font-secondary","text-color":"white",label:"Actioned"}}),t._v("\n        "+t._s(t.booking.actionedBy)+"\n      ")],1):t._e(),a("q-item-label",{staticClass:"q-ml-md q-mt-md row"},[t.booking.passengerCount>0?a("q-badge",{staticClass:"q-mr-xs label",attrs:{outlinecolor:"grey-7","text-color":"white",label:"Passengers"}}):t._e(),a("span",{staticClass:"row col"},t._l(t.booking.passengers,(function(t){return a("div",{key:t,staticClass:"col-12"},[a("q-badge",{staticClass:" q-mx-xs",attrs:{color:"grey-4","text-color":"black",label:t}})],1)})),0)],1),a("q-item-label",{staticClass:"q-ml-md q-mt-md"},[t.booking.note?a("q-badge",{staticClass:"q-mr-xs label",attrs:{outline:"",color:"positive","text-color":"black",label:"Note"}}):t._e(),t._v(" "+t._s(t.booking.note)+"\n      ")],1),a("q-item-label",{},[a("q-bar",{staticClass:"q-mt-xs bg-secondary row flex flex-center",staticStyle:{height:"50px"},attrs:{dense:""}},[a("q-btn",{staticClass:"col xq-mr-xs",attrs:{dense:"",outline:"",left:"",icon:"fal fa-minus","text-color":"deep-orange-13",label:"",size:"10px"}},[a("q-popup-proxy",[a("q-card",{staticClass:"bg-blue-tertiary",staticStyle:{width:"200px"},attrs:{dark:""}},[a("q-card-section",[t._v("\n                  Cancel Booking\n                ")]),a("q-separator",{attrs:{dark:"",inset:""}}),a("q-card-section",{staticClass:"row q-gutter-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col",attrs:{color:"pink",label:"No"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col",attrs:{color:"positive","text-color":"black",label:"Yes"},on:{click:function(e){return t.cancelBooking()}}})],1)],1)],1),a("q-tooltip",[t._v("\n              Cancel Booking\n            ")])],1),a("q-btn",{staticClass:"col qx-mr-xs",attrs:{color:"font",size:"10px",dense:"",outline:"",labelx:"Contacts",icon:"fal fa-address-card"}},[a("q-popup-proxy",[a("q-banner",{staticClass:"bd-font"},[a("q-list",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{color:"font",name:"fal fa-address-card"}})],1),a("q-item-section",[a("p",{staticClass:"text-font q-ma-none"},[t._v(t._s(t.booking.contact.title)+" "+t._s(t.booking.contact.firstName)+" "+t._s(t.booking.contact.lastName))]),a("p",{staticClass:"text-font q-ma-none"},[t._v(t._s(t.booking.contact.email))])])],1)],1)],1)],1)],1),a("q-btn",{staticClass:"col xq-mx-xs",attrs:{outline:"",dense:"",left:"",icon:"fal fa-edit","text-color":"font",size:"10px"},on:{click:function(e){return t.editBooking()}}},[a("q-tooltip",[t._v("\n              Edit Booking\n            ")])],1),a("q-btn",{staticClass:"col",attrs:{outline:"",dense:"",icon:1===t.status?"fal fa-arrow-right":"fal fa-taxi","text-color":(t.status,"positive"),size:"10px"}},[a("q-popup-proxy",{attrs:{persistentx:""}},[a("q-card",{staticClass:"bg-blue-tertiary",attrs:{dark:""}},[a("q-card-section",[0===t.booking.isReturn?a("div",{staticClass:"text-white text-h6"},[t._v(t._s(t.booking.displayTo))]):t._e(),1===t.booking.isReturn?a("div",{staticClass:"text-white text-h6"},[t._v(t._s(t.booking.displayFrom))]):t._e(),a("div",{staticClass:"text-subtitle2"},[t._v(t._s(t.booking.displayName)+"\n                    "),t.booking.passengerCount>0?a("q-badge",{attrs:{color:"positive"}},[t._v("\n                      + "+t._s(t.booking.passengerCount)+"\n                    ")]):t._e()],1)]),a("q-separator",{attrs:{dark:"",inset:""}}),a("q-card-section",{},[a("q-select",{attrs:{"emit-value":"","map-options":"",dark:"",filled:"",options:t.taxiCompanies,label:"Taxi Company"},model:{value:t.booking.companyId,callback:function(e){t.$set(t.booking,"companyId",e)},expression:"booking.companyId"}}),a("br"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width",attrs:{"text-color":"black",color:"positive",disabled:!t.booking.companyId,label:"Save"},on:{click:function(e){return t.saveTaxi()}}})],1)],1)],1)],1),2===t.status||3===t.status?a("q-btn",{staticClass:"col qx-ml-sm",attrs:{dense:"",icon:"fal fa-envelope",color:"positive","text-color":"black",size:"10px"}},[a("q-tooltip",{attrs:{"content-class":"bg-positive text-black",offset:[10,10]}},[t._v("\n              Confirm booking to parents\n            ")]),a("q-popup-proxy",[a("q-card",{staticClass:"bg-primary bd-font",attrs:{dark:""}},[a("q-card-section",[a("div",[t._v("Send Confirmation Email(s)?")])]),a("q-separator",{attrs:{dark:"",inset:""}}),a("q-card-section",{},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width",attrs:{color:"pink",label:"Confirm"},on:{click:function(e){return t.confirmBooking()}}})],1)],1)],1)],1):t._e()],1)],1),t.sharing?a("q-btn",{staticClass:"q-mt-xs",attrs:{dense:"",size:"sm",label:"Move To Own Taxi",unelevated:"",color:"accent",outline:""},on:{click:t.unshare}}):t._e()],2)],1),a("q-dialog",{ref:"new",attrs:{"content-classes":"new-modal bg-dark q-pa-md",persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.showEditForm,callback:function(e){t.showEditForm=e},expression:"showEditForm"}},[a("q-card",{staticClass:"bg-tertiary bd-font",attrs:{dark:""}},[a("q-toolbar",{staticClass:"bg-tertiary"},[a("q-toolbar-title",[t._v("Edit Booking "+t._s(t.booking.id))]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",{staticClass:"bg-secondary"},[a("booking",{key:t.booking.id,attrs:{id:t.booking.id,bookingToEdit:t.booking,channel:"tbs.taxi.bookings"},on:{close:function(e){t.showEditForm=!1},saved:t.emit}})],1)],1)],1)],1)},K=[],V={name:"TaxiBookingCard",props:{booking:{type:Object,required:!0},taxiCompanies:{type:Array,required:!0},group:{type:String,required:!0},sharing:{type:Boolean,default:!1}},data(){return{showEditForm:!1,bookingId:null,currentBooking:null}},methods:{saveTaxi(){d.putTaxiAssignment(this.emit,null,this.booking)},unshare(){d.putUnshareTaxi(this.emit,this.$errorHandler,this.booking)},confirmBooking(){d.putConfirmBooking(this.emit,null,this.booking)},cancelBooking(){d.deleteBooking(this.emit,null,this.booking.id)},editBooking(){this.currentBookingId=this.booking.id,this.showEditForm=!0,this.currentBooking=this.booking},emit(){this.showEditForm=!1,this.$emit("change")},onDragStart(t){t.dataTransfer.setData("bookingId",this.booking.id),t.dataTransfer.setData("isReturn",this.booking.isReturn),t.dataTransfer.setData("sharing",this.sharing),t.dataTransfer.dropEffect="move"},onDragLeave(t){t.target.classList.remove("drag-enter")},onDragOver(t){t.preventDefault()},onDragEnter(t){!0===t.target.draggable&&t.target.classList.add("drag-enter")},onDrop(t){t.preventDefault(),t.stopPropagation();var e=t.target,a=t.dataTransfer.getData("bookingId"),o=parseInt(t.dataTransfer.getData("isReturn")),i=this.booking.id;if(!(o!==this.booking.isReturn||this.booking.statusId>3)){var s={fromId:a,toId:i};d.putShareTaxi(this.emit,this.$errorHandler,s),e.classList.remove("drag-enter")}}},computed:{status(){return this.booking.statusId},taxiCompanyName(){var t=this.booking.companyId,e=this.taxiCompanies.find(e=>e.value===t);return e?e.label:"ERROR"}},components:{Note:O,Booking:W},created(){console.log(this.booking)}},Y=V,X=(a("71c1"),a("0f3b")),Z=a("66dc"),tt=a("7d9a"),et=a("f987"),at=a("3aaf"),ot=a("5d16"),it=a("6c93"),st=a("ac9b"),nt=a("eb05"),rt=a("f85a"),lt=a("58c0"),ct=Object(f["a"])(Y,G,K,!1,null,"ccd12842",null),ut=ct.exports;S()(ct,"components",{QExpansionItem:X["a"],QItemSection:Z["a"],QIcon:x["a"],QItemLabel:tt["a"],QBadge:et["a"],QPopupProxy:y["a"],QBanner:v["a"],QTooltip:at["a"],QBar:ot["a"],QBtn:z["a"],QCard:C["a"],QCardSection:_["a"],QSeparator:w["a"],QList:it["a"],QItem:st["a"],QSelect:Q["a"],QInput:H["a"],QDialog:q["a"],QToolbar:nt["a"],QToolbarTitle:rt["a"]}),S()(ct,"directives",{ClosePopup:lt["a"]});var pt={name:"TaxiBookingsOut",props:{},data(){return{rawBookings:[],taxiCompanies:[],search:"",showEditForm:!1,currentBookingId:null,currentBooking:null}},methods:{getBookings(){d.getAllBookings(t=>{this.rawBookings=t.bookings},null)},getTaxis(){g.getCompanies(t=>{this.taxiCompanies=t.map(t=>({value:t.id,label:t.name}))})},initialise(){var t=this.$store.getters["transport/activeSession"];this.$wampSubscribe("taxi"+t,this.getBookings),this.getBookings()}},computed:{bookings(){var t=this.search;return""===t?this.rawBookings:this.rawBookings.filter(e=>e.displayFrom.toLowerCase().indexOf(t)>-1||e.displayTo.toLowerCase().indexOf(t)>-1||e.displayName.toLowerCase().indexOf(t)>-1)},newBookings(){return this.bookings.filter(t=>1===t.statusId)},pendingBookings(){return this.bookings.filter(t=>2===t.statusId)},confirmedBookings(){return this.bookings.filter(t=>3===t.statusId)},cancelledBookings(){return this.bookings.filter(t=>4===t.statusId)}},components:{Note:O,Booking:W,BookingCard:ut},created(){this.$store.watch(()=>this.$store.getters["transport/activeSession"],this.getBookings),this.getTaxis(),this.initialise()}},dt=pt,gt=(a("1c33"),a("f962c")),mt=a("26a8"),bt=Object(f["a"])(dt,l,c,!1,null,"46a0412e",null),ht=bt.exports;S()(bt,"components",{QInput:H["a"],QIcon:x["a"],QBar:ot["a"],QSpace:gt["a"],QBadge:et["a"],QScrollArea:mt["a"],QList:it["a"],QBtn:z["a"]});var kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"q-mr-md",staticStyle:{"min-width":"200px"}},[a("q-scroll-area",{staticStyle:{height:"80vh"}},[a("q-list",{staticClass:"no-padding"},t._l(t.taxiCompanies,(function(e){return a("q-item",{key:e.value,staticClass:"q-pa-xs text-white bg-tertiary q-my-sm",class:e.id===t.currentCompanyId?"active-company":"",staticStyle:{border:"1px solid grey"},attrs:{clickable:"",group:"companies",dense:"","expand-separatorx":""},on:{click:function(a){return t.setCompany(e)}}},[a("q-item-section",{attrs:{top:""}},[a("q-item-label",{staticClass:"row"},[a("div",{staticClass:"col text-h7 text-font q-mt-xs"},[a("span",{staticClass:"q-mr-md"},[t._v(t._s(e.label))]),t.pendingEmailCount(e.value)>0?a("q-badge",{staticClass:"float-right",attrs:{color:"positive","text-color":"black"}},[t._v(t._s(t.pendingEmailCount(e.value)))]):t._e()],1)]),a("q-item-label",{staticClass:"text-white",attrs:{caption:"",size:"lg"}})],1)],1)})),1)],1)],1),a("div",{staticClass:"col"},t._l(t.taxiCompanies,(function(e){return e.id===t.currentCompanyId?a("company",{key:e.value,attrs:{company:e,rawBookings:t.companyBookings(e.value),rawTaxis:t.companyTaxis(e.value),taxiCompanies:t.taxiCompanies},on:{change:t.getBookings}}):t._e()})),1)])},ft=[],xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{drop:t.onDrop,dragenter:t.onDragEnter,dragover:t.onDragOver}},[a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"column justify-center"},[a("q-btn",{staticClass:"q-ml-md q-mt-sms",attrs:{outline:"",color:"font",label:"Email Summary",icon:"fad fa-envelope",size:"md"},on:{click:t.getSummary}})],1),a("q-input",{staticClass:"col q-ml-md",attrs:{label:"Search",filled:"",dense:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"fad fa-search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"q-mb-md"},[a("q-badge",{staticClass:"text-black",attrs:{color:"accent"}},[t._v(t._s(t.company.name))]),t.company.email?a("q-badge",{staticClass:"text-black q-mt-xs q-ml-sm",attrs:{color:"grey-6"}},[t._v(t._s(t.company.email))]):t._e(),t.company.phoneNumber?a("q-badge",{staticClass:"text-black q-mt-xs q-ml-sm",attrs:{color:"grey-6"}},[t._v(t._s(t.company.phoneNumber))]):t._e()],1),a("div",{staticClass:"row q-gutter-xs"},[a("div",{staticClass:"col bg-toolbar"},[a("q-bar",{staticClass:"bg-grey-5 text-black",attrs:{dense:""}},[a("q-btn",{attrs:{dense:"",flat:"",icon:"fal fa-arrow-square-right"}}),a("div",[t._v("Outbound")]),a("q-space"),t.assignedOutboundBookings.length>0?a("q-badge",{attrs:{color:"orange-9"}},[t._v("\n          "+t._s(t.assignedOutboundBookings.length)+"\n        ")]):t._e()],1),a("q-scroll-area",{staticStyle:{height:"80vh"},attrs:{visible:!1}},[a("q-list",{staticClass:"no-padding"},t._l(t.assignedOutboundTaxis,(function(e){return a("taxi-card",{key:e.id,attrs:{group:"out",taxi:e,taxiCompanies:t.taxiCompanies,"expand-separatorx":""},on:{change:t.emit}})})),1)],1)],1),a("div",{staticClass:"col bg-toolbar"},[a("q-bar",{staticClass:"bg-grey-5 text-black",attrs:{dense:""}},[a("q-btn",{attrs:{dense:"",flat:"",icon:"fal fa-arrow-square-left"}}),a("div",[t._v("Return")]),a("q-space"),t.assignedReturnBookings.length>0?a("q-badge",{attrs:{color:"orange-9"}},[t._v("\n          "+t._s(t.assignedReturnBookings.length)+"\n        ")]):t._e()],1),a("q-scroll-area",{staticStyle:{height:"80vh"},attrs:{visible:!1}},[a("q-list",{staticClass:"no-padding"},t._l(t.assignedReturnTaxis,(function(e){return a("taxi-card",{key:e.id,attrs:{group:"out",taxi:e,taxiCompanies:t.taxiCompanies,"expand-separatorx":""},on:{change:t.emit}})})),1)],1)],1),a("div",{staticClass:"col bg-toolbar"},[a("q-bar",{staticClass:"bg-red-14",attrs:{dense:""}},[a("div",[t._v("Cancelled")]),a("q-space")],1),a("q-scroll-area",{staticStyle:{height:"80vh"},attrs:{visible:!1}},[a("q-list",{staticClass:"no-padding"},t._l(t.cancelledBookings,(function(e){return a("booking-card",{key:e.id,staticClass:"q-pa-xs text-white bg-grey-9 q-my-sm",attrs:{group:"cancelled",booking:e,taxiCompanies:t.taxiCompanies,dense:"","expand-separatorx":""},on:{change:t.emit}})})),1)],1)],1)]),a("q-dialog",{model:{value:t.showSummary,callback:function(e){t.showSummary=e},expression:"showSummary"}},[a("q-card",{staticClass:"bd-font",staticStyle:{width:"600px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Summary")]),a("p",{staticClass:"text-font"},[t._v(t._s(t.summary.email))])]),a("q-separator"),a("q-card-section",{staticClass:"scroll bg-white text-font",staticStyle:{"max-height":"50vh"}},[a("div",{staticClass:"text-black",domProps:{innerHTML:t._s(t.summary.html)}})]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{outline:"",label:"Cancel",color:"font"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{outline:"",label:"Send",color:"positive"},on:{click:t.sendSummary}})],1)],1)],1)],1)},yt=[],vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.taxi.bookings.length>1?"bd-positive q-mt-xs q-px-xs":""},[t.taxi.bookings.length>1?a("q-badge",{staticClass:"q-mt-sm bd-primary",attrs:{outline:"",color:"secondary"}},[a("q-icon",{staticClass:"q-ml-xs q-mr-sm",attrs:{name:"fal fa-users",size:"14px",color:"font"}}),a("span",{staticClass:"text-font"},[t._v(t._s(t.taxi.count))])],1):t._e(),t._l(t.taxi.bookings,(function(e){return a("booking-card",{key:e.id,staticClass:"q-pa-xs text-white bg-grey-9 q-my-sm",attrs:{group:"out",booking:e,taxiCompanies:t.taxiCompanies,dense:"",sharing:t.taxi.count>1,"expand-separatorx":""},on:{change:t.emit}})}))],2)},qt=[],Ct={name:"Component.Taxi.TaxiCard",props:{taxi:{type:Object,required:!0},taxiCompanies:{type:Array,required:!0}},data(){return{}},methods:{emit(){this.$emit("change")}},computed:{},components:{BookingCard:ut},created(){}},_t=Ct,wt=(a("b6c7"),Object(f["a"])(_t,vt,qt,!1,null,"fef0174e",null)),Tt=wt.exports;S()(wt,"components",{QBadge:et["a"],QIcon:x["a"]});var St={name:"TaxiBookingsOut",props:{rawBookings:{type:Array,required:!0},rawTaxis:{type:Array,required:!0},company:{type:Object,required:!0}},data(){return{search:"",showEditForm:!1,taxiCompanies:[],currentBookingId:null,currentBooking:null,showSummary:!1,summary:""}},methods:{taxiCompanyName(t){var e=this.taxiCompanies.find(e=>e.value===t);return e?e.label:"-"},sendSummary(){this.$q.loading.show({message:"Sending..."}),d.postSummary(this.summarySent,this.summaryError,this.summary)},getSummary(){this.$q.loading.show({message:"Hold on to your hat! I'm putting the summary together for you."}),d.getSummary(this.displaySummary,this.summaryError,this.company.id)},displaySummary(t){this.$q.loading.hide(),this.summary=t,this.showSummary=!0},summarySent(){this.$q.loading.hide(),this.emit()},summaryError(){this.$q.loading.hide(),this.$q.notify("Something went very very wrong.")},emit(){this.$emit("change")},onDrop(t){t.preventDefault();var e=t.target,a=parseInt(t.dataTransfer.getData("bookingId")),o=t.dataTransfer.getData("sharing");"true"===o&&this.unshare(a),e.classList.remove("drag-enter")},onDragOver(t){t.preventDefault()},onDragEnter(t){!0===t.target.draggable&&t.target.classList.add("drag-enter")},unshare(t){var e=this.rawBookings.find(e=>e.id===t);d.putUnshareTaxi(this.emit,this.$errorHandler,e)}},computed:{bookings(){var t=this.search;return""===t?this.rawBookings:this.rawBookings.filter(e=>e.displayFrom.toLowerCase().indexOf(t)>-1||e.displayTo.toLowerCase().indexOf(t)>-1||e.displayName.toLowerCase().indexOf(t)>-1)},taxis(){return this.rawTaxis},assignedOutboundBookings(){return this.bookings.filter(t=>0===t.isReturn&&t.statusId<4)},assignedReturnBookings(){return this.bookings.filter(t=>1===t.isReturn&&t.statusId<4)},assignedOutboundTaxis(){return this.taxis.filter(t=>0===t.isReturn&&t.bookings[0].statusId<4)},assignedReturnTaxis(){return this.taxis.filter(t=>1===t.isReturn&&t.bookings[0].statusId<4)},cancelledBookings(){return this.bookings.filter(t=>4===t.statusId)}},components:{BookingCard:ut,TaxiCard:Tt},created(){this.$store.watch(()=>this.$store.getters["transport/activeSession"],this.getBookings)}},Bt=St,Ot=(a("f8ea"),a("5b32")),$t=Object(f["a"])(Bt,xt,yt,!1,null,"117f3fae",null),Pt=$t.exports;S()($t,"components",{QBtn:z["a"],QInput:H["a"],QIcon:x["a"],QBadge:et["a"],QBar:ot["a"],QSpace:gt["a"],QScrollArea:mt["a"],QList:it["a"],QDialog:q["a"],QCard:C["a"],QCardSection:_["a"],QSeparator:w["a"],QCardActions:Ot["a"]}),S()($t,"directives",{ClosePopup:lt["a"]});var jt={name:"TaxiCompanies",props:{},data(){return{rawBookings:[],rawTaxis:[],taxiCompanies:[],currentCompany:{},currentCompanyId:null}},methods:{setCompany(t){this.currentCompany=t,this.currentCompanyId=t.id},getBookings(){d.getAllBookings(t=>{this.rawBookings=t.bookings,this.rawTaxis=t.taxis},null)},getTaxis(){g.getCompanies(t=>{this.taxiCompanies=t.map(t=>({id:t.id,value:t.id,label:t.name,email:t.email,phoneNumber:t.phoneNumber,name:t.name})),this.currentCompany=this.taxiCompanies[0],this.currentCompanyId=this.taxiCompanies[0].id})},companyBookings(t){return this.rawBookings.filter(e=>e.companyId===t)},companyTaxis(t){return this.rawTaxis.filter(e=>e.companyId===t)},companyBookingsCount(t){var e=this.rawBookings.filter(e=>e.companyId===t&&(2===e.statusId||3===e.statusId));return e.length},pendingEmailCount(t){var e=this.rawBookings.filter(e=>e.companyId===t&&0===e.sentToCompany);return e.length},companyCancelledBookingsCount(t){var e=this.rawBookings.filter(e=>e.companyId===t&&4===e.statusId);return e.length}},computed:{},components:{Company:Pt},created(){this.$store.watch(()=>this.$store.getters["transport/activeSession"],this.getBookings),this.getBookings(),this.getTaxis();var t=this.$store.getters["transport/activeSession"];this.$wampSubscribe("taxi"+t,this.getBookings)}},It=jt,Nt=(a("c5ed"),a("dfd0")),Et=Object(f["a"])(It,kt,ft,!1,null,"0ba26fea",null),Qt=Et.exports;S()(Et,"components",{QBtn:z["a"],QScrollArea:mt["a"],QList:it["a"],QItem:st["a"],QItemSection:Z["a"],QItemLabel:tt["a"],QBadge:et["a"],QColor:Nt["a"]});var At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("crud",{ref:"crud",attrs:{data:t.data,api:t.api,columns:t.columns,sortBy:"name",search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",modal:"",channel:"taxi.pickuplocations",title:"Pickup Locations"}})],1)},Lt=[],Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-dialog",{attrs:{positionx:"top",maximizedx:"","content-classes":"new-modal bg-dark q-pa-md","no-backdrop-dismissx":"","content-css":{minWidth:"350px",minHeight:"500px"}},on:{hide:function(e){return t.$emit("close")}},model:{value:t.showForm,callback:function(e){t.showForm=e},expression:"showForm"}},[a("q-card",{staticClass:"bg-grey-9",attrs:{dark:""}},[a("q-toolbar",[a("q-toolbar-title",[t._v(t._s(t.title))]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",[a("crud",t._b({},"crud",t.$props,!1))],1)],1)],1)],1)},Dt=[],Ft=a("d612"),zt={name:"ComponentPopupCrud",props:{isPopup:{type:Boolean,default:!0},columns:{required:!0,type:Array},detailedView:{default:!0,type:Boolean},title:{default:"",type:String},api:{required:!0,type:Object,default(){return{get:null,parameters:{},getSingle:null,put:null,post:null,delete:null}}},actions:{type:Array,default(){return[]}},search:{type:Boolean,default:!1},sortBy:{type:String,default:"id"},rowKey:{type:String,default:"id"},multiselect:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},inlineEdit:{type:Boolean,default:!1},details:{type:Boolean,default:!1},newtab:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},filterbox:{type:Boolean,default:!1},filterchips:{type:Boolean,default:!1},sidebarComponents:{type:Array,default(){return[]}},canNew:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},indicator:{type:String,default:""},sidebarWidth:{default:4},download:{type:Boolean,default:!1},modal:{type:Boolean,default:!1},channel:{type:String,default:""}},data(){return{showForm:!0}},computed:{},components:{Crud:Ft["a"]},created(){}},Ht=zt,Jt=(a("4584"),Object(f["a"])(Ht,Rt,Dt,!1,null,"6f5f625c",null)),Mt=Jt.exports;S()(Jt,"components",{QDialog:q["a"],QCard:C["a"],QToolbar:nt["a"],QToolbarTitle:rt["a"],QBtn:z["a"],QCardSection:_["a"]}),S()(Jt,"directives",{ClosePopup:lt["a"]});var Ut={name:"ComponentPickupLocations",data(){return{api:{get:g.getPickupLocations,getSingle:g.getPickupLocation,put:g.putPickupLocations,post:g.postPickupLocations,delete:g.deletePickupLocations},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"name",label:"Name",field:"name",type:"string",align:"left",required:!0,validations:{required:I["required"],minLength:Object(I["minLength"])(4)},editable:!0}],showForm:!0}},computed:{},components:{Crud:Mt},created(){}},Wt=Ut,Gt=(a("cb9f"),Object(f["a"])(Wt,At,Lt,!1,null,"15d1175a",null)),Kt=Gt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("crud",{ref:"crud",attrs:{data:t.data,api:t.api,columns:t.columns,sortBy:"name",search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",modal:"",channel:"taxi.airports",title:"Airports"}})],1)},Yt=[],Xt={name:"ComponentAirports",data(){return{api:{get:g.getAirports,getSingle:g.getAirport,put:g.putAirport,post:g.postAirport,delete:g.deleteAirport},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"name",label:"Name",field:"name",type:"string",align:"left",required:!0,validations:{required:I["required"],minLength:Object(I["minLength"])(4)},editable:!0}],showForm:!0}},computed:{},components:{Crud:Mt},created(){}},Zt=Xt,te=(a("99a9"),Object(f["a"])(Zt,Vt,Yt,!1,null,"040a0aad",null)),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("crud",{ref:"crud",attrs:{data:t.data,api:t.api,columns:t.columns,sortBy:"name",search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",modal:"",channel:"taxi.stations",title:"Stations"}})],1)},oe=[],ie={name:"ComponentStations",data(){return{api:{get:g.getStations,getSingle:g.getStation,put:g.putStation,post:g.postStation,delete:g.deleteStation},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"name",label:"Name",field:"name",type:"string",align:"left",required:!0,validations:{required:I["required"],minLength:Object(I["minLength"])(4)},editable:!0}],showForm:!0}},computed:{},components:{Crud:Mt},created(){}},se=ie,ne=(a("6198"),Object(f["a"])(se,ae,oe,!1,null,"2a9e0664",null)),re=ne.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("crud",{ref:"crud",attrs:{data:t.data,api:t.api,columns:t.columns,search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",title:"Taxi Companies"}})],1)},ce=[],ue={name:"ComponentCompanies",data(){return{api:{get:g.getCompanies,put:g.putCompanies,post:g.postCompanies,delete:g.deleteCompanies},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"name",type:"string",align:"left",validations:{required:I["required"],minLength:Object(I["minLength"])(4)},editable:!0},{name:"Phone Number",label:"Phone Number",field:"phoneNumber",type:"number",align:"right",validations:{required:I["required"]},editable:!0},{name:"Email Address",label:"Email Address",field:"email",type:"string",align:"left",validations:{required:I["required"],email:I["email"]},editable:!0}],showForm:!0}},computed:{},components:{Crud:Mt},created(){}},pe=ue,de=(a("b0c2"),Object(f["a"])(pe,le,ce,!1,null,"c1ca7592",null)),ge=de.exports,me=a("9ce4");function be(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function he(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?be(Object(a),!0).forEach((function(e){n()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ke={name:"PageTransportTaxis",data(){return{elements:[{name:"home",icon:"fal fa-poll-people",component:ht,label:"Bookings",count:0,shortcut:"h",tooltip:"Bookings Grid"},{name:"overview",label:"Taxis",component:Qt,icon:"fal fa-taxi",count:0,shortcut:"c",tooltip:"Taxis"},{name:"settings",labelx:"settings",icon:"fal fa-cogs",menu:[{name:"pickups",label:"Pickup Locations",shortcut:"p",component:Kt,icon:"fal fa-arrow-up"},{name:"stations",label:"Train Stations",shortcut:"t",component:re,icon:"fal fa-train"},{name:"airports",label:"Airports",shortcut:"a",component:ee,icon:"fal fa-paper-plane"},{name:"companies",label:"Taxi Companies",shortcut:"c",component:ge,icon:"fal fa-car"}]}]}},methods:{newCount(){d.getNewCount(t=>{var e=this.elements.find(t=>"home"===t.name);e.count=t},null)},counts(){this.$wampSubscribe("taxi"+this.activeSession,this.newCount),this.newCount()}},computed:he({},Object(me["c"])("transport",["activeSession"])),created(){this.counts(),this.$store.watch(()=>this.$store.getters["transport/activeSession"],this.counts)},components:{toolbarPage:r["a"]}},fe=ke,xe=Object(f["a"])(fe,o,i,!1,null,null,null);e["default"]=xe.exports},"95cc":function(t,e,a){},"99a9":function(t,e,a){"use strict";var o=a("d605"),i=a.n(o);i.a},b0c2:function(t,e,a){"use strict";var o=a("11c0"),i=a.n(o);i.a},b6c7:function(t,e,a){"use strict";var o=a("be12"),i=a.n(o);i.a},b778:function(t,e,a){},bb15:function(t,e,a){},be12:function(t,e,a){},c3b3:function(t,e,a){"use strict";var o=a("bb15"),i=a.n(o);i.a},c5ed:function(t,e,a){"use strict";var o=a("0029"),i=a.n(o);i.a},c621:function(t,e,a){"use strict";var o=a("f6e7"),i=a.n(o);i.a},cb9f:function(t,e,a){"use strict";var o=a("95cc"),i=a.n(o);i.a},ceea:function(t,e,a){},d605:function(t,e,a){},ee21:function(t,e,a){},f6e7:function(t,e,a){},f8ea:function(t,e,a){"use strict";var o=a("ceea"),i=a.n(o);i.a}}]);