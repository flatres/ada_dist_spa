(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"041d":function(e,t,o){},"2f6c":function(e,t,o){},"39a2":function(e,t,o){},6027:function(e,t,o){"use strict";var a=o("c8d5"),s=o.n(a);s.a},"6a8a":function(e,t,o){"use strict";var a=o("041d"),s=o.n(a);s.a},8025:function(e,t,o){"use strict";var a=o("f89c"),s=o.n(a);s.a},"8d98":function(e,t,o){},aa4d:function(e,t,o){"use strict";var a=o("8d98"),s=o.n(a);s.a},b84d:function(e,t,o){"use strict";var a=o("2f6c"),s=o.n(a);s.a},c8d5:function(e,t,o){},d75e:function(e,t,o){"use strict";var a=o("39a2"),s=o.n(a);s.a},e5bb:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("toolbar-page",{attrs:{elements:e.elements,default:"roles"}})},s=[],l=o("08e9"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,search:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",sidebarComponents:e.sidebarComponents,sidebarWidth:"40",indicator:"isDefault"}})],1)},r=[],c=o("d612"),i=o("4778"),d={getRoles(e){i["a"].get("/admin/access/roles").then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getModuleTree(e){i["a"].get("/admin/access/module/tree").then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getRolePages(e,t){i["a"].get("/admin/access/roles/pages/"+e).then(e=>{t(e.data)}).catch(e=>{console.log(e)})},getRoleUsers(e,t,o){o.roleID&&i["a"].get("/admin/access/roles/users/"+o.roleID).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getRoleNewUsers(e,t,o){o.roleID&&i["a"].get("/admin/access/roles/users/new/"+o.roleID).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},postRoleUsers(e,t,o,a){a.roleID&&i["a"].post("/admin/access/roles/users/"+a.roleID,o).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},deleteRoleUsers(e,t,o,a){i["a"].delete("/admin/access/roles/users/"+a.roleID+"/"+o).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},putRolePages(e,t){i["a"].put("/admin/access/roles/pages",{id:e,pages:t}).then(e=>{}).catch(e=>{console.log(e)})},deleteRole(e,t,o){i["a"].delete("/admin/access/roles/"+o).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},deleteRoleUser(e,t,o){i["a"].delete("/admin/access/roles/user/"+e+"/"+t).then(e=>{o(e.data)}).catch(e=>{console.log(e)})},postRole(e,t,o){i["a"].post("/admin/access/roles",o).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},putRole(e,t,o){i["a"].put("/admin/access/roles",o).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},postUser(e,t,o){i["a"].post("/admin/access/roles/user",{roleId:e,userId:t}).then(e=>{o(e.data)}).catch(e=>{console.log(e)})},getAllUsers(e,t){i["a"].get("/admin/access/roles/allusers").then(e=>{t(e.data)}).catch(e=>{console.log(e)})}},u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.selectedRow?o("div",{staticClass:"row",staticStyle:{"max-height":"80vh","overflow-y":"scroll"}},[e.selectedRow.id&&e.tree?o("q-tree",{attrs:{nodes:e.tree,color:"accent","default-expand-all":"",ticked:e.ticked,"tick-strategy":e.tickStrategy,filter:e.tickFilter,"node-key":"id","label-key":"name",dark:""},on:{"update:ticked":function(t){e.ticked=t}}}):e._e()],1):e._e()},m=[],p={name:"ComponentCrudDetails",data(){return{tree:null,ticked:null,tickStrategy:"leaf-filtered",tickFilter:null,moduleIcon:{students:"fal fa-child",transport:"fal fa-space-shuttle"}}},methods:{getPages(){d.getRolePages(this.roleID,e=>{this.ticked=e})}},computed:{roleID(){return this.selectedRow.id}},watch:{selectedRow(){console.log(this.selectedRow),this.getPages()},ticked(){d.putRolePages(this.roleID,this.ticked)}},components:{},created(){d.getModuleTree(e=>{this.tree=e}),this.getPages()},props:{selectedRow:{required:!0}}},h=p,f=(o("6027"),o("2be6")),g=o("5840"),b=o("e279"),v=o.n(b),w=Object(f["a"])(h,u,m,!1,null,"04cbf286",null),k=w.exports;v()(w,"components",{QTree:g["a"]});var q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.selectedRow?o("div",{staticClass:"row"},[o("crud",{ref:"crud",attrs:{api:e.api,columns:e.columns,search:"",canNew:"",canDelete:"",newComponent:e.newComponent,sortBy:"lastName"}})],1):e._e()},y=[],C=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"row",staticStyle:{"min-height":"400px","min-width":"500px"}},[o("crud",{ref:"crud",staticClass:"col",attrs:{columns:e.columns,search:"",sortBy:"lastName",dataOverride:e.staffList,hidePagination:"",rowsPerPage:"10",indicator:"exists"},on:{selected:e.selected}})],1),o("div",{staticClass:"row q-mt-md full-width"},[o("q-btn",{directives:[{name:"hotkey",rawName:"v-hotkey.once",value:{enter:e.submit},expression:"{'enter': submit}",modifiers:{once:!0}}],staticClass:"text-primary col",attrs:{outline:"",dark:"",icon:"fal fa-check",label:"Create New"},nativeOn:{click:function(t){return e.submit(t)}}})],1)])},O=[],R={name:"ComponentLabCrudAdvancedNew",props:{rowKey:{default:"id"},data:{required:!0,type:Array},api:{required:!0,type:Object},newUsers:[]},data(){return{staffList:[],columns:[{name:"id",label:"",field:"string",hidden:!0},{name:"lastName",label:"Last Name",field:"lastname",type:"string",align:"left"},{name:"firstName",label:"First Name",field:"firstname",type:"string",align:"left"}],dark:!0}},methods:{submit(){d.postRoleUsers(this.success,this.error,this.newUsers,this.api.parameters)},success(e){console.log(e),this.data.push(...e)},error(){this.$q.notify("Oops, something went wrong")},selected(e){this.newUsers=e}},computed:{},watch:{},components:{Crud:c["a"]},created(){d.getRoleNewUsers(e=>{this.staffList=e},null,this.api.parameters)}},x=R,P=(o("8025"),o("2ef0")),D=Object(f["a"])(x,C,O,!1,null,"b53ec866",null),_=D.exports;v()(D,"components",{QBtn:P["a"]});var I={name:"AdminAccessRolesUsers",data(){return{api:{get:d.getRoleUsers,parameters:{roleID:null},post:d.postRoleUsers,delete:d.deleteRoleUsers},columns:[{name:"id",label:"",field:"string",hidden:!0},{name:"lastName",label:"Last Name",field:"lastname",type:"string",align:"left"},{name:"firstName",label:"First Name",field:"firstname",type:"string",align:"left"}],newComponent:_}},methods:{},computed:{roleID(){return this.selectedRow.id}},watch:{selectedRow(){this.selectedRow.id&&(this.api={get:d.getRoleUsers,parameters:{roleID:this.selectedRow.id},put:d.putRole,post:d.postRole,delete:d.deleteRole})}},components:{Crud:c["a"]},created(){this.selectedRow.id&&(this.api={get:d.getRoleUsers,parameters:{roleID:this.selectedRow.id},post:d.postRoleUsers,delete:d.deleteRoleUsers})},props:{selectedRow:{required:!0}}},N=I,j=(o("d75e"),Object(f["a"])(N,q,y,!1,null,"0d3892fe",null)),M=j.exports,$=o("89a2"),U={name:"AdminAccessRoles",data(){return{api:{get:d.getRoles,put:d.putRole,post:d.postRole,delete:d.deleteRole},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"name",type:"string",align:"left",validations:{required:$["required"],minLength:Object($["minLength"])(4)},editable:!0}],sidebarComponents:[{title:"Users",name:"Users",component:M},{title:"Pages",name:"Pages",component:k}],showForm:!0}},computed:{},components:{Crud:c["a"]},created(){}},Q=U,T=(o("6a8a"),Object(f["a"])(Q,n,r,!1,null,"2635d7d9",null)),S=T.exports,E=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"q-ml-xl"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col q-mt-xl",staticStyle:{"overflow-y":"scroll","max-height":"80vh"}},[o("q-icon",{attrs:{name:"fal fa-plus-circle",color:"accent"},nativeOn:{click:function(t){return e.newModule(t)}}}),o("q-tree",{staticClass:"q-mt-lg",attrs:{nodes:e.tree,color:"accent","default-expand-all":"","node-key":"id","label-key":"name",dark:""},scopedSlots:e._u([{key:"default-header",fn:function(t){return o("div",{},[t.node.module?o("div",[o("span",{staticClass:"q-mx-sm"},[o("span",{staticClass:"inline-block text-center",staticStyle:{"min-width":"20px","min-height":"20px"}},[o("q-icon",{style:{color:t.node.color},attrs:{name:""===t.node.icon?"fal fa-empty-set":t.node.icon}})],1),o("q-popup-edit",{on:{save:function(o){return e.saveModuleIcon(t.node.moduleId,t.node.icon)}},model:{value:t.node.icon,callback:function(o){e.$set(t.node,"icon",o)},expression:"prop.node.icon"}},[o("q-field",[o("q-input",{model:{value:t.node.icon,callback:function(o){e.$set(t.node,"icon",o)},expression:"prop.node.icon"}})],1)],1)],1),o("span",[e._v("\n              "+e._s(t.node.name)+"\n              "),o("q-popup-edit",{attrs:{dark:""},on:{save:function(o){return e.saveModuleName(t.node.moduleId,t.node.name)}},model:{value:t.node.name,callback:function(o){e.$set(t.node,"name",o)},expression:"prop.node.name"}},[o("q-field",[o("q-input",{model:{value:t.node.name,callback:function(o){e.$set(t.node,"name",o)},expression:"prop.node.name"}})],1)],1)],1),o("span",{staticClass:"text-weight-thin no-shadow"},[o("q-btn",{staticClass:"no-shadow",staticStyle:{width:"20px"},attrs:{icon:"fal fa-palette fa-xs"},on:{click:function(o){return o.stopPropagation(),e.setColor(t.node.moduleId,t.node.name,t.node.color)}}}),o("q-icon",{staticClass:"q-mt-xs q-mr-xs q-ml-sm",attrs:{name:"fal fa-trash",color:"red"},nativeOn:{click:function(o){return e.deleteModule(t.node.moduleId)}}}),o("q-btn",{staticClass:"no-shadow",staticStyle:{width:"20px"},attrs:{icon:"fal fa-plus fa-xs"},on:{click:function(o){return o.stopPropagation(),e.newPage(t.node.moduleId)}}})],1)]):o("div",{},[o("span",{staticClass:"row text-accent"},[e._v("\n              "+e._s(t.node.name)+"\n              "),o("div",[o("q-icon",{staticClass:"q-mx-md",attrs:{name:"fa fa-edit",color:"accent"}}),o("q-popup-edit",{attrs:{dark:""},on:{save:function(o){return e.savePage(t.node.id,t.node.name)}},model:{value:t.node.name,callback:function(o){e.$set(t.node,"name",o)},expression:"prop.node.name"}},[o("q-field",[o("q-input",{model:{value:t.node.name,callback:function(o){e.$set(t.node,"name",o)},expression:"prop.node.name"}})],1)],1)],1),o("q-icon",{staticClass:"q-mt-xs q-mr-md",attrs:{name:"fal fa-trash",color:"red"},nativeOn:{click:function(o){return e.deletePage(t.node.id)}}}),o("q-icon",{staticClass:"q-mt-xs",attrs:{name:"fal fa-info-circle"}},[o("q-tooltip",{attrs:{anchor:"center right",self:"center left",offset:[10,10]}},[o("div",e._l(t.node.roles,(function(t){return o("p",{key:t.id,staticClass:"capitalize"},[e._v("\n                      "+e._s(t.name)+"\n                    ")])})),0)])],1)],1)])])}}])})],1)])])},A=[],L=(o("e125"),o("4823"),o("2e73"),o("76d0"),o("8e9e")),B=o.n(L),F=o("9ce4"),z={deleteModule(e,t){i["a"].delete("/admin/access/structure/module/"+e).then(e=>{t(e.data)}).catch(e=>{console.log(e)})},postModuleIcon(e,t,o){i["a"].post("/admin/access/structure/module/icon",{id:e,icon:t}).then(e=>{o(e.data)}).catch(e=>{console.log(e)})},postModuleName(e,t,o){i["a"].post("/admin/access/structure/module/name",{id:e,name:t}).then(e=>{o(e.data)}).catch(e=>{console.log(e)})},postModule(e,t){i["a"].post("/admin/access/structure/module",{name:e}).then(e=>{t(e.data)}).catch(e=>{console.log(e)})},postPage(e,t,o){i["a"].post("/admin/access/structure/module/page",{moduleId:e,name:t}).then(e=>{o(e.data)}).catch(e=>{console.log(e)})},putPage(e,t,o){i["a"].put("/admin/access/structure/module/page",{id:e,name:t}).then(e=>{o(e.data)}).catch(e=>{console.log(e)})},deletePage(e,t){i["a"].delete("/admin/access/structure/module/page/"+e).then(e=>{t(e.data)}).catch(e=>{console.log(e)})},postColor(e,t,o){i["a"].post("/admin/access/structure/module/color",{id:e,color:t}).then(e=>{o(e.data)}).catch(e=>{console.log(e)})}},J=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-dialog",{attrs:{"stack-buttons":"","prevent-close":"",dark:""},scopedSlots:e._u([{key:"buttons",fn:function(t){return[o("q-btn",{attrs:{label:"Save Color",stylexx:"background:black",stylex:{color:e.currentColor}},on:{click:e.saveColor}}),o("q-btn",{attrs:{flat:"",label:"No thanks"},on:{click:e.cancelMe}})]}}]),model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Choose Color")]),o("span",{staticClass:"capitalize",attrs:{slot:"message"},slot:"message"},[e._v(e._s(e.nameText))]),o("div",{staticClass:"no-scroll",attrs:{slot:"body"},slot:"body"},[o("q-color",{staticStyle:{"max-width":"300px"},attrs:{"format-model":"hex","no-parent-field":""},model:{value:e.currentColor,callback:function(t){e.currentColor=t},expression:"currentColor"}})],1)])},K=[],Y=(o("c880"),{data(){return{}},props:["show","color","name"],computed:{showDialog:{get(){return this.show},set(e){this.$emit("update:show",!1)}},currentColor:{get(){return this.color},set(e){this.$emit("update:color",e)}},nameText(){return this.name}},methods:{cancelMe(){this.$emit("update:show",!1)},saveColor(){console.log(this.currentColor),this.$emit("saveColor",this.currentColor),this.$emit("update:show",!1)}},created(){}}),G=Y,W=o("e81c"),H=o("dfd0"),V=Object(f["a"])(G,J,K,!1,null,null,null),X=V.exports;function Z(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function ee(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(o),!0).forEach((function(t){B()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Z(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}v()(V,"components",{QDialog:W["a"],QColor:H["a"],QBtn:P["a"]});var te={name:"ComponentAdminAccessRoles",props:{},data(){return{showColorPicker:!1,tree:[],ticked:[],tickStrategy:"leaf-filtered",tickFilter:null,role:null,roles:[],moduleIcon:{students:"fal fa-child",transport:"fal fa-space-shuttle"},colorModuleId:null,colorModulecolor:null}},methods:{saveColor(e){z.postColor(this.colorModuleId,this.colorModuleColor,()=>{this.getTree()})},setColor(e,t,o){this.colorModuleColor=o,this.colorModuleName=t,this.colorModuleId=e,this.showColorPicker=!0},deleteModule(e){this.$q.dialog({title:"Confirm",message:"Delete this Module? The consequences of an error are grave.",ok:"Yes",cancel:"NO!!!"}).onOK(()=>{z.deleteModule(e,()=>{this.$q.notify("Deleted"),this.getTree()})}).onDismiss(()=>{this.$q.notify("Cancelled")})},getTree(){d.getModuleTree(e=>{console.log(e),this.tree=e})},saveModuleIcon(e,t){z.postModuleIcon(e,t,()=>{this.getTree()})},saveModuleName(e,t){z.postModuleName(e,t,()=>{this.getTree()})},newModule(){this.$q.dialog({title:"New Module",message:"Name?",prompt:{model:"",type:"text"},cancel:!0,color:"accent"}).onOk(e=>{z.postModule(e,()=>{this.getTree()})}).onDismiss(()=>{this.$q.notify("Cancelled")})},newPage(e){this.$q.dialog({title:"New Page",message:"Name?",prompt:{model:"",type:"text"},cancel:!0,color:"accent"}).onOk(t=>{console.log("ok"),z.postPage(e,t,()=>{this.getTree()})}).onDismiss(()=>{this.$q.notify("Cancelled")})},savePage(e,t){z.putPage(e,t,()=>{this.getTree()})},deletePage(e){this.$q.dialog({title:"Confirm",message:"Delete this Page? The consequences of an error are grave.",ok:"Yes",cancel:"NO!!!"}).onOk(()=>{z.deletePage(e,()=>{this.$q.notify("Deleted"),this.getTree()})}).onDismiss(()=>{this.$q.notify("Cancelled")})}},computed:ee(ee({},Object(F["c"])("user",["permissions"])),{},{test(){return console.log(this.showColorPicker),this.showColorPicker}}),watch:{ticked(){console.log(this.ticked)},role(){}},components:{colorPicker:X},created(){d.getRoles(e=>{this.roles=e}),this.getTree()}},oe=te,ae=(o("b84d"),o("8c42")),se=o("34ff"),le=o("d200"),ne=o("b693"),re=o("bc74"),ce=o("3aaf"),ie=Object(f["a"])(oe,E,A,!1,null,"75011780",null),de=ie.exports;v()(ie,"components",{QPage:ae["a"],QIcon:se["a"],QTree:g["a"],QPopupEdit:le["a"],QField:ne["a"],QInput:re["a"],QBtn:P["a"],QTooltip:ce["a"]});var ue=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:" row"},[o("div",{staticClass:"col-3 q-mr-md"},[o("q-list",{attrs:{dark:"",separator:""}},[o("q-item-label",{staticClass:"row q-pt-sm",staticStyle:{"border-bottom":"1px solid grey",height:"50px"},attrs:{header:""}},[o("span",{staticClass:"col"},[e._v("Roles")])]),e._l(e.roles,(function(t){return o("q-item",{key:t.value,class:{"bg-dark":t.value==e.role},nativeOn:{click:function(o){return e.clickRole(t.value,t.label)}}},[o("q-item-section",{staticClass:"capitalize",attrs:{label:t.label}}),o("q-item-side",{attrs:{right:""}},[o("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"more_vert"}},[o("q-menu",[o("q-list",{attrs:{link:""}},[o("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}]},[o("q-item-label",[e._v("Rename")])],1),o("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(o){return e.deleteRole(t.value)}}},[o("q-item-label",[e._v("Delete")])],1)],1)],1)],1)],1)],1)}))],2)],1),o("div",{staticClass:"col"},[o("q-btn-group",[o("q-btn",{attrs:{color:"dark",label:"users",icon:"timeline"}}),o("q-btn",{attrs:{color:"dark",icon:"visibility"}}),o("q-btn",{attrs:{color:"dark",icon:"update"}})],1),this.role?o("q-tabs",{staticClass:"hidden",attrs:{color:"grey-10","underline-color":"accent"}},[o("q-tab",{attrs:{slot:"title",default:"",iconx:"fal fa-users fa-sm",label:"Current",name:"current"},slot:"title"}),o("q-tab",{attrs:{slot:"title",label:"Add",iconx:"fal fa-plus fa-sm",exact:"",name:"add"},slot:"title"}),o("q-tab-panel",{attrs:{name:"current"}}),o("q-tab-panel",{attrs:{name:"add"}})],1):e._e()],1)])},me=[];function pe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function he(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(o),!0).forEach((function(t){B()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):pe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var fe={name:"ComponentAdminAccessRoles",props:{},data(){return{role:null,roleName:"",roles:[]}},methods:{clickRole(e,t){this.role=e,this.roleName=t},getRoles(e){d.getRoles(t=>{this.roles=t,e&&(this.role=e)})}},computed:he({},Object(F["c"])("user",["permissions"])),watch:{role(){d.getRoleUsers(this.role,e=>{this.roleUsers=e})},ticked(){d.putRolePages(this.role,this.ticked)}},components:{},created(){this.getRoles()}},ge=fe,be=(o("aa4d"),o("6c93")),ve=o("7d9a"),we=o("ac9b"),ke=o("66dc"),qe=o("6a2f"),ye=o("5be0"),Ce=o("4776"),Oe=o("dd08"),Re=o("1d98"),xe=Object(f["a"])(ge,ue,me,!1,null,"03444790",null),Pe=xe.exports;v()(xe,"components",{QPage:ae["a"],QList:be["a"],QItemLabel:ve["a"],QItem:we["a"],QItemSection:ke["a"],QBtn:P["a"],QMenu:qe["a"],QBtnGroup:ye["a"],QTabs:Ce["a"],QTab:Oe["a"],QTabPanel:Re["a"]});var De={name:"PageAdminAccess",data(){return{elements:[{name:"roles",label:"Roles",component:S,shortcut:"r"},{name:"structure",label:"Structure",component:de,shortcut:"s"},{name:"users",label:"Users",component:Pe,shortcut:"u"}]}},components:{toolbarPage:l["a"]},methods:{refresh(){}}},_e=De,Ie=Object(f["a"])(_e,a,s,!1,null,null,null);t["default"]=Ie.exports},f89c:function(e,t,o){}}]);