(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"5bad":function(t,e,s){"use strict";var a=s("f541"),r=s.n(a);r.a},"773c":function(t,e,s){},"8cbd":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getGlobalSubject?s("div",[s("year-bar",{staticClass:"yb-border"}),s("exam-bar"),s("div",{staticClass:"full-width bg-secondary",staticStyle:{height:"1px"}}),s("toolbar-page",{staticClass:"t-bar",attrs:{elements:t.elements,default:"classes"}})],1):t._e()},r=[],i=(s("e125"),s("4823"),s("2e73"),s("dde3"),s("76d0"),s("0c1f"),s("8e9e")),l=s.n(i),n=s("9ce4"),o=s("aba1"),c=s("89cf"),d=s("08e9"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loadingClasses}}),!t.loadingClasses&&t.show&&t.classes.length>0?s("div",{staticClass:"row no-wrap q-px-xs q-pt-xs text-left",staticStyle:{"padding-bottom":"200px"}},[s("div",{staticClass:"q-mr-md",staticStyle:{"min-width":"150px"}},[s("q-scroll-area",{staticStyle:{height:"80vh"}},[s("q-list",{staticClass:"no-padding"},t._l(t.classes,(function(e){return s("q-item",{key:e.id,staticClass:"q-pa-xs text-white bg-tertiary q-my-xs",class:e.id===t.selectedClassId?"active-class":"",staticStyle:{border:"1px solid grey"},attrs:{clickable:"",group:"classes",dense:""},on:{click:function(s){return t.setClass(e.id)}}},[s("q-item-section",{attrs:{top:""}},[s("q-item-label",{staticClass:"row"},[s("div",{staticClass:"col text-h7 text-boldx text-font q-mt-xs text-center"},[s("span",{staticClass:"q-mr-md"},[t._v(t._s(e.code))])])])],1)],1)})),1)],1)],1),s("div",{staticClass:"col"},[s("loading",{attrs:{loading:t.loading}}),t.loading?t._e():s("q-markup-table",{attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiaryx"},[s("th",{attrs:{colspan:"3"}}),t._l(t.teachers,(function(e){return s("th",{key:e.id,staticClass:"bg-tertiary text-center",attrs:{colspan:t.exams.length}},[t._v("\n              MLO - "+t._s(e.login)+"\n            ")])}))],2),s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Class")]),s("th",{staticClass:"text-left"},[t._v("Boarding")]),t._l(t.teachers,(function(e){return s("th",{key:e.id,attrs:{colspan:t.exams.length}},[s("table",{staticClass:"full-width no-border"},t._l(t.exams,(function(e){return s("th",{key:e.id,staticClass:"text-center no-border"},[t._v(t._s(e.examCode)+"\n                ")])})),0)])}))],2)]),s("tbody",t._l(t.students,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"text-left"},[t._v(t._s(e.fullName))]),s("td",{staticClass:"text-left"},[t._v(t._s(t.classCode))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.boardingHouse))]),t._l(t.teachers,(function(a){return s("td",{key:a.id,attrs:{colspan:t.exams.length}},[s("table",{staticClass:"full-width no-border"},t._l(t.exams,(function(r){return s("td",{key:r.id,staticClass:"text-center no-border"},[t._v(t._s(t.parseMLO(e,r,a)))])})),0)])}))],2)})),0)])],1)]):t._e()],1)},h=[],f=(s("288e"),s("7ba1")),p=s("268c"),m=s("10ac"),b={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,classes:[],selectedClassId:null,show:!1,exams:[],teachers:[],classCode:[],loading:!1,loadingClasses:!0}},methods:{processMetrics:function(t){this.exams=t.exams,this.teachers=t.teachers,this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.classCode=t.code,this.loading=!1},processClasses:function(t){this.classes=t,this.loadingClasses=!1,this.classes.length>0&&(this.show=!0,this.selectedClassId=this.classes[0].id,this.getClassMetrics())},getExamClasses:function(){this.loadingClasses=!0,p["a"].getExamClasses(this.processClasses,this.$errorFunction)},getMLO:function(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],f["a"].getYearMLO(this.process,this.$errorHandler,this.year,this.exam)},setClass:function(t){this.selectedClassId=t,this.getClassMetrics()},getClassMetrics:function(){this.loading=!0,this.selectedClassId&&f["a"].getClassMetrics(this.processMetrics,this.$errorHandler,this.selectedClassId)},parseMLO:function(t,e,s){var a=t.examData.mlo.find((function(t){return t.teacher.id===s.id&&t.examId===e.id}));return a.mlo?a.mlo:"."}},computed:{columns:function(){for(var t=[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"boarding",label:"Boarding",field:"boardingHouse",type:"string",align:"left",sortable:!0},{name:"mlo0",label:"MLO",field:"mlo0",type:"number",align:"left",sortable:!0}],e=1;e<this.maxMLOCount;e++){var s=e+1;t.push({name:"mlo"+e,label:"MLO "+s,field:"mlo"+e,type:"number",align:"left",sortable:!0,hidden:!1})}return t}},components:{Loading:m["a"]},created:function(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getExamClasses(),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getExamClasses),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getExamClasses),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getExamClasses)},beforeDestroy:function(){this.subjectWatch(),this.yearWatch(),this.examWatch()}},g=b,x=(s("df3b"),s("2be6")),y=s("e279"),v=s.n(y),C=s("26a8"),O=s("6c93"),M=s("ac9b"),_=s("66dc"),w=s("7d9a"),k=s("2e0b"),j=Object(x["a"])(g,u,h,!1,null,"1313da97",null),$=j.exports;v()(j,"components",{QScrollArea:C["a"],QList:O["a"],QItem:M["a"],QItemSection:_["a"],QItemLabel:w["a"],QMarkupTable:k["a"]});var L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loading}}),t.loading?t._e():s("q-splitter",{staticStyle:{height:"90vh"},scopedSlots:t._u([{key:"before",fn:function(){return[s("div",{staticClass:"q-pa-md"},[s("crud",{ref:"crud",attrs:{dataOverride:t.studentData,columns:t.columns,search:"",sortBy:"set",download:""}})],1)]},proxy:!0},{key:"after",fn:function(){return[s("div",{staticClass:"q-pa-md"},[s("q-bar",{staticClass:"full-width bg-tertiary text-font"},[t._v("MLO")]),s("profile-table",{attrs:{profile:t.subject.mloMaxGradeProfile,title:"Max"}}),s("profile-pie",{attrs:{profile:t.subject.mloMaxGradeProfile,title:"Max"}}),s("profile-table",{attrs:{profile:t.subject.mloMinGradeProfile,title:"Min"}}),s("profile-pie",{attrs:{profile:t.subject.mloMinGradeProfile,title:"Max"}})],1)]},proxy:!0}],null,!1,1610987909),model:{value:t.splitter,callback:function(e){t.splitter=e},expression:"splitter"}})],1)},S=[],q=s("d612"),P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-left"},[t._v(t._s(t.title))]),t._l(t.profile,(function(e){return s("th",{key:e.grade},[t._v("\n        "+t._s(e.grade)+"\n      ")])}))],2)]),s("tbody",[s("tr",[s("td",{staticClass:"text-left"},[t._v("All")]),t._l(t.profile,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s(e.count)+"\n      ")])}))],2),s("tr",[s("td",{staticClass:"text-left"},[t._v("Boys")]),t._l(t.profile,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s(e.countM)+"\n      ")])}))],2),s("tr",[s("td",{staticClass:"text-left"},[t._v("Girls")]),t._l(t.profile,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s(e.countF)+"\n      ")])}))],2)])])},D=[],E={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{}},watch:{},components:{},created:function(){}},F=E,G=Object(x["a"])(F,P,D,!1,null,"261ccf20",null),Y=G.exports;v()(G,"components",{QMarkupTable:k["a"]});var I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"pie"})])},N=[],A=s("915b"),H=s("3099"),B=s("d610");A["f"](B["a"]);var Q={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{pie:null}},methods:{createPie:function(){var t=this.profile;this.pie=A["c"](this.$refs.pie,H["h"]);var e=this.pie,s=e.series.push(new H["i"]);s.dataFields.value="count",s.dataFields.category="grade",e.innerRadius=A["e"](30),s.slices.template.stroke=A["b"]("#fff"),s.slices.template.strokeWidth=2,s.slices.template.strokeOpacity=1,s.slices.template.cursorOverStyle=[{property:"cursor",value:"pointer"}],s.alignLabels=!0,s.labels.template.bent=!0,s.labels.template.radius=3,s.labels.template.padding(0,0,0,0),s.ticks.template.disabled=!0;var a=s.slices.template.filters.push(new A["a"]);a.opacity=0;var r=s.slices.template.states.getKey("hover"),i=r.filters.push(new A["a"]);i.opacity=.7,i.blur=5,e.data=t}},watch:{},components:{},created:function(){},mounted:function(){this.createPie()},beforeDestroy:function(){this.pie.dispose()}},T=Q,W=Object(x["a"])(T,I,N,!1,null,"7ccab459",null),J=W.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"stacked",staticStyle:{height:"200px"}})])},z=[],K=(s("c880"),s("3903"));A["f"](K["a"]);var R={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{stacked:null,chart:null}},methods:{createStacked:function(){this.stacked&&this.stacked.dispose();var t=A["c"](this.$refs.stacked,H["l"]);t.colors.list=[A["b"]("#845EC2"),A["b"]("#D65DB1"),A["b"]("#FF6F91"),A["b"]("#FF9671"),A["b"]("#FFC75F"),A["b"]("#F9F871")],this.stacked=t,t.hiddenState.properties.opacity=0,t.colors.step=4,t.padding(10,10,10,10);var e=t.xAxes.push(new H["a"]);e.dataFields.category="type",e.renderer.grid.template.location=0,e.renderer.minGridDistance=50;var s=t.yAxes.push(new H["k"]);s.min=0,s.max=100,s.strictMinMax=!0,s.calculateTotals=!0,s.renderer.minWidth=50,t.data=this.stackData(),t.legend=new H["f"]},addStackSeries:function(t,e){var s=t.series.push(new H["c"]);s.sequencedInterpolation=!0,s.columns.template.width=A["e"](80),s.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",s.name=e,s.dataFields.categoryX="type",s.dataFields.valueY=e,s.dataFields.valueYShow="totalPercent",s.dataItems.template.locations.categoryX=.5,s.stacked=!0,s.tooltip.pointerOrientation="vertical"},stackData:function(){var t=this,e=[],s=[],a={},r={},i={};return this.profile.forEach((function(t){var s=t.grade;e.push(s),a.type="All",a[s]=t.count,r.type="Boys",r[s]=t.countM,i.type="Girls",i[s]=t.countF})),s.push(a),s.push(r),s.push(i),e.forEach((function(e){t.addStackSeries(t.stacked,e)})),s}},computed:{},watch:{},components:{},created:function(){},mounted:function(){this.createStacked()},beforeDestroy:function(){this.stacked.dispose()}},U=R,V=Object(x["a"])(U,X,z,!1,null,"d3552750",null),Z=V.exports,tt={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0}},methods:{process:function(t){this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.subject=t,this.loading=!1},getMLO:function(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,f["a"].getYearMLO(this.process,this.$errorFunction,this.year,this.exam)}},computed:{columns:function(){var t=[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"Min MLO",field:"mloMin",type:"string",align:"left",sortable:!0},{name:"mloMax",label:"Max MLO",field:"mloMax",type:"string",align:"left",sortable:!0}];return t},studentData:function(){var t=this,e=this.students.map((function(e){var s={id:e.id,displayName:e.displayName,classCode:e.classCode},a=e.exams.find((function(e){return e.id===t.exam}));return a&&(s.mloMin=a.mloMin,s.mloMax=a.mloMax),s}));return e}},watch:{},components:{Crud:q["a"],ProfileTable:Y,Loading:m["a"],ProfilePie:J,ProfileStack:Z},created:function(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getMLO(),this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getMLO),this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getMLO),this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getMLO)}},et=tt,st=(s("5bad"),s("bc4f")),at=s("5d16"),rt=Object(x["a"])(et,L,S,!1,null,"1d238ee3",null),it=rt.exports;function lt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function nt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(s),!0).forEach((function(e){l()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):lt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}v()(rt,"components",{QSplitter:st["a"],QBar:at["a"]});var ot={name:"Page.HOD.Metrics",data:function(){return{elements:[{name:"classes",label:"classes",component:$},{name:"mlo",label:"mlo",component:it}]}},computed:nt({},Object(n["c"])("user",["getGlobalSubject"])),methods:nt({},Object(n["d"])("hod",["setActiveYear"])),components:{toolbarPage:d["a"],YearBar:o["a"],ExamBar:c["a"]},created:function(){var t=this;this.setActiveYear(13),this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.setClass),this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.setClass)}},ct=ot,dt=(s("eb8b"),Object(x["a"])(ct,a,r,!1,null,null,null));e["default"]=dt.exports},df3b:function(t,e,s){"use strict";var a=s("773c"),r=s.n(a);r.a},eb8b:function(t,e,s){"use strict";var a=s("ef76"),r=s.n(a);r.a},ef76:function(t,e,s){},f541:function(t,e,s){}}]);