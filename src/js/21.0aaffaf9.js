(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"482c":function(t,e,a){"use strict";var n=a("83e6"),s=a.n(n);s.a},5422:function(t,e,a){"use strict";var n=a("6081"),s=a.n(n);s.a},6081:function(t,e,a){},"83e6":function(t,e,a){},f840:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("toolbar-page",{attrs:{elements:t.elements,default:"calendar"}})},s=[],r=a("08e9"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{},[a("div",{staticClass:"row fit",staticStyle:{height:"90vh"}},[a("div",{staticClass:"col fit",staticStyle:{height:"90vh"}},[a("Calendar",{key:t.calIndex,ref:"calendar",staticStyle:{"min-height":"90vh"},attrs:{"week-start":"1",year:t.year,"enable-range-selection":!0,"data-source":t.calendarData,sync:""},on:{"click-day":t.clickDay,"year-changed":t.changeYear}})],1),a("div",{staticClass:"col-3 q-ml-md"},t._l(t.terms,(function(e){return a("q-list",{key:e.id,staticClass:"rounded-borders q-mb-xs",attrs:{padding:"",bordered:""}},[a("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.name}},[a("q-card",[a("q-card-section",[a("q-toggle",{attrs:{label:"Publish","left-label":"",color:"accent","true-value":1,"false-value":0},model:{value:e.isPublished,callback:function(a){t.$set(e,"isPublished",a)},expression:"term.isPublished"}}),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col q-mr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.start,callback:function(a){t.$set(e,"start",a)},expression:"term.start"}}),a("q-input",{staticClass:"col q-pl-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.end,callback:function(a){t.$set(e,"end",a)},expression:"term.end"}})],1),a("p",{staticClass:"text-font full-width bg-tertiary q-mt-md q-pl-xs q-mb-none"},[t._v("Half Term")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col q-mr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.htStart,callback:function(a){t.$set(e,"htStart",a)},expression:"term.htStart"}}),a("q-input",{staticClass:"col q-ml-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.htEnd,callback:function(a){t.$set(e,"htEnd",a)},expression:"term.htEnd"}})],1),a("p",{staticClass:"text-font full-width bg-tertiary q-mt-md q-pl-xs q-mb-none"},[t._v("Exeat 1")]),a("div",{staticClass:"q-ml-md row"},[a("q-input",{staticClass:"col q-pr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.ex1Start,callback:function(a){t.$set(e,"ex1Start",a)},expression:"term.ex1Start"}}),a("q-input",{staticClass:"col q-ml-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.ex1End,callback:function(a){t.$set(e,"ex1End",a)},expression:"term.ex1End"}})],1),a("p",{staticClass:"text-font full-width bg-tertiary q-mt-md q-pl-xs q-mb-none"},[t._v("Exeat 2")]),a("div",{staticClass:"q-ml-md row"},[a("q-input",{staticClass:"col q-pr-xs",attrs:{color:"font",dense:"",label:"Start",mask:"##-##-#### ##:##"},model:{value:e.ex2Start,callback:function(a){t.$set(e,"ex2Start",a)},expression:"term.ex2Start"}}),a("q-input",{staticClass:"col q-ml-xs",attrs:{color:"font",dense:"",label:"End",mask:"##-##-#### ##:##"},model:{value:e.ex2End,callback:function(a){t.$set(e,"ex2End",a)},expression:"term.ex2End"}})],1)],1)],1)],1)],1)})),1)])])},o=[],c=(a("c880"),a("4fb0"),a("2cc0")),i=a.n(c),d=a("4778"),u={getTerms:function(t,e,a){d["a"].get("/admin/school/terms/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},putTerms:function(t,e,a){d["a"].put("/admin/school/terms",a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-btn",t._b({staticClass:"q-pr-xs"},"q-btn",t.$props,!1),[t.tooltip?a("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v("\n     "+t._s(t.tooltip)+"\n   ")]):t._e()],1)},p=[],f={name:"Component.Buttons.Basic",props:{success:{type:Function,required:!0},size:{type:String,default:"xs"},outline:{type:Boolean,default:!0},color:{type:String,default:"accent"},dense:{type:Boolean,default:!0},icon:{type:String,default:"fal fa-plus"},label:{type:String,default:""},title:{type:String,default:"New"},type:{type:String,default:""},tooltip:{type:String}},data:function(){return{name:""}},methods:{submit:function(){this.success(),this.$refs.popup.hide()}},computed:{},components:{},created:function(){}},h=f,x=(a("482c"),a("2be6")),b=a("e279"),D=a.n(b),k=a("2ef0"),q=a("3aaf"),v=Object(x["a"])(h,m,p,!1,null,"39aa0388",null),g=v.exports;D()(v,"components",{QBtn:k["a"],QTooltip:q["a"]});var S=a("134d"),y={name:"Component.Admin.School.Calendar",props:{},data:function(){return{terms:[],newModeOn:!0,calIndex:0,year:null,eventId:0}},methods:{clickDay:function(t,e){console.log(t)},changeYear:function(t){var e=t.currentYear;e!==this.year&&(this.year=e,u.getTerms(this.processTerms,this.$errorHandler,e))},processTerms:function(t){this.terms=t,this.$refs.calendar.sync=!0},makeDate:function(t){if(!t)return null;var e=t.split(" ")[0],a=e.split("-")[0],n=e.split("-")[1],s=e.split("-")[2];return new Date(s,n-1,a)}},computed:{calendarData:function(){var t=[],e=S["a"].getBrand("accent"),a=this;return this.terms.forEach((function(n,s){var r=n.isPublished?a.$hexPalette(s):S["a"].getBrand("font-secondary");t.push({name:n.name,startDate:a.makeDate(n.start),endDate:a.makeDate(n.end),color:r}),t.push({startDate:a.makeDate(n.htStart),endDate:a.makeDate(n.htEnd),color:e}),t.push({startDate:a.makeDate(n.htStart),endDate:a.makeDate(n.htEnd),color:e}),t.push({startDate:a.makeDate(n.htStart),endDate:a.makeDate(n.htEnd),color:e}),t.push({startDate:a.makeDate(n.ex1Start),endDate:a.makeDate(n.ex1End),color:e}),t.push({startDate:a.makeDate(n.ex1Start),endDate:a.makeDate(n.ex1End),color:e}),t.push({startDate:a.makeDate(n.ex1Start),endDate:a.makeDate(n.ex1End),color:e}),t.push({startDate:a.makeDate(n.ex2Start),endDate:a.makeDate(n.ex2End),color:e}),t.push({startDate:a.makeDate(n.ex2Start),endDate:a.makeDate(n.ex2End),color:e}),t.push({startDate:a.makeDate(n.ex2Start),endDate:a.makeDate(n.ex2End),color:e})})),this.$refs.calendar&&this.$refs.calendar.calendar.setDataSource(t),t}},components:{Calendar:i.a,BasicButton:g},watch:{terms:{deep:!0,handler:function(){u.putTerms((function(){}),this.$errorHandler,this.terms)}}},created:function(){}},E=y,C=(a("5422"),a("8c42")),w=a("6c93"),$=a("0f3b"),_=a("ebe6"),B=a("965d"),P=a("3d3c"),Q=a("bc74"),T=Object(x["a"])(E,l,o,!1,null,"48d6d5c6",null),I=T.exports;D()(T,"components",{QPage:C["a"],QList:w["a"],QExpansionItem:$["a"],QCard:_["a"],QCardSection:B["a"],QToggle:P["a"],QInput:Q["a"]});var O={name:"PageAdminSchool",data:function(){return{elements:[{name:"calendar",label:"calendar",component:I,shortcut:"c"}]}},components:{toolbarPage:r["a"]},methods:{refresh:function(){}}},j=O,H=Object(x["a"])(j,n,s,!1,null,null,null);e["default"]=H.exports}}]);