(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"08d3":function(e,t,a){"use strict";var s=a("4ce6"),i=a.n(s);i.a},"11ac":function(e,t,a){},"2fe4":function(e,t,a){},"4ce6":function(e,t,a){},"503e":function(e,t,a){},5370:function(e,t,a){},ada9:function(e,t,a){"use strict";var s=a("11ac"),i=a.n(s);i.a},d31e:function(e,t,a){"use strict";var s=a("5370"),i=a.n(s);i.a},f0d1:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.getGlobalSubject?a("div",[a("year-bar",{staticClass:"yb-border"}),a("exam-bar"),a("div",{staticClass:"full-width bg-secondary",staticStyle:{height:"1px"}}),a("toolbar-page",{staticClass:"t-bar",attrs:{elements:e.elements,default:"classes"}})],1):e._e()},i=[],r=(a("e125"),a("4823"),a("2e73"),a("dde3"),a("76d0"),a("0c1f"),a("8e9e")),n=a.n(r),l=a("9ce4"),o=a("aba1"),c=a("89cf"),d=a("08e9"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loading",{attrs:{loading:e.loadingClasses}}),!e.loadingClasses&&e.show&&e.classes.length>0?a("div",{staticClass:"row no-wrap q-px-xs q-pt-xs text-left",staticStyle:{"padding-bottom":"200px"}},[a("div",{staticClass:"q-mr-md",staticStyle:{"min-width":"150px"}},[a("q-scroll-area",{staticStyle:{height:"80vh"}},[a("q-list",{staticClass:"no-padding"},e._l(e.classes,(function(t){return a("q-item",{key:t.code,staticClass:"q-pa-xs text-white bg-tertiary q-my-xs",class:t.id===e.selectedClassId?"active-class":"",style:t.id===e.selectedClassId?"border: 2px solid black":"border: 1px solid grey",attrs:{clickable:"",group:"classes",dense:""},on:{click:function(a){return e.setClass(t.id)}}},[a("q-item-section",{attrs:{top:""}},[a("q-item-label",{staticClass:"row"},[a("div",{staticClass:"col text-h7 text-boldx text-font q-mt-xs text-center"},[a("span",{staticClass:"q-mr-md"},[e._v(e._s(t.code))])])])],1)],1)})),1)],1)],1),a("div",{staticClass:"col"},[a("loading",{attrs:{loading:e.loading}}),e.loading?e._e():a("q-markup-table",{attrs:{dense:"",flat:"",bordered:""}},[a("thead",{staticClass:"q-mb-md"},[a("tr",{staticClass:"bg-tertiaryx"},[a("th",{attrs:{colspan:"3"}}),e._l(e.teachers,(function(t){return a("th",{key:t.id,staticClass:"bg-tertiary text-center",attrs:{colspan:e.exams.length}},[e._v("\n              MLO - "+e._s(t.login)+"\n            ")])}))],2),a("tr",{staticClass:"bg-tertiary"},[a("th",{staticClass:"text-left"},[e._v("Name")]),a("th",{staticClass:"text-left"},[e._v("Class")]),a("th",{staticClass:"text-left"},[e._v("Boarding")]),e._l(e.teachers,(function(t){return a("th",{key:t.id,attrs:{colspan:e.exams.length}},[a("table",{staticClass:"full-width no-border"},e._l(e.exams,(function(t){return a("th",{key:t.id,staticClass:"text-center no-border"},[e._v(e._s(t.examCode)+"\n                ")])})),0)])}))],2)]),a("tbody",e._l(e.students,(function(t){return a("tr",{key:t.id},[a("td",{staticClass:"text-left"},[e._v(e._s(t.fullName))]),a("td",{staticClass:"text-left"},[e._v(e._s(e.classCode))]),a("td",{staticClass:"text-left"},[e._v(e._s(t.boardingHouse))]),e._l(e.teachers,(function(s){return a("td",{key:s.id,attrs:{colspan:e.exams.length}},[a("table",{staticClass:"full-width no-border"},e._l(e.exams,(function(i){return a("td",{key:i.id,staticClass:"text-center no-border"},[e._v(e._s(e.parseMLO(t,i,s)))])})),0)])}))],2)})),0)])],1)]):e._e()],1)},h=[],m=(a("288e"),a("4778")),f=a("452d"),g={getClassMetrics:function(e,t,a){var s=f["a"].getters["user/getGlobalSubject"];m["a"].get("/hod/"+s.id+"/metrics/class/"+a).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getYearMLO:function(e,t,a,s,i){var r=f["a"].getters["user/getGlobalSubject"];m["a"].get("/hod/"+r.id+"/metrics/year/"+a+"/MLO/"+s,{cancelToken:i}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getYearMetrics:function(e,t,a,s,i){var r=f["a"].getters["user/getGlobalSubject"];m["a"].get("/hod/"+r.id+"/metrics/year/"+a+"/metrics/"+s,{cancelToken:i}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getYearMetricsSpreadsheet:function(e,t,a,s,i){var r=f["a"].getters["user/getGlobalSubject"];m["a"].get("/hod/"+r.id+"/metrics/year/"+a+"/metrics/"+s+"/spreadsheet",{cancelToken:i}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getExamHistory:function(e,t,a,s){var i=f["a"].getters["user/getGlobalSubject"];m["a"].get("/hod/"+i.id+"/metrics/year/"+a+"/history/"+s).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}},p=a("268c"),b=a("10ac"),y={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,classes:[],selectedClassId:null,show:!1,exams:[],teachers:[],classCode:[],loading:!1,loadingClasses:!0}},methods:{processMetrics:function(e){this.exams=e.exams,this.teachers=e.teachers,this.students=e.students,this.maxMLOCount=e.maxMLOCount,this.classCode=e.code,this.loading=!1},processClasses:function(e){this.classes=e,this.loadingClasses=!1,this.classes.length>0&&(this.show=!0,this.selectedClassId=this.classes[0].id,this.getClassMetrics())},getExamClasses:function(){this.loadingClasses=!0,p["a"].getExamClasses(this.processClasses,this.$errorFunction)},getMLO:function(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],g.getYearMLO(this.process,this.$errorHandler,this.year,this.exam)},setClass:function(e){this.selectedClassId=e,this.getClassMetrics()},getClassMetrics:function(){this.loading=!0,this.selectedClassId&&g.getClassMetrics(this.processMetrics,this.$errorHandler,this.selectedClassId)},parseMLO:function(e,t,a){var s=e.examData.mlo.find((function(e){return e.teacher.id===a.id&&e.examId===t.id}));return s.mlo?s.mlo:"."}},computed:{columns:function(){for(var e=[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"boarding",label:"Boarding",field:"boardingHouse",type:"string",align:"left",sortable:!0},{name:"mlo0",label:"MLO",field:"mlo0",type:"number",align:"left",sortable:!0}],t=1;t<this.maxMLOCount;t++){var a=t+1;e.push({name:"mlo"+t,label:"MLO "+a,field:"mlo"+t,type:"number",align:"left",sortable:!0,hidden:!1})}return e}},components:{Loading:b["a"]},created:function(){var e=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getExamClasses(),this.subjectWatch=this.$store.watch((function(){return e.$store.getters["user/getGlobalSubject"]}),this.getExamClasses),this.yearWatch=this.$store.watch((function(){return e.$store.getters["hod/activeYear"]}),this.getExamClasses),this.examWatch=this.$store.watch((function(){return e.$store.getters["hod/activeExam"]}),this.getExamClasses)},beforeDestroy:function(){this.subjectWatch(),this.yearWatch(),this.examWatch()}},v=y,x=(a("f8a1"),a("2be6")),M=a("e279"),C=a.n(M),k=a("26a8"),_=a("6c93"),O=a("ac9b"),q=a("66dc"),j=a("7d9a"),S=a("2e0b"),L=Object(x["a"])(v,u,h,!1,null,"4386be92",null),w=L.exports;C()(L,"components",{QScrollArea:k["a"],QList:_["a"],QItem:O["a"],QItemSection:q["a"],QItemLabel:j["a"],QMarkupTable:S["a"]});var G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loading",{attrs:{loading:e.loading,channel:"hod.metrics.mlo"}}),e.loading?e._e():a("q-splitter",{staticStyle:{height:"90vh"},scopedSlots:e._u([{key:"before",fn:function(){return[a("div",{staticClass:"q-pa-md"},[a("crud",{ref:"crud",attrs:{dataOverride:e.studentData,columns:e.columns,search:"",sortBy:"set",download:""}})],1)]},proxy:!0},{key:"after",fn:function(){return[a("div",{staticClass:"q-pa-md"},[a("profile-table",{attrs:{profile:e.subject.mloMaxGradeProfile,title:e.subject.maxMLOCount>1?"Max":""}}),a("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[a("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[e._v("\n            Minimum MLO grade profile for all students and also including a gender breakdown\n          ")])],1),a("profile-pie",{attrs:{profile:e.subject.mloMaxGradeProfile}}),a("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[a("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[e._v("\n            Maximum MLO grade profile for all students.\n          ")])],1),e.subject.maxMLOCount>1?a("profile-table",{attrs:{profile:e.subject.mloMinGradeProfile,title:"Min"}}):e._e(),e.subject.maxMLOCount>1?a("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[a("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[e._v("\n            Maximum MLO grade profile for all students and also including a gender breakdown\n          ")])],1):e._e(),e.subject.maxMLOCount>1?a("profile-pie",{attrs:{profile:e.subject.mloMinGradeProfile,title:"Max"}}):e._e(),e.subject.maxMLOCount>1?a("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[a("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[e._v("\n            Minimum MLO grade profile for all students.\n          ")])],1):e._e()],1)]},proxy:!0}],null,!1,3716565943),model:{value:e.splitter,callback:function(t){e.splitter=t},expression:"splitter"}})],1)},$=[],D=a("d612"),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[a("thead",{staticClass:"q-mb-md"},[a("tr",{staticClass:"bg-tertiary"},[a("th",{staticClass:"text-left"},[e._v(e._s(e.title))]),e._l(e.ordered,(function(t){return a("th",{key:t.grade},[e._v("\n        "+e._s("GCSE Avg"!==t.grade?t.grade:"")+"\n      ")])}))],2)]),a("tbody",[a("tr",[a("td",{staticClass:"text-left"},[e._v("All")]),e._l(e.ordered,(function(t){return a("td",{key:t.grade,staticClass:"text-center"},[e._v("\n        "+e._s("GCSE Avg"!==t.grade?t.count:"")+"\n      ")])}))],2),a("tr",[a("td",{staticClass:"text-left"},[e._v("Boys")]),e._l(e.ordered,(function(t){return a("td",{key:t.grade,staticClass:"text-center"},[e._v("\n        "+e._s(t.countM)+"\n      ")])}))],2),a("tr",[a("td",{staticClass:"text-left"},[e._v("Girls")]),e._l(e.ordered,(function(t){return a("td",{key:t.grade,staticClass:"text-center"},[e._v("\n        "+e._s(t.countF)+"\n      ")])}))],2)])])},P=[],W=(a("4fb0"),{name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{}},computed:{ordered:function(){return parseInt(this.profile[0])<7?this.profile.split().reverse():this.profile}},watch:{},components:{},created:function(){}}),N=W,A=Object(x["a"])(N,E,P,!1,null,"b8218506",null),T=A.exports;C()(A,"components",{QMarkupTable:S["a"]});var F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"pie"})])},H=[],I=a("915b"),Y=a("3099"),B=a("d610");I["f"](B["a"]);var z={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{pie:null}},methods:{createPie:function(){var e=this.profileData;this.pie=I["c"](this.$refs.pie,Y["h"]);var t=this.pie,a=t.series.push(new Y["i"]);a.dataFields.value="count",a.dataFields.category="grade",t.innerRadius=I["e"](30),a.slices.template.stroke=I["b"]("#fff"),a.slices.template.strokeWidth=2,a.slices.template.strokeOpacity=1,a.slices.template.cursorOverStyle=[{property:"cursor",value:"pointer"}],a.alignLabels=!0,a.labels.template.bent=!0,a.labels.template.radius=3,a.labels.template.padding(0,0,0,0),a.ticks.template.disabled=!0;var s=a.slices.template.filters.push(new I["a"]);s.opacity=0;var i=a.slices.template.states.getKey("hover"),r=i.filters.push(new I["a"]);r.opacity=.7,r.blur=5,t.data=e}},computed:{profileData:function(){var e=[];return this.profile.forEach((function(t){"GCSE Avg"!==t.grade&&e.push(t)})),e}},watch:{},components:{},created:function(){},mounted:function(){this.createPie()},beforeDestroy:function(){this.pie.dispose()}},Q=z,R=Object(x["a"])(Q,F,H,!1,null,"4e711b94",null),K=R.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"stacked",staticStyle:{height:"200px"}})])},J=[],U=(a("c880"),a("3903"));I["f"](U["a"]);var V={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{stacked:null,chart:null}},methods:{createStacked:function(){this.stacked&&this.stacked.dispose();var e=I["c"](this.$refs.stacked,Y["l"]);e.colors.list=[I["b"]("#845EC2"),I["b"]("#D65DB1"),I["b"]("#FF6F91"),I["b"]("#FF9671"),I["b"]("#FFC75F"),I["b"]("#F9F871")],this.stacked=e,e.hiddenState.properties.opacity=0,e.colors.step=4,e.padding(10,10,10,10);var t=e.xAxes.push(new Y["a"]);t.dataFields.category="type",t.renderer.grid.template.location=0,t.renderer.minGridDistance=50;var a=e.yAxes.push(new Y["k"]);a.min=0,a.max=100,a.strictMinMax=!0,a.calculateTotals=!0,a.renderer.minWidth=50,e.data=this.stackData(),e.legend=new Y["f"]},addStackSeries:function(e,t){var a=e.series.push(new Y["c"]);a.sequencedInterpolation=!0,a.columns.template.width=I["e"](80),a.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",a.name=t,a.dataFields.categoryX="type",a.dataFields.valueY=t,a.dataFields.valueYShow="totalPercent",a.dataItems.template.locations.categoryX=.5,a.stacked=!0,a.tooltip.pointerOrientation="vertical"},stackData:function(){var e=this,t=[],a=[],s={},i={},r={};return this.profile.forEach((function(e){var a=e.grade;t.push(a),s.type="All",s[a]=e.count,i.type="Boys",i[a]=e.countM,r.type="Girls",r[a]=e.countF})),a.push(s),a.push(i),a.push(r),t.forEach((function(t){e.addStackSeries(e.stacked,t)})),a}},computed:{},watch:{},components:{},created:function(){},mounted:function(){this.createStacked()},beforeDestroy:function(){this.stacked.dispose()}},Z=V,ee=Object(x["a"])(Z,X,J,!1,null,"53fe8ee4",null),te=ee.exports,ae={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0}},methods:{process:function(e){this.students=e.students,this.maxMLOCount=e.maxMLOCount,this.subject=e,this.loading=!1},getMLO:function(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,g.getYearMLO(this.process,this.$errorFunction,this.year,this.exam)}},computed:{columns:function(){return this.subject.maxMLOCount>1?[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"Min MLO",field:"mloMin",type:"string",align:"left",sortable:!0},{name:"mloMax",label:"Max MLO",field:"mloMax",type:"string",align:"left",sortable:!0}]:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"MLO",field:"mloMin",type:"string",align:"left",sortable:!0}]},studentData:function(){var e=this,t=this.students.map((function(t){var a={id:t.id,displayName:t.displayName,classCode:t.classCode,schoolNumber:t.schoolNumber},s=t.exams.find((function(t){return t.id===e.exam}));return s&&(a.mloMin=s.mloMin,a.mloMax=s.mloMax),a}));return t}},watch:{},components:{Crud:D["a"],ProfileTable:T,Loading:b["a"],ProfilePie:K,ProfileStack:te},created:function(){var e=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getMLO(),this.subjectWatch=this.$store.watch((function(){return e.$store.getters["user/getGlobalSubject"]}),this.getMLO),this.yearWatch=this.$store.watch((function(){return e.$store.getters["hod/activeYear"]}),this.getMLO),this.examWatch=this.$store.watch((function(){return e.$store.getters["hod/activeExam"]}),this.getMLO)},beforeDestroy:function(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch(),this.examWatch&&this.examWatch()}},se=ae,ie=(a("ada9"),a("bc4f")),re=a("34ff"),ne=a("3aaf"),le=Object(x["a"])(se,G,$,!1,null,"176e1f66",null),oe=le.exports;C()(le,"components",{QSplitter:ie["a"],QIcon:re["a"],QTooltip:ne["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loading",{attrs:{loading:e.loading,channel:"hod.metrics.history"}}),e.loading?e._e():a("history-table",{key:e.componentKey,attrs:{history:e.subject.history,grades:e.subject.grades,bands:e.subject.bands,bandedHistory:e.subject.bandedHistory}}),e.loading?e._e():a("history-stack",{key:e.componentKey,ref:"stack",attrs:{id:"1",profile:e.subject.stackedHistory,grades:e.subject.grades}})],1)},de=[],ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{spread:"","no-caps":"",dense:"",outline:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:e.styles,year:"full-width"},model:{value:e.style,callback:function(t){e.style=t},expression:"style"}}),a("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{outline:"",spread:"","no-caps":"",dense:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:e.modes,year:"full-width"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1),"linear"===e.style?a("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[a("thead",{staticClass:"q-mb-md"},[a("tr",{staticClass:"bg-tertiary"},[a("th",{staticClass:"text-right"},[e._v(e._s("percentage"===e.mode?"%":"Abs"))]),e._l(e.grades,(function(t){return a("th",{key:t.grade},[e._v("\n          "+e._s(t.grade)+"\n          "),"GCSE Avg"===t.grade?a("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[a("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[e._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):e._e()],1)})),a("th")],2)]),a("tbody",e._l(e.history,(function(t){return a("tr",{key:t.year},[a("td",{staticClass:"text-right"},[e._v(e._s(t.year))]),e._l(e.grades,(function(s){return a("td",{key:s.grade,staticClass:"text-center"},[e._v("\n          "+e._s(e.getGrade(s.grade,t))+"\n        ")])})),a("td")],2)})),0)]):e._e(),"banded"===e.style?a("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[a("thead",{staticClass:"q-mb-md"},[a("tr",{staticClass:"bg-tertiary"},[a("th",{staticClass:"text-right"},[e._v(e._s("percentage"===e.mode?"%":"Abs"))]),e._l(e.bands,(function(t){return a("th",{key:t},[e._v("\n          "+e._s(t)+"\n          "),"GCSE Avg"===t?a("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[a("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[e._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):e._e()],1)})),a("th")],2)]),a("tbody",e._l(e.bandedHistory,(function(t){return a("tr",{key:t.year},[a("td",{staticClass:"text-right"},[e._v(e._s(t.year))]),e._l(e.bands,(function(s){return a("td",{key:s.bands,staticClass:"text-center"},[e._v("\n          "+e._s(e.getBandData(s,t))+"\n        ")])})),a("td",["Avg Last 3 Yrs"===t.year?a("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[a("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[e._v("\n              Last 3 (if available) year's grades are treated as a single cohort with the final absolute values divided by 3.\n            ")])],1):e._e()],1)],2)})),0)]):e._e()],1)},he=[],me={name:"HOD.Metrics.MLO.ProfileTable",props:{history:{type:Array,required:!0},bandedHistory:{type:Array,required:!0},grades:{type:Array,required:!0},bands:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{mode:"percentage",modes:[{value:"percentage",label:"Percentage"},{value:"absolute",label:"Absolute"}],style:"banded",styles:[{value:"banded",label:"Banded"},{value:"linear",label:"Linear"}]}},computed:{ordered:function(){return parseInt(this.profile[0])<7?this.profile.split().reverse():this.profile}},methods:{getGrade:function(e,t){var a=t.results.find((function(t){return t.grade===e}));return a?"absolute"===this.mode||"GCSE Avg"===e?a.count:a.pct:"-"},getBandData:function(e,t){var a=t.results.find((function(t){return t.band===e}));if(!a)return"-";var s="absolute"===this.mode?a.abs:a.pct;return 0===s?"":s}},watch:{},components:{},created:function(){}},fe=me,ge=a("6dd6"),pe=Object(x["a"])(fe,ue,he,!1,null,"5191f8cd",null),be=pe.exports;C()(pe,"components",{QBtnToggle:ge["a"],QMarkupTable:S["a"],QIcon:re["a"],QTooltip:ne["a"]});var ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"stacked",staticStyle:{height:"200px"}})])},ve=[];a("ce9c"),a("cf91"),a("d2b6");I["f"](U["a"]);var xe={name:"HOD.Metrics.MLO.HistoryStack",props:{profile:{type:Array,required:!0},grades:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{stacked:null,chart:null}},methods:{createStacked:function(){var e=I["c"](this.$refs.stacked,Y["l"]);this.stacked=e,e.hiddenState.properties.opacity=0,e.colors.step=4,e.padding(10,10,10,10);var t=e.xAxes.push(new Y["a"]);t.dataFields.category="year",t.renderer.grid.template.location=0,t.renderer.minGridDistance=50;var a=e.yAxes.push(new Y["k"]);a.min=0,a.max=100,a.strictMinMax=!0,a.calculateTotals=!0,a.renderer.minWidth=50,e.data=this.stackData()},addStackSeries:function(e,t){var a=e.series.push(new Y["c"]);a.sequencedInterpolation=!0,a.columns.template.width=I["e"](80),a.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",a.name=t,a.dataFields.categoryX="year",a.dataFields.valueY=t,a.dataFields.valueYShow="totalPercent",a.dataItems.template.locations.categoryX=.5,a.stacked=!0,a.tooltip.pointerOrientation="vertical";var s=this.getColor(t);a.fill=I["b"](s)},getColor:function(e){var t="";switch(e){case"9":case"D1":t="#FF00FF";break;case"D2":case"A*":case"8":t="#9900ff";break;case"D3":case"A":case"7":t="#0000ff";break;case"M1":case"B":case"6":t="#4a86e8";break;case"M2":case"C":case"5":t="#00ffff";break;case"M3":case"D":case"4":t="#00ff00";break;case"P1":case"E":case"3":t="#ffff00";break;case"P2":case"2":t="#ff9900";break;case"U":t="#ff0000";break;default:t="#980000"}return t},stackData:function(){var e=this;return this.grades.forEach((function(t){Number.isInteger(t.grade)||e.stacked.colors.reset(),"GCSE Avg"!==t.grade&&e.addStackSeries(e.stacked,t.grade)})),this.profile}},computed:{},watch:{},components:{},created:function(){},mounted:function(){this.createStacked()},beforeDestroy:function(){this.stacked.dispose()}},Me=xe,Ce=Object(x["a"])(Me,ye,ve,!1,null,"5e19ad04",null),ke=Ce.exports,_e=a("8206"),Oe=a.n(_e),qe={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0,request:null,componentKey:1}},methods:{process:function(e){e.year===this.year&&e.id===this.subject.id&&e.examId===this.exam&&(this.componentKey++,this.students=e.students,this.maxMLOCount=e.maxMLOCount,this.subject=e,this.loading=!1)},getHistory:function(){this.loading=!0,this.request&&this.request.cancel(),this.request=Oe.a.CancelToken.source(),this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.subject=this.$store.getters["user/getGlobalSubject"],g.getExamHistory(this.process,this.$errorFunction,this.year,this.exam,this.request)}},computed:{},watch:{},components:{HistoryTable:be,HistoryStack:ke,Loading:b["a"]},created:function(){var e=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getHistory(),this.subWatch=this.$store.watch((function(){return e.$store.getters["user/getGlobalSubject"]}),this.getHistory),this.yearWatch=this.$store.watch((function(){return e.$store.getters["hod/activeYear"]}),this.getHistory),this.examWatch=this.$store.watch((function(){return e.$store.getters["hod/activeExam"]}),this.getHistory)},beforeDestroy:function(){this.subWatch(),this.yearWatch(),this.examWatch()}},je=qe,Se=(a("f1e9"),Object(x["a"])(je,ce,de,!1,null,"7c11e2db",null)),Le=Se.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loading",{attrs:{loading:e.loading,channel:"hod.metrics.metrics"}}),e.loading?e._e():a("div",{staticClass:"q-pa-md"},[a("crud",{ref:"crud",attrs:{dataOverride:e.studentData,columns:e.columns,search:"",sortBy:e.getSortBy}},[a("div",{attrs:{slot:"top-bar-left"},slot:"top-bar-left"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{outline:"",color:"positive",icon:"fad fa-download"},on:{click:e.getSpreadSheet}})],1)])],1),a("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.controlsOpen,callback:function(t){e.controlsOpen=t},expression:"controlsOpen"}},[a("q-card",{staticClass:"bg-primary text-white"},[a("q-bar",[a("div",{staticClass:"text-h6"},[e._v("Weightings And Boundaries")]),a("q-space"),a("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!1}}},[e.maximizedToggle?a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Minimize")]):e._e()],1),a("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!0}}},[e.maximizedToggle?e._e():a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Maximize")])],1),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),a("q-card-section"),a("q-card-section",{staticClass:"q-pt-none"},[e._v("\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore.\n      ")])],1)],1)],1)},Ge=[],$e={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:100,loading:!0,metrics:!1,controlsOpen:!1,maximizedToggle:!1}},methods:{process:function(e){this.students=e.students,this.maxMLOCount=e.maxMLOCount,this.subject=e,this.metrics=e.metrics,this.loading=!1},getMetrics:function(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,g.getYearMetrics(this.process,this.$errorFunction,this.year,this.exam)},openControls:function(){},getSpreadSheet:function(){var e=this;this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,g.getYearMetricsSpreadsheet((function(t){e.loading=!1,e.$downloadBlob(t.url,t.file)}),(function(t){e.loading=!1}),this.year,this.exam)}},computed:{columns:function(){var e;return e=this.subject.maxMLOCount>1?[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"Min MLO",field:"mloMin",type:"string",align:"left",sortable:!0},{name:"mloMax",label:"Max MLO",field:"mloMax",type:"string",align:"left",sortable:!0}]:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!1},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"MLO",field:"mloMin",type:"string",align:"left",sortable:!0}],this.metrics.ALevelMock.length>0&&(e.push({name:"aLevelMockGrade",label:"U6 Mock",field:"aLevelMockGrade",type:"string",align:"left",sortable:!0}),e.push({name:"aLevelMockPercentage",label:"%",field:"aLevelMockPercentage",type:"string",align:"left",sortable:!0}),e.push({name:"aLevelMockRank",label:"Rank",field:"aLevelMockRank",type:"string",align:"left",sortable:!0})),this.metrics?(this.metrics.GCSE.length>0&&(e.push({name:"gcseGrade",label:"GCSE",field:"gcseGrade",type:"string",align:"left",sortable:!0}),e.push({name:"gcseGpa",label:"Gpa",field:"gcseGpa",type:"string",align:"left",sortable:!0})),this.subject.year<12&&(e.push({name:"gcseMockGrade",label:"GCSE Mock",field:"gcseMockGrade",type:"string",align:"left",sortable:!0}),e.push({name:"gcseMockPct",label:"%",field:"gcseMockPercentage",type:"string",align:"left",sortable:!0}),e.push({name:"gcseMockRank",label:"Rnk",field:"gcseMockRank",type:"string",align:"left",sortable:!0}),e.push({name:"gcseMockGpa",label:"Gpa",field:"gcseMockGpa",type:"string",align:"left",sortable:!0})),this.metrics.IGDR.length,this.subject.year>11?(e.push({name:"alisScore",label:"Alis",field:"alisBaseline",type:"string",align:"left",sortable:!0}),e.push({name:"alisPrediction",label:"Prediction",field:"alisPrediction",type:"string",align:"left",sortable:!0})):(e.push({name:"midyisScore",label:"Mdys",field:"midyisBaseline",type:"string",align:"left",sortable:!0}),e.push({name:"midyisPrediction",label:"Mdys Grade",field:"midyisPrediction",type:"string",align:"left",sortable:!0})),e):e},getSortBy:function(){return this.metrics&&this.metrics.ALevelMock.length>0?"aLevelMockRank":"set"},studentData:function(){var e=this,t=this.students.map((function(t){var a={id:t.id,displayName:t.displayName,classCode:t.classCode,schoolNumber:t.schoolNumber,midyisBaseline:t.midyisBaseline,midyisPrediction:t.midyisPrediction,alisPrediction:t.alisGcsePrediction,alisBaseline:t.alisGcseBaseline,gcseGpa:t.gcseGpa,gcseMockGpa:t.gcseMockGpa},s=t.exams.find((function(t){return t.id===e.exam}));if(s&&(a.mloMin=s.mloMin,a.mloMax=s.mloMax),!e.metrics)return a;var i=e.metrics.GCSEMock.find((function(e){return e.studentId===a.id}));i&&(a.gcseMockGrade=i.grade,a.gcseMockRank=i.cohortRank,a.gcseMockPercentage=i.percentage);var r=e.metrics.GCSE.find((function(e){return e.studentId===a.id}));r&&(a.gcseGrade=r.grade);var n=e.metrics.ALevelMock.find((function(e){return e.studentId===a.id}));n&&(a.aLevelMockGrade=n.grade,a.aLevelMockRank=n.cohortRank,a.aLevelMockPercentage=n.percentage);var l=e.metrics.IGDR.find((function(e){return e.studentId===a.id}));return l&&(a.gcseDelta=l.gcseDelta,a.IGDR=l.IGDR),a}));return t}},watch:{},components:{Crud:D["a"],Loading:b["a"]},created:function(){var e=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getMetrics(),this.subjectWatch=this.$store.watch((function(){return e.$store.getters["user/getGlobalSubject"]}),this.getMetrics),this.yearWatch=this.$store.watch((function(){return e.$store.getters["hod/activeYear"]}),this.getMetrics),this.examWatch=this.$store.watch((function(){return e.$store.getters["hod/activeExam"]}),this.getMetrics)},beforeDestroy:function(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch(),this.examWatch&&this.examWatch()}},De=$e,Ee=(a("08d3"),a("2ef0")),Pe=a("e81c"),We=a("ebe6"),Ne=a("5d16"),Ae=a("f962c"),Te=a("965d"),Fe=a("58c0"),He=Object(x["a"])(De,we,Ge,!1,null,"a92044fa",null),Ie=He.exports;function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}C()(He,"components",{QBtn:Ee["a"],QDialog:Pe["a"],QCard:We["a"],QBar:Ne["a"],QSpace:Ae["a"],QTooltip:ne["a"],QCardSection:Te["a"]}),C()(He,"directives",{ClosePopup:Fe["a"]});var ze={name:"Page.HOD.Metrics",data:function(){return{elements:[{name:"classes",label:"classes",component:w},{name:"mlo",label:"mlo",component:oe},{name:"history",label:"history",component:Le},{name:"metrics",label:"Metrics",component:Ie}]}},computed:Be({},Object(l["c"])("user",["getGlobalSubject"])),methods:Be({},Object(l["d"])("hod",["setActiveYear"])),components:{toolbarPage:d["a"],YearBar:o["a"],ExamBar:c["a"]},created:function(){var e=this;this.setActiveYear(13),this.subjectWatch=this.$store.watch((function(){return e.$store.getters["user/getGlobalSubject"]}),this.setClass),this.yearWatch=this.$store.watch((function(){return e.$store.getters["hod/activeYear"]}),this.setClass)},beforeDestroy:function(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch()}},Qe=ze,Re=(a("d31e"),Object(x["a"])(Qe,s,i,!1,null,null,null));t["default"]=Re.exports},f1e9:function(e,t,a){"use strict";var s=a("503e"),i=a.n(s);i.a},f8a1:function(e,t,a){"use strict";var s=a("2fe4"),i=a.n(s);i.a}}]);