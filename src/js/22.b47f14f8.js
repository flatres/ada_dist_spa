(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{1327:function(e,t,a){"use strict";var l=a("1894"),n=a.n(l);n.a},1894:function(e,t,a){},"2a8f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("toolbar-page",{attrs:{elements:e.elements}})},n=[],s=a("08e9"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,searchx:"",sortBy:"timestamp"}})],1)},o=[],i=a("d612"),c=a("4778"),d={getFiles(e,t){c["a"].get("/exams/admin/files").then(t=>{e(t.data)}).catch(e=>{e()})},getSessions(e,t){c["a"].get("/exams/admin/sessions").then(t=>{e(t.data)}).catch(e=>{e()})},getSession(e,t,a){c["a"].get("/exams/admin/session/"+a.id).then(t=>{e(t.data)}).catch(e=>{e()})},getAlevelSheet(e,t,a){c["a"].get("/exams/admin/alevelsheet/"+a.id).then(t=>{e(t.data)}).catch(e=>{e()})},getSubjects(e,t){c["a"].get("/exams/admin/subjects").then(t=>{e(t.data)}).catch(e=>{e()})},deleteAllCaches(e,t){c["a"].delete("/exams/admin/caches").then(t=>{e(t.data)}).catch(e=>{e()})},deleteCache(e,t,a){c["a"].delete("/exams/admin/cache/"+a).then(t=>{e(t.data)}).catch(e=>{e()})}},u={name:"ComponentExamsAdminFiles",data(){return{api:{get:d.getFiles},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"cycle",label:"Cycle",field:"intCycle",sortable:!0},{name:"timestamp",label:"Time Stamp",field:"txtImportDateTime",sortable:!0},{name:"file",label:"File",field:"txtFilePath",sortable:!0}]}},computed:{},components:{Crud:i["a"]},created(){}},h=u,m=(a("e803"),a("2be6")),b=Object(m["a"])(h,r,o,!1,null,"053a0723",null),f=b.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.consoleProgress<1?a("q-linear-progress",{staticClass:"q-my-sm",attrs:{value:e.consoleProgress,color:"primary",dark:""}}):e._e(),a("crud",{ref:"crud",attrs:{data:e.data,api:e.api,columns:e.columns,searchx:"",sortBy:"scode",indicator:"unknown"}})],1)},g=[],v=(a("e125"),a("4823"),a("2e73"),a("76d0"),a("8e9e")),y=a.n(v),C=a("9ce4");function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){y()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={name:"ComponentExamsAdminSubjects",data(){return{api:{get:d.getSubjects},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"scode",label:"code",field:"subjectCode",sortable:!0},{name:"sname",label:"name",field:"subjectName",sortable:!0},{name:"title",label:"title",field:"title",sortable:!0},{name:"level",label:"level",field:"level",sortable:!0},{name:"sboard",label:"board",field:"boardName",sortable:!0},{name:"results",label:"results",field:"resultCount",sortable:!0}]}},computed:j(j({},Object(C["c"])("sockets",["progress"])),{},{consoleProgress(){return this.progress("Exams.Admin.Subjects")/100}}),components:{Crud:i["a"]},created(){}},S=x,A=(a("1327"),a("4f61")),P=a("e279"),E=a.n(P),q=Object(m["a"])(S,p,g,!1,null,"064540ec",null),w=q.exports;E()(q,"components",{QLinearProgress:A["a"]});var D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("q-btn",{staticClass:"q-mr-lg",attrs:{outline:"",color:"tertiary","text-color":"font",label:"Fetch All",disabled:e.running},on:{click:e.fetchAll}}),a("q-btn",{staticClass:"q-mr-lg",attrs:{outline:"",color:"tertiary","text-color":"font",label:"Fetch A Level",disabled:e.running},on:{click:e.fetchALevel}}),a("q-btn",{staticClass:"q-mr-lg",attrs:{outline:"",color:"tertiary","text-color":"font",label:"Fetch GSCE",disabled:e.running},on:{click:e.fetchGCSE}}),a("q-btn",{attrs:{dense:"",color:"red","text-color":"black",label:"Delete All",disabled:e.running},on:{click:e.deleteAll}})],1),a("crud",{ref:"crud",attrs:{data:e.data,actions:e.actions,api:e.api,columns:e.columns,searchx:"",sortBy:"intFormatYear",indicator:"intActive"},on:{gcse:e.gcse,alevel:e.alevel,alevelsheet:e.alevelSheet,both:e.both,deleteBoth:e.deleteBoth}}),e.console?a("div",[a("h1",[e._v(e._s(e.currentYear)+"....")]),a("console-component",{staticStyle:{"min-height":"400px"}})],1):e._e()],1)},F=[],k=a("de53"),Y=a("dd14");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){y()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={name:"ComponentExamsAdminSessions",data(){return{api:{get:d.getSessions},queue:[],currentYear:"",console:!1,running:!1,columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"year",label:"Year",field:"intFormatYear"},{name:"month",label:"Month",field:"month"},{name:"files",label:"Files",field:"files"},{name:"gcseCache",label:"GCSE Cache",color:"red",truncate:!1,sortable:!0,colors:[{label:"cached",color:"green",textColor:"black"},{label:"none",color:"red",textColor:"black"}],field:"gcseCache",type:"badges",align:"left"},{name:"gcsetime",label:"",field:"gcseCacheTime"},{name:"alevelCache",label:"A Level Cache",color:"red",truncate:!1,sortable:!0,colors:[{label:"cached",color:"green",textColor:"black"},{label:"none",color:"red",textColor:"black"}],field:"alevelCache",type:"badges",align:"left"},{name:"aleveltime",label:"",field:"alevelCacheTime"}],actions:[{title:"Run GCSE",event:"gcse",icon:"fal fa-sort-numeric-up"},{title:"Run A Level",event:"alevel",icon:"fal fa-sort-shapes-up"},{title:"A LevelSpreadsheet",event:"alevelsheet",icon:"fal fa-file-spreadsheet"},{title:"Run All",event:"both",icon:"fal fa-share-all"},{title:"Delete Both",event:"deleteBoth",icon:"fal fa-trash"}]}},computed:{},methods:$($({},Object(C["b"])("sockets",["clearConsoleLog"])),{},{alevelSheet(e){d.getAlevelSheet(e=>{console.log(e)},null,{id:e.id})},deleteBoth(e){d.deleteCache(()=>{this.$refs.crud.get(e.id)},null,e.id)},gcse(e){this.queue.push({level:"gcse",sessionID:e.id,year:e.intFormatYear}),this.run()},alevel(e){this.queue.push({level:"alevel",sessionID:e.id,year:e.intFormatYear}),this.run()},both(e){this.queue.push({level:"alevel",sessionID:e.id,year:e.intFormatYear}),this.queue.push({level:"gcse",sessionID:e.id,year:e.intFormatYear}),this.run()},run(){if(this.queue.length>0){this.clearConsoleLog(),this.running=!0,this.console=!0;var e=this.queue.pop();this.currentYear=e.year,k["a"].getSession(t=>{this.$refs.crud.get(e.sessionID),console.log(t.data.statistics),this.run()},this.run,e)}else this.console=!1,this.running=!1,this.currentYear=""},fetchAll(){var e=this.$refs.crud.data;e.forEach(e=>{this.queue.push({level:"gcse",sessionID:e.id,year:e.intFormatYear}),this.queue.push({level:"alevel",sessionID:e.id,year:e.intFormatYear})}),this.run()},fetchGCSE(){var e=this.$refs.crud.data;e.forEach(e=>{this.queue.push({level:"gcse",sessionID:e.id,year:e.intFormatYear})}),this.run()},fetchALevel(){var e=this.$refs.crud.data;e.forEach(e=>{this.queue.push({level:"alevel",sessionID:e.id,year:e.intFormatYear})}),this.run()},deleteAll(){d.deleteAllCaches(()=>{this.$refs.crud.get()},()=>{this.$refs.crud.get()})}}),components:{Crud:i["a"],ConsoleComponent:Y["a"]},created(){}},B=I,L=(a("f19b"),a("2ef0")),G=Object(m["a"])(B,D,F,!1,null,"54eb25ca",null),T=G.exports;E()(G,"components",{QBtn:L["a"]});var R={name:"PageExamsAdmin",data(){return{elements:[{name:"files",label:"files",component:f},{name:"subjects",label:"subjects",component:w},{name:"sessions",label:"sessions",component:T}]}},components:{toolbarPage:s["a"]}},J=R,N=Object(m["a"])(J,l,n,!1,null,null,null);t["default"]=N.exports},"3f41":function(e,t,a){},e803:function(e,t,a){"use strict";var l=a("3f41"),n=a.n(l);n.a},efbd:function(e,t,a){},f19b:function(e,t,a){"use strict";var l=a("efbd"),n=a.n(l);n.a}}]);