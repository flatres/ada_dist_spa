(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"11ac":function(t,e,s){},1900:function(t,e,s){"use strict";var a=s("606a"),r=s.n(a);r.a},"34b8":function(t,e,s){},"3f76":function(t,e,s){"use strict";var a=s("34b8"),r=s.n(a);r.a},"503e":function(t,e,s){},5370:function(t,e,s){},"606a":function(t,e,s){},ada9:function(t,e,s){"use strict";var a=s("11ac"),r=s.n(a);r.a},d31e:function(t,e,s){"use strict";var a=s("5370"),r=s.n(a);r.a},f0d1:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getGlobalSubject?s("div",[s("year-bar",{staticClass:"yb-border"}),s("exam-bar"),s("div",{staticClass:"full-width bg-secondary",staticStyle:{height:"1px"}}),s("toolbar-page",{staticClass:"t-bar",attrs:{elements:t.elements,default:"classes"}})],1):t._e()},r=[],n=(s("e125"),s("4823"),s("2e73"),s("dde3"),s("76d0"),s("0c1f"),s("8e9e")),i=s.n(n),o=s("9ce4"),l=s("aba1"),c=s("89cf"),d=s("08e9"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loadingClasses}}),!t.loadingClasses&&t.show&&t.classes.length>0?s("div",{staticClass:"row no-wrap q-px-xs q-pt-xs text-left",staticStyle:{"padding-bottom":"200px"}},[s("div",{staticClass:"q-mr-md",staticStyle:{"min-width":"150px"}},[s("q-scroll-area",{staticStyle:{height:"80vh"}},[s("q-list",{staticClass:"no-padding"},t._l(t.classes,(function(e){return s("q-item",{key:e.code,staticClass:"q-pa-xs text-white bg-tertiary q-my-xs",class:e.id===t.selectedClassId?"active-class":"",staticStyle:{border:"1px solid grey"},attrs:{clickable:"",group:"classes",dense:""},on:{click:function(s){return t.setClass(e.id)}}},[s("q-item-section",{attrs:{top:""}},[s("q-item-label",{staticClass:"row"},[s("div",{staticClass:"col text-h7 text-boldx text-font q-mt-xs text-center"},[s("span",{staticClass:"q-mr-md"},[t._v(t._s(e.code))])])])],1)],1)})),1)],1)],1),s("div",{staticClass:"col"},[s("loading",{attrs:{loading:t.loading}}),t.loading?t._e():s("q-markup-table",{attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiaryx"},[s("th",{attrs:{colspan:"3"}}),t._l(t.teachers,(function(e){return s("th",{key:e.id,staticClass:"bg-tertiary text-center",attrs:{colspan:t.exams.length}},[t._v("\n              MLO - "+t._s(e.login)+"\n            ")])}))],2),s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Class")]),s("th",{staticClass:"text-left"},[t._v("Boarding")]),t._l(t.teachers,(function(e){return s("th",{key:e.id,attrs:{colspan:t.exams.length}},[s("table",{staticClass:"full-width no-border"},t._l(t.exams,(function(e){return s("th",{key:e.id,staticClass:"text-center no-border"},[t._v(t._s(e.examCode)+"\n                ")])})),0)])}))],2)]),s("tbody",t._l(t.students,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"text-left"},[t._v(t._s(e.fullName))]),s("td",{staticClass:"text-left"},[t._v(t._s(t.classCode))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.boardingHouse))]),t._l(t.teachers,(function(a){return s("td",{key:a.id,attrs:{colspan:t.exams.length}},[s("table",{staticClass:"full-width no-border"},t._l(t.exams,(function(r){return s("td",{key:r.id,staticClass:"text-center no-border"},[t._v(t._s(t.parseMLO(e,r,a)))])})),0)])}))],2)})),0)])],1)]):t._e()],1)},h=[],f=(s("288e"),s("4778")),m=s("452d"),p={getYearMetrics:function(t,e,s){var a=m["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+a.id+"/metrics/year/"+s).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getClassMetrics:function(t,e,s){var a=m["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+a.id+"/metrics/class/"+s).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getYearMLO:function(t,e,s,a,r){var n=m["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+n.id+"/metrics/year/"+s+"/MLO/"+a,{cancelToken:r}).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))},getExamHistory:function(t,e,s,a){var r=m["a"].getters["user/getGlobalSubject"];f["a"].get("/hod/"+r.id+"/metrics/year/"+s+"/history/"+a).then((function(e){t(e.data)})).catch((function(t){console.log(t)}))}},g=s("268c"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loading?s("div",[s("div",{staticClass:"flex flex-center col"},[s("div",{staticClass:"row text-center full-width"},[s("div",{staticClass:"col text-center cssload-wrap"},[t.minor?s("q-spinner-gears",{attrs:{color:"font-secondary",size:"6em"}}):t._e(),s("br"),t.channel?s("q-linear-progress",{staticClass:"q-mt-lg",staticStyle:{"max-width":"300px",margin:"20px auto"},attrs:{size:"sm",value:t.syncProgress,color:"font-secondary",label:"Change Model"}}):t._e()],1),t.minor?t._e():s("div",{staticClass:"cssload-wrap"},[s("div",{staticClass:"cssload-circle"}),s("div",{staticClass:"cssload-circle"}),t._m(0),s("div",{staticClass:"cssload-circle"}),s("div",{staticClass:"cssload-circle"}),s("div",{staticClass:"cssload-circle"})])])])]):t._e()},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"full-width full-height flex flex-centre"},[s("img",{staticClass:"q-ml-sm",staticStyle:{margin:"auto"},attrs:{width:"20px",height:"20px",src:"/statics/icons/plain.svg"}})])}];function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function x(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(Object(s),!0).forEach((function(e){i()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var C={name:"ComponentLoading",props:{loading:{default:!1,type:Boolean},minor:{default:!0,type:Boolean},channel:{default:!1}},data:function(){return{mounted:0}},methods:{},computed:x(x({},Object(o["c"])("sockets",["progress"])),{},{syncProgress:function(){return this.mounted?this.progress(this.channel):0}}),components:{},created:function(){},mounted:function(){this.mounted=!0}},_=C,O=(s("3f76"),s("2be6")),M=s("e279"),k=s.n(M),j=s("d1dc"),w=s("4f61"),q=s("b693"),S=Object(O["a"])(_,b,y,!1,null,null,null),L=S.exports;k()(S,"components",{QSpinnerGears:j["a"],QLinearProgress:w["a"],QField:q["a"]});var $={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,classes:[],selectedClassId:null,show:!1,exams:[],teachers:[],classCode:[],loading:!1,loadingClasses:!0}},methods:{processMetrics:function(t){this.exams=t.exams,this.teachers=t.teachers,this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.classCode=t.code,this.loading=!1},processClasses:function(t){this.classes=t,this.loadingClasses=!1,this.classes.length>0&&(this.show=!0,this.selectedClassId=this.classes[0].id,this.getClassMetrics())},getExamClasses:function(){this.loadingClasses=!0,g["a"].getExamClasses(this.processClasses,this.$errorFunction)},getMLO:function(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],p.getYearMLO(this.process,this.$errorHandler,this.year,this.exam)},setClass:function(t){this.selectedClassId=t,this.getClassMetrics()},getClassMetrics:function(){this.loading=!0,this.selectedClassId&&p.getClassMetrics(this.processMetrics,this.$errorHandler,this.selectedClassId)},parseMLO:function(t,e,s){var a=t.examData.mlo.find((function(t){return t.teacher.id===s.id&&t.examId===e.id}));return a.mlo?a.mlo:"."}},computed:{columns:function(){for(var t=[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"boarding",label:"Boarding",field:"boardingHouse",type:"string",align:"left",sortable:!0},{name:"mlo0",label:"MLO",field:"mlo0",type:"number",align:"left",sortable:!0}],e=1;e<this.maxMLOCount;e++){var s=e+1;t.push({name:"mlo"+e,label:"MLO "+s,field:"mlo"+e,type:"number",align:"left",sortable:!0,hidden:!1})}return t}},components:{Loading:L},created:function(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getExamClasses(),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getExamClasses),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getExamClasses),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getExamClasses)},beforeDestroy:function(){this.subjectWatch(),this.yearWatch(),this.examWatch()}},D=$,E=(s("1900"),s("26a8")),P=s("6c93"),G=s("ac9b"),A=s("66dc"),F=s("7d9a"),W=s("2e0b"),H=Object(O["a"])(D,u,h,!1,null,"381f390a",null),N=H.exports;k()(H,"components",{QScrollArea:E["a"],QList:P["a"],QItem:G["a"],QItemSection:A["a"],QItemLabel:F["a"],QMarkupTable:W["a"]});var Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loading,channel:"hod.metrics.mlo"}}),t.loading?t._e():s("q-splitter",{staticStyle:{height:"90vh"},scopedSlots:t._u([{key:"before",fn:function(){return[s("div",{staticClass:"q-pa-md"},[s("crud",{ref:"crud",attrs:{dataOverride:t.studentData,columns:t.columns,search:"",sortBy:"set",download:""}})],1)]},proxy:!0},{key:"after",fn:function(){return[s("div",{staticClass:"q-pa-md"},[s("profile-table",{attrs:{profile:t.subject.mloMaxGradeProfile,title:t.subject.maxMLOCount>1?"Max":""}}),s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Minimum MLO grade profile for all students and also including a gender breakdown\n          ")])],1),s("profile-pie",{attrs:{profile:t.subject.mloMaxGradeProfile}}),s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Maximum MLO grade profile for all students.\n          ")])],1),t.subject.maxMLOCount>1?s("profile-table",{attrs:{profile:t.subject.mloMinGradeProfile,title:"Min"}}):t._e(),t.subject.maxMLOCount>1?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Maximum MLO grade profile for all students and also including a gender breakdown\n          ")])],1):t._e(),t.subject.maxMLOCount>1?s("profile-pie",{attrs:{profile:t.subject.mloMinGradeProfile,title:"Max"}}):t._e(),t.subject.maxMLOCount>1?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n            Minimum MLO grade profile for all students.\n          ")])],1):t._e()],1)]},proxy:!0}],null,!1,3716565943),model:{value:t.splitter,callback:function(e){t.splitter=e},expression:"splitter"}})],1)},I=[],T=s("d612"),Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-left"},[t._v(t._s(t.title))]),t._l(t.ordered,(function(e){return s("th",{key:e.grade},[t._v("\n        "+t._s("GCSE Avg"!==e.grade?e.grade:"")+"\n      ")])}))],2)]),s("tbody",[s("tr",[s("td",{staticClass:"text-left"},[t._v("All")]),t._l(t.ordered,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s("GCSE Avg"!==e.grade?e.count:"")+"\n      ")])}))],2),s("tr",[s("td",{staticClass:"text-left"},[t._v("Boys")]),t._l(t.ordered,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s(e.countM)+"\n      ")])}))],2),s("tr",[s("td",{staticClass:"text-left"},[t._v("Girls")]),t._l(t.ordered,(function(e){return s("td",{key:e.grade,staticClass:"text-center"},[t._v("\n        "+t._s(e.countF)+"\n      ")])}))],2)])])},B=[],z=(s("4fb0"),{name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{}},computed:{ordered:function(){return parseInt(this.profile[0])<7?this.profile.split().reverse():this.profile}},watch:{},components:{},created:function(){}}),K=z,X=Object(O["a"])(K,Q,B,!1,null,"b8218506",null),J=X.exports;k()(X,"components",{QMarkupTable:W["a"]});var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"pie"})])},U=[],V=s("915b"),Z=s("3099"),tt=s("d610");V["f"](tt["a"]);var et={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{pie:null}},methods:{createPie:function(){var t=this.profileData;this.pie=V["c"](this.$refs.pie,Z["h"]);var e=this.pie,s=e.series.push(new Z["i"]);s.dataFields.value="count",s.dataFields.category="grade",e.innerRadius=V["e"](30),s.slices.template.stroke=V["b"]("#fff"),s.slices.template.strokeWidth=2,s.slices.template.strokeOpacity=1,s.slices.template.cursorOverStyle=[{property:"cursor",value:"pointer"}],s.alignLabels=!0,s.labels.template.bent=!0,s.labels.template.radius=3,s.labels.template.padding(0,0,0,0),s.ticks.template.disabled=!0;var a=s.slices.template.filters.push(new V["a"]);a.opacity=0;var r=s.slices.template.states.getKey("hover"),n=r.filters.push(new V["a"]);n.opacity=.7,n.blur=5,e.data=t}},computed:{profileData:function(){var t=[];return this.profile.forEach((function(e){"GCSE Avg"!==e.grade&&t.push(e)})),t}},watch:{},components:{},created:function(){},mounted:function(){this.createPie()},beforeDestroy:function(){this.pie.dispose()}},st=et,at=Object(O["a"])(st,R,U,!1,null,"4e711b94",null),rt=at.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"stacked",staticStyle:{height:"200px"}})])},it=[],ot=(s("c880"),s("3903"));V["f"](ot["a"]);var lt={name:"HOD.Metrics.MLO.ProfileTable",props:{profile:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{stacked:null,chart:null}},methods:{createStacked:function(){this.stacked&&this.stacked.dispose();var t=V["c"](this.$refs.stacked,Z["l"]);t.colors.list=[V["b"]("#845EC2"),V["b"]("#D65DB1"),V["b"]("#FF6F91"),V["b"]("#FF9671"),V["b"]("#FFC75F"),V["b"]("#F9F871")],this.stacked=t,t.hiddenState.properties.opacity=0,t.colors.step=4,t.padding(10,10,10,10);var e=t.xAxes.push(new Z["a"]);e.dataFields.category="type",e.renderer.grid.template.location=0,e.renderer.minGridDistance=50;var s=t.yAxes.push(new Z["k"]);s.min=0,s.max=100,s.strictMinMax=!0,s.calculateTotals=!0,s.renderer.minWidth=50,t.data=this.stackData(),t.legend=new Z["f"]},addStackSeries:function(t,e){var s=t.series.push(new Z["c"]);s.sequencedInterpolation=!0,s.columns.template.width=V["e"](80),s.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",s.name=e,s.dataFields.categoryX="type",s.dataFields.valueY=e,s.dataFields.valueYShow="totalPercent",s.dataItems.template.locations.categoryX=.5,s.stacked=!0,s.tooltip.pointerOrientation="vertical"},stackData:function(){var t=this,e=[],s=[],a={},r={},n={};return this.profile.forEach((function(t){var s=t.grade;e.push(s),a.type="All",a[s]=t.count,r.type="Boys",r[s]=t.countM,n.type="Girls",n[s]=t.countF})),s.push(a),s.push(r),s.push(n),e.forEach((function(e){t.addStackSeries(t.stacked,e)})),s}},computed:{},watch:{},components:{},created:function(){},mounted:function(){this.createStacked()},beforeDestroy:function(){this.stacked.dispose()}},ct=lt,dt=Object(O["a"])(ct,nt,it,!1,null,"53fe8ee4",null),ut=dt.exports,ht={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0}},methods:{process:function(t){this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.subject=t,this.loading=!1},getMLO:function(){this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.loading=!0,p.getYearMLO(this.process,this.$errorFunction,this.year,this.exam)}},computed:{columns:function(){return this.subject.maxMLOCount>1?[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"Min MLO",field:"mloMin",type:"string",align:"left",sortable:!0},{name:"mloMax",label:"Max MLO",field:"mloMax",type:"string",align:"left",sortable:!0}]:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"schNumber",label:"Sch. #",field:"schoolNumber",type:"string",align:"left",sortable:!0},{name:"set",label:"Class",field:"classCode",type:"string",align:"left",sortable:!0},{name:"mloMin",label:"MLO",field:"mloMin",type:"string",align:"left",sortable:!0}]},studentData:function(){var t=this,e=this.students.map((function(e){var s={id:e.id,displayName:e.displayName,classCode:e.classCode,schoolNumber:e.schoolNumber},a=e.exams.find((function(e){return e.id===t.exam}));return a&&(s.mloMin=a.mloMin,s.mloMax=a.mloMax),s}));return e}},watch:{},components:{Crud:T["a"],ProfileTable:J,Loading:L,ProfilePie:rt,ProfileStack:ut},created:function(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getMLO(),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getMLO),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getMLO),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getMLO)},beforeDestroy:function(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch(),this.examWatch&&this.examWatch()}},ft=ht,mt=(s("ada9"),s("bc4f")),pt=s("34ff"),gt=s("3aaf"),bt=Object(O["a"])(ft,Y,I,!1,null,"176e1f66",null),yt=bt.exports;k()(bt,"components",{QSplitter:mt["a"],QIcon:pt["a"],QTooltip:gt["a"]});var vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{loading:t.loading,channel:"hod.metrics.history"}}),t.loading?t._e():s("history-table",{key:t.componentKey,attrs:{history:t.subject.history,grades:t.subject.grades,bands:t.subject.bands,bandedHistory:t.subject.bandedHistory}}),t.loading?t._e():s("history-stack",{key:t.componentKey,ref:"stack",attrs:{id:"1",profile:t.subject.stackedHistory,grades:t.subject.grades}})],1)},xt=[],Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{spread:"","no-caps":"",dense:"",outline:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:t.styles,year:"full-width"},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}}),s("q-btn-toggle",{staticClass:"col q-ml-xs",attrs:{outline:"",spread:"","no-caps":"",dense:"","toggle-color":"tertiary",color:"secondary","text-color":"font-secondary","toggle-text-color":"accent",options:t.modes,year:"full-width"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1),"linear"===t.style?s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-right"},[t._v(t._s("percentage"===t.mode?"%":"Abs"))]),t._l(t.grades,(function(e){return s("th",{key:e.grade},[t._v("\n          "+t._s(e.grade)+"\n          "),"GCSE Avg"===e.grade?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):t._e()],1)})),s("th")],2)]),s("tbody",t._l(t.history,(function(e){return s("tr",{key:e.year},[s("td",{staticClass:"text-right"},[t._v(t._s(e.year))]),t._l(t.grades,(function(a){return s("td",{key:a.grade,staticClass:"text-center"},[t._v("\n          "+t._s(t.getGrade(a.grade,e))+"\n        ")])})),s("td")],2)})),0)]):t._e(),"banded"===t.style?s("q-markup-table",{staticClass:"q-mt-xs q-my-md",attrs:{dense:"",flat:"",bordered:""}},[s("thead",{staticClass:"q-mb-md"},[s("tr",{staticClass:"bg-tertiary"},[s("th",{staticClass:"text-right"},[t._v(t._s("percentage"===t.mode?"%":"Abs"))]),t._l(t.bands,(function(e){return s("th",{key:e},[t._v("\n          "+t._s(e)+"\n          "),"GCSE Avg"===e?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              The average GCSE grades of the pupils taking the subject in a given year.\n            ")])],1):t._e()],1)})),s("th")],2)]),s("tbody",t._l(t.bandedHistory,(function(e){return s("tr",{key:e.year},[s("td",{staticClass:"text-right"},[t._v(t._s(e.year))]),t._l(t.bands,(function(a){return s("td",{key:a.bands,staticClass:"text-center"},[t._v("\n          "+t._s(t.getBandData(a,e))+"\n        ")])})),s("td",["Avg Last 3 Yrs"===e.year?s("q-icon",{attrs:{size:"xs",color:"font",name:"fad fa-question-circle"}},[s("q-tooltip",{attrs:{"content-class":"bg-tertiary"}},[t._v("\n              Last 3 (if available) year's grades are treated as a single cohort with the final absolute values divided by 3.\n            ")])],1):t._e()],1)],2)})),0)]):t._e()],1)},_t=[],Ot={name:"HOD.Metrics.MLO.ProfileTable",props:{history:{type:Array,required:!0},bandedHistory:{type:Array,required:!0},grades:{type:Array,required:!0},bands:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{mode:"percentage",modes:[{value:"percentage",label:"Percentage"},{value:"absolute",label:"Absolute"}],style:"banded",styles:[{value:"banded",label:"Banded"},{value:"linear",label:"Linear"}]}},computed:{ordered:function(){return parseInt(this.profile[0])<7?this.profile.split().reverse():this.profile}},methods:{getGrade:function(t,e){var s=e.results.find((function(e){return e.grade===t}));return s?"absolute"===this.mode||"GCSE Avg"===t?s.count:s.pct:"-"},getBandData:function(t,e){var s=e.results.find((function(e){return e.band===t}));if(!s)return"-";var a="absolute"===this.mode?s.abs:s.pct;return 0===a?"":a}},watch:{},components:{},created:function(){}},Mt=Ot,kt=s("6dd6"),jt=Object(O["a"])(Mt,Ct,_t,!1,null,"5191f8cd",null),wt=jt.exports;k()(jt,"components",{QBtnToggle:kt["a"],QMarkupTable:W["a"],QIcon:pt["a"],QTooltip:gt["a"]});var qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"stacked",staticStyle:{height:"200px"}})])},St=[];s("ce9c"),s("cf91"),s("d2b6");V["f"](ot["a"]);var Lt={name:"HOD.Metrics.MLO.HistoryStack",props:{profile:{type:Array,required:!0},grades:{type:Array,required:!0},title:{tyle:String,default:""}},data:function(){return{stacked:null,chart:null}},methods:{createStacked:function(){var t=V["c"](this.$refs.stacked,Z["l"]);this.stacked=t,t.hiddenState.properties.opacity=0,t.colors.step=4,t.padding(10,10,10,10);var e=t.xAxes.push(new Z["a"]);e.dataFields.category="year",e.renderer.grid.template.location=0,e.renderer.minGridDistance=50;var s=t.yAxes.push(new Z["k"]);s.min=0,s.max=100,s.strictMinMax=!0,s.calculateTotals=!0,s.renderer.minWidth=50,t.data=this.stackData()},addStackSeries:function(t,e){var s=t.series.push(new Z["c"]);s.sequencedInterpolation=!0,s.columns.template.width=V["e"](80),s.columns.template.tooltipText="[bold]{name}[/][font-size:14px]: {valueY.totalPercent.formatNumber('#.00')}%",s.name=e,s.dataFields.categoryX="year",s.dataFields.valueY=e,s.dataFields.valueYShow="totalPercent",s.dataItems.template.locations.categoryX=.5,s.stacked=!0,s.tooltip.pointerOrientation="vertical";var a=this.getColor(e);s.fill=V["b"](a)},getColor:function(t){var e="";switch(t){case"9":case"D1":e="#FF00FF";break;case"D2":case"A*":case"8":e="#9900ff";break;case"D3":case"A":case"7":e="#0000ff";break;case"M1":case"B":case"6":e="#4a86e8";break;case"M2":case"C":case"5":e="#00ffff";break;case"M3":case"D":case"4":e="#00ff00";break;case"P1":case"E":case"3":e="#ffff00";break;case"P2":case"2":e="#ff9900";break;case"U":e="#ff0000";break;default:e="#980000"}return e},stackData:function(){var t=this;return this.grades.forEach((function(e){Number.isInteger(e.grade)||t.stacked.colors.reset(),"GCSE Avg"!==e.grade&&t.addStackSeries(t.stacked,e.grade)})),this.profile}},computed:{},watch:{},components:{},created:function(){},mounted:function(){this.createStacked()},beforeDestroy:function(){this.stacked.dispose()}},$t=Lt,Dt=Object(O["a"])($t,qt,St,!1,null,"5e19ad04",null),Et=Dt.exports,Pt=s("8206"),Gt=s.n(Pt),At={name:"HOD.Data.MLO",props:{},data:function(){return{year:null,exam:null,subject:null,students:[],maxMLOCount:4,splitter:60,loading:!0,request:null,componentKey:1}},methods:{process:function(t){t.year===this.year&&t.id===this.subject.id&&t.examId===this.exam&&(this.componentKey++,this.students=t.students,this.maxMLOCount=t.maxMLOCount,this.subject=t,this.loading=!1)},getHistory:function(){this.loading=!0,this.request&&this.request.cancel(),this.request=Gt.a.CancelToken.source(),this.year=this.$store.getters["hod/activeYear"],this.exam=this.$store.getters["hod/activeExam"],this.subject=this.$store.getters["user/getGlobalSubject"],p.getExamHistory(this.process,this.$errorFunction,this.year,this.exam,this.request)}},computed:{},watch:{},components:{HistoryTable:wt,HistoryStack:Et,Loading:L},created:function(){var t=this;this.subject=this.$store.getters["user/getGlobalSubject"],this.getHistory(),this.subWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.getHistory),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.getHistory),this.examWatch=this.$store.watch((function(){return t.$store.getters["hod/activeExam"]}),this.getHistory)},beforeDestroy:function(){this.subWatch(),this.yearWatch(),this.examWatch()}},Ft=At,Wt=(s("f1e9"),Object(O["a"])(Ft,vt,xt,!1,null,"7c11e2db",null)),Ht=Wt.exports;function Nt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Yt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(s),!0).forEach((function(e){i()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Nt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var It={name:"Page.HOD.Metrics",data:function(){return{elements:[{name:"classes",label:"classes",component:N},{name:"mlo",label:"mlo",component:yt},{name:"history",label:"history",component:Ht}]}},computed:Yt({},Object(o["c"])("user",["getGlobalSubject"])),methods:Yt({},Object(o["d"])("hod",["setActiveYear"])),components:{toolbarPage:d["a"],YearBar:l["a"],ExamBar:c["a"]},created:function(){var t=this;this.setActiveYear(13),this.subjectWatch=this.$store.watch((function(){return t.$store.getters["user/getGlobalSubject"]}),this.setClass),this.yearWatch=this.$store.watch((function(){return t.$store.getters["hod/activeYear"]}),this.setClass)},beforeDestroy:function(){this.subjectWatch&&this.subjectWatch(),this.yearWatch&&this.yearWatch()}},Tt=It,Qt=(s("d31e"),Object(O["a"])(Tt,a,r,!1,null,null,null));e["default"]=Qt.exports},f1e9:function(t,e,s){"use strict";var a=s("503e"),r=s.n(a);r.a}}]);