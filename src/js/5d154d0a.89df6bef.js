(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["5d154d0a"],{"01b0":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"06ef":function(e,t,a){"use strict";var o=a("8c7e"),n=a("01b0"),i=a("742b");a("fe99")("search",1,(function(e,t,a,s){return[function(a){var o=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,o):new RegExp(a)[t](String(o))},function(e){var t=s(a,e,this);if(t.done)return t.value;var l=o(e),r=String(this),c=l.lastIndex;n(c,0)||(l.lastIndex=0);var d=i(l,r);return n(l.lastIndex,c)||(l.lastIndex=c),null===d?-1:d.index}]}))},"27da":function(e,t,a){"use strict";var o=a("9125"),n=a.n(o);n.a},"510c":function(e,t,a){"use strict";var o=a("a497"),n=a.n(o);n.a},"5a18":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-form"},[a("div",{ref:"new",staticClass:"row"},[e._l(e.columns,(function(t,o){return t.validations?a("div",{key:t.field,staticClass:"col-12"},[!0===!t.hidden?a("div",{staticClass:"q-mb-md",attrs:{orientation:"vertical",label:t.label,helperx:t.required?"Required":"","error-label":""}},["string"===t.type?a("q-input",{ref:o?"input"+o:"",refInFor:!0,attrs:{tabindex:"0",label:t.label,"stack-labelx":t.label,type:"text",dark:e.dark,error:e.$v.newRow[t.field].$error,autofocus:""},on:{blur:function(a){e.$v.newRow[t.field].$touch},input:function(a){e.$v.newRow[t.field].$touch}},model:{value:e.newRow[t.field],callback:function(a){e.$set(e.newRow,t.field,"string"===typeof a?a.trim():a)},expression:"newRow[column.field]"}}):e._e(),"number"===t.type?a("q-input",{attrs:{tabindex:"0",label:t.label,"stack-labelx":t.label,type:"number",dark:e.dark,error:e.$v.newRow[t.field].$error,autofocus:""},on:{blur:function(a){e.$v.newRow[t.field].$touch},input:function(a){e.$v.newRow[t.field].$touch}},model:{value:e.newRow[t.field],callback:function(a){e.$set(e.newRow,t.field,"string"===typeof a?a.trim():a)},expression:"newRow[column.field]"}}):e._e(),"options"===t.type&&t.options.length<4?a("q-btn-toggle",{staticClass:"q-mt-md",attrs:{label:t.label,color:"dark","toggle-color":"cyan-9","text-color":"white","toggle-text-color":"primary",options:t.options,error:e.$v.newRow[t.field].$error,outline:""},on:{input:function(a){e.$v.newRow[t.field].$touch}},model:{value:e.newRow[t.field],callback:function(a){e.$set(e.newRow,t.field,a)},expression:"newRow[column.field]"}}):e._e(),"options"===t.type&&t.options.length>3?a("q-select",{attrs:{"map-options":"","stack-label":t.label,options:t.options,label:t.label,dark:e.dark,error:e.$v.newRow[t.field].$error,"emit-value":""},on:{input:function(a){e.$v.newRow[t.field].$touch}},model:{value:e.newRow[t.field],callback:function(a){e.$set(e.newRow,t.field,a)},expression:"newRow[column.field]"}}):e._e(),"date"===t.type||"datetime"===t.type||"time"===t.type?a("q-input",{attrs:{label:t.label,dark:"",filled:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"time"===t.type?"access_time":"event"}},[a("q-popup-proxy",{ref:"qDateProxy",refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("div",{staticClass:"bg-dark row no-padding no-margin",staticStyle:{border:"1px solid grey"}},["date"===t.type||"datetime"===t.type?a("div",{staticClass:"col q-pb-md",staticStyle:{"border-right":"1px solid grey"}},[a("q-date",{staticClass:"row",attrs:{color:"grey-8",mask:"datetime"===t.type?"DD-MM-YYYY HH:mm":"DD-MM-YYYY","text-color":"black",dark:"",flat:"",minimal:""},model:{value:e.newRow[t.field],callback:function(a){e.$set(e.newRow,t.field,a)},expression:"newRow[column.field]"}}),a("div",{staticClass:"row q-mt-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-md q-mr-xs",attrs:{flatx:"",outline:"",color:"primary","text-color":"primary",label:"clear"},on:{click:function(){e.newRow[t.field]=null}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-xs q-mr-md",attrs:{outlinex:"",color:"primary","text-color":"dark",label:"save"}})],1)],1):e._e(),"time"===t.type||"datetime"===t.type?a("div",{staticClass:"col no-padding no-margin"},[a("q-time",{attrs:{mask:"DD-MM-YYYY HH:mm",format24h:"",color:"grey-8","text-color":"black",dark:"",borderedx:"",minimal:"",flat:""},model:{value:e.newRow[t.field],callback:function(a){e.$set(e.newRow,t.field,a)},expression:"newRow[column.field]"}}),"time"===t.type?a("div",{staticClass:"row q-my-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-md q-mr-xs",attrs:{flatx:"",outline:"",color:"primary","text-color":"primary",label:"clear"},on:{click:function(){e.newRow[t.field]=null}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-xs q-mr-md",attrs:{outlinex:"",color:"primary","text-color":"dark",label:"save"}})],1):e._e()],1):e._e()])])],1)]},proxy:!0}],null,!0),model:{value:e.newRow[t.field],callback:function(a){e.$set(e.newRow,t.field,a)},expression:"newRow[column.field]"}}):e._e()],1):e._e()]):e._e()})),a("div",{staticClass:"row q-mt-md full-width"},[a("q-btn",{directives:[{name:"hotkey",rawName:"v-hotkey.once",value:{enter:e.submit},expression:"{'enter': submit}",modifiers:{once:!0}}],staticClass:"text-primary col",attrs:{outline:"",dark:"",icon:"fal fa-check",label:"Create New"},nativeOn:{click:function(t){return e.submit(t)}}})],1)],2)])},n=[],i=a("c286"),s={name:"ComponentCrudNew",props:{rowKey:{default:"id"},columns:{required:!0,type:Array},data:{required:!0,type:Array},api:{required:!0,type:Object}},data:function(){return{dark:!0,newRow:{},autofocus:!1}},validations:function(){return{newRow:this.getValidations}},methods:{submit:function(){this.$v.newRow.$touch(),this.$v.newRow.$error?this.$q.notify("Please review fields again."):this.api.post(this.success,this.error,this.newRow,this.api.parameters)},success:function(e){this.data.push(e),this.$emit("saved",e)},error:function(){this.$q.notify("Oops, something went wrong")}},computed:{getValidations:function(){var e={};return this.columns.forEach((function(t,a){e[t.field]=t.validations?t.validations:{}})),e},defaultYearMonth:function(){var e=Date.now();return i["b"].formatDate(e,"YYYY/MM")}},components:{},created:function(){},mounted:function(){console.log(this.columns)}},l=s,r=(a("bc91"),a("2be6")),c=Object(r["a"])(l,o,n,!1,null,"49e5a722",null);t["default"]=c.exports},9125:function(e,t,a){},a497:function(e,t,a){},aaeb:function(e,t,a){},b433:function(e,t,a){"use strict";var o=a("aaeb"),n=a.n(o);n.a},bc91:function(e,t,a){"use strict";var o=a("fc9a"),n=a.n(o);n.a},d612:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row col crud-table no-shadow "},[a("q-splitter",{staticClass:"full-width",attrs:{"separator-class":e.seperatorClass,"separator-style":{width:"1px"},limits:e.splitterLimits},scopedSlots:e._u([{key:"before",fn:function(){return[e.showTable?a("div",{staticClass:"col q-pr-sm no-shadow",style:[e.maxWidth>0?{"max-width":e.maxWidth+"px",margin:"auto"}:""]},[e.title.length>0&&!e.isPopup?a("div",{staticClass:"row text-primary bg-dark q-py-xs q-px-sm uppercase"},[e._v(e._s(e.title))]):e._e(),a("q-table",{directives:[{name:"hotkey",rawName:"v-hotkey.once",value:{down:e.downTable,up:e.upTable},expression:"{'down': downTable, 'up': upTable}",modifiers:{once:!0}}],staticClass:"sticky-header-table no-shadow no-border bg-dark full-heightx scroll",staticStyle:{"border-collapse":"separate!important","border-top-color":"none"},attrs:{"virtual-scroll":"","table-stylex":"max-height: 80vh; height:100%","hide-header":e.hideHeader,data:e.filteredData,columns:e.columns,"row-key":e.rowKey,filter:e.searchTerm,"filter-method":e.searchFilter,dark:e.isDark,dense:"",selection:e.multiselect?"multiple":"single",selected:e.selected,pagination:e.pagination,separator:e.separator,"hide-bottomx":e.modal,loading:e.loading},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(t){return e.search||e.filterbox||e.fullscreen||e.download||e.canNew?a("div",{staticClass:"row flex-center fit no-padding",staticStyle:{"min-height":"30px"}},[a("div",{staticClass:"row flex-center fit"},[!0===e.filterbox?a("q-btn-dropdown",{staticClass:"q-mr-md action",attrs:{labelx:"Filter",size:"sm",icon:"fal fa-filter fa-sm",color:"primary",dense:""}},[a("q-list",{staticClass:"bg-menu"},e._l(e.columns,(function(t){return!0===!t.hidden&&"options"===t.type?a("q-expansion-item",{key:t.name,attrs:{dark:e.isDark,group:"somegroup",icon:t.icon,label:t.name}},[a("div",[a("q-list",{staticClass:"bg-menu",attrs:{link:""}},e._l(t.options,(function(o){return a("q-item",{key:o.value,attrs:{clickable:""},nativeOn:{click:function(a){return e.setFilter(t.field,o.value)}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-grey"},[e._v(e._s(o.label))])],1)],1)})),1)],1)]):e._e()})),1)],1):e._e(),e.search?e._e():a("q-space"),e.search?a("q-input",{ref:"search",staticClass:"col q-mb-none",class:[!0===e.filterbox?"q-mx-lg":""],staticStyle:{"min-width":"200px"},attrs:{placeholder:"Search",clearable:"",dense:"","hide-underlines":"",dark:e.isDark},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}):e._e(),a("div",{},[e.download?a("q-btn",{staticClass:"q-ml-md",attrs:{icon:"fal fa-download fa-xs",size:"md",dense:""}}):e._e(),e.fullscreen?a("q-btn",{staticClass:"q-ml-md text-secondary",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}}):e._e(),e.canNew?a("q-btn",{staticClass:"text-secondary new-button q-ml-md",attrs:{"icon-color":"lime-13",icon:"fal fa-plus fa-xs",size:"md",dense:""},on:{click:e.triggerNewForm}}):e._e()],1)],1),a("div",{staticClass:"row full-width"},[a("div",{staticClass:"col"},e._l(e.columns,(function(t){return"options"===t.type&&e.filters[t.field]&&e.filterchips?a("q-chip",{key:t.name,staticClass:"q-mr-xs",attrs:{"text-color":"dark",iconx:"alarm",color:"primary",dense:"",removable:""},on:{remove:function(a){e.filters[t.field]=null}}},[e._v("\n                      "+e._s(e.getOptions(t.options,e.filters[t.field]))+"\n                    ")]):e._e()})),1)])]):e._e()}},{key:"header",fn:function(t){return a("q-tr",{staticClass:"no-border",attrs:{props:t}},[e.indicator.length>0?a("q-th",{staticClass:"no-border no-padding",staticStyle:{background:"none","max-width":"5px",width:"5px!important",padding:"none",margin:"none"}}):e._e(),e.multiselect?a("q-th",{staticClass:"no-border",attrs:{"auto-width":""}},[t.multipleSelect?a("q-checkbox",{staticStyle:{"padding-left":"4px"},attrs:{dense:"",dark:e.isDark,"indeterminate-value":"some"},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}}):e._e()],1):e._e(),e.expand&&e.details?a("q-th",{staticClass:"no-border",attrs:{"auto-width":""}}):e._e(),e._l(t.cols,(function(o){return!0===!o.hidden?a("q-th",{key:o.name,class:{"sticky-col sticky-col-head":o.sticky},staticStyle:{"text-align":"left"},attrs:{props:t}},["options"===o.type&&!0===o.filter?a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"no-border no-shadow",attrs:{icon:"fal fa-filter",size:"xs",dense:"","text-color":"primary"},on:{click:function(e){e.stopPropagation()}}},[a("q-menu",{staticClass:"bg-dark",attrs:{dark:""}},[a("q-list",{staticClass:"bg-dark",attrs:{dense:"",dark:"",link:""}},e._l(o.options,(function(t){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:t.value,attrs:{dark:"",clickable:"",sparse:""},nativeOn:{click:function(a){return e.setFilter(o.field,t.value)}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-grey"},[e._v(e._s(t.label))])],1)],1)})),1)],1)],1):e._e(),e._v("\n                "+e._s(o.label)+"\n              ")],1):e._e()})),e.actions.length>0&&e.canAction||e.canDelete?a("q-th"):e._e()],2)}},{key:"top-row",fn:function(t){return e.selected.length>1?a("q-tr",{staticStyle:{height:"30px"}},[a("q-td",{staticClass:"bg-dark q-mt-md",staticStyle:{height:"30px"},attrs:{colspan:"100%"}},[a("q-btn",{staticClass:"action",attrs:{label:"delete",size:"md",dense:""}})],1)],1):e._e()}},{key:"body",fn:function(t){return[a("q-tr",{class:[!0===t.row[e.indicator]||1==t.row[e.indicator]?"indicatedRow":"normalRow",t.row[e.rowKey]===e.expandedRowId?"expanded":"",!0===e.selectIndicator&&!0===t.selected?"selectIndicator":null],attrs:{props:t},nativeOn:{click:function(a){return e.clickRow(t)}}},[e.indicator.length>0?a("q-td",{staticClass:"no-border no-padding",class:[!0===t.row[e.indicator]||"1"==t.row[e.indicator]?"indicatedCell":""],staticStyle:{"max-width":"10px",width:"10px!important",padding:"none",margin:"none"}}):e._e(),e.multiselect?a("q-td",{attrs:{"auto-width":""}}):e._e(),e.expand&&e.details?a("q-td",{attrs:{"auto-width":""}},[a("q-icon",{attrs:{name:t.row[e.rowKey]===e.expandedRowId?"fal fa-chevron-down":"fal fa-chevron-right"}})],1):e._e(),e._l(e.columns,(function(o,n){return!0===!o.hidden?a("q-td",{key:o.name,class:{"sticky-col":o.sticky},attrs:{props:t}},[a("div",{staticClass:"row",staticStyle:{"align-items":"center"}},[o.slotLeft?a("span",[a(o.slotLeft,{tag:"component",attrs:{columns:e.columns,row:t.row,data:e.data}})],1):e._e(),-1===n?a("q-btn",{staticClass:"no-border",attrs:{flat:"",round:"",dense:"",icon:"delete"},nativeOn:{click:function(a){return e.deleteItem(t.row.id)}}}):e._e(),!0===!o.hidden&&"badges"===o.type?a("span",e._l(t.row[o.field],(function(t){return a("q-badge",{key:t,staticClass:"q-mr-xs",attrs:{color:e.badgeColor(t,o),"text-color":e.badgeTextColor(t,o)}},[e._v("\n                        "+e._s(o.truncate?t.substring(0,1):t)+"\n                      ")])})),1):e._e(),!0===!o.hidden&&"badge"===o.type?a("span",[a("q-badge",{attrs:{color:e.badgeColor(t.row[o.field],o),"text-color":e.badgeTextColor(t.row[o.field],o)}},[e._v("\n                        "+e._s(o.truncate?t.row[o.field].substring(0,1):t.row[o.field])+"\n                      ")])],1):e._e(),!0===!o.hidden&&"options"===o.type?a("span",{staticClass:"inlineEdit full-width"},["options"===o.type&&!0===e.inlineEdit&&!0===e.canEdit?a("q-select",{attrs:{"map-options":"","emit-value":"",readonly:!o.editable,"hide-dropdown-icon":!o.editable,dense:"",borderless:"","options-dark":"",options:o.options,dark:e.isDark,"hide-bottom-space":""},on:{input:function(a){return e.update(t.row[e.rowKey])}},model:{value:t.row[o.field],callback:function(a){e.$set(t.row,o.field,a)},expression:"props.row[column.field]"}}):e._e()],1):e._e(),!0!==o.editable||!0!==e.canEdit||!0!==e.inlineEdit||"date"!==o.type&&"datetime"!==o.type&&"time"!==o.type?e._e():a("q-btn",{staticClass:"no-shadow",staticStyle:{width:"10px"},attrs:{"text-color":"primary",icon:"time"===o.type?"fal fa-clock fa-xs":"fal fa-calendar fa-xs",size:"8px"}},[a("q-popup-proxy",{staticClass:"bg-dark"},[a("div",{staticClass:"bg-dark row no-padding no-margin",staticStyle:{border:"1px solid grey"}},["date"===o.type||"datetime"===o.type?a("div",{staticClass:"col q-pb-md",staticStyle:{"border-right":"1px solid grey"}},[a("q-date",{staticClass:"row",attrs:{color:"grey-8",mask:"datetime"===o.type?"DD-MM-YYYY HH:mm":"DD-MM-YYYY","text-color":"black",dark:"",flat:"",minimal:""},on:{input:function(a){return e.update(t.row[e.rowKey])}},model:{value:t.row[o.field],callback:function(a){e.$set(t.row,o.field,a)},expression:"props.row[column.field]"}}),a("div",{staticClass:"row q-mt-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-md q-mr-xs",attrs:{flatx:"",outline:"",color:"primary","text-color":"primary",label:"clear"},on:{click:function(){t.row[o.field]=null,e.update(t.row[e.rowKey])}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-xs q-mr-md",attrs:{outlinex:"",color:"primary","text-color":"dark",label:"save"}})],1)],1):e._e(),"time"===o.type||"datetime"===o.type?a("div",{staticClass:"col no-padding no-margin"},[a("q-time",{attrs:{mask:"DD-MM-YYYY HH:mm",format24h:"",color:"grey-8","text-color":"black",dark:"",borderedx:"",minimal:"",flat:""},on:{input:function(a){return e.update(t.row[e.rowKey])}},model:{value:t.row[o.field],callback:function(a){e.$set(t.row,o.field,a)},expression:"props.row[column.field]"}}),"time"===o.type?a("div",{staticClass:"row q-my-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-md q-mr-xs",attrs:{flatx:"",outline:"",color:"primary","text-color":"primary",label:"clear"},on:{click:function(){t.row[o.field]=null,e.update(t.row[e.rowKey])}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col q-ml-xs q-mr-md",attrs:{outlinex:"",color:"primary","text-color":"dark",label:"save"}})],1):e._e()],1):e._e()])])],1),!0===o.editable&&!0===e.canEdit&&!0===e.inlineEdit&&"date"!==o.type&&"time"!==o.type&&"datetime"!==o.type&&"options"!==o.type?a("span",[a("q-btn",{staticClass:"no-border no-shadow",staticStyle:{width:"10px"},attrs:{icon:"fal fa-pen-square","text-color":"primary",size:"9px"}},[!0===o.editable&&!0===e.inlineEdit?a("q-popup-edit",{staticClass:"bg-dark",attrs:{color:"lime-13",title:o.label,buttons:"","content-class":"bg-dark text-light capitalize",dark:"","label-set":"Save"},on:{save:function(a){return e.update(t.row[e.rowKey])}},model:{value:t.row[o.field],callback:function(a){e.$set(t.row,o.field,a)},expression:"props.row[column.field]"}},["string"===o.type?a("q-input",{attrs:{autofocus:"",type:"text",dark:e.dark},on:{inputx:function(a){return e.update(t.row[e.rowKey])}},model:{value:t.row[o.field],callback:function(a){e.$set(t.row,o.field,a)},expression:"props.row[column.field]"}}):e._e(),"number"===o.type?a("q-input",{attrs:{autofocus:"",type:"number",dark:e.dark},on:{inputx:function(a){return e.update(t.row[e.rowKey])}},model:{value:t.row[o.field],callback:function(a){e.$set(t.row,o.field,a)},expression:"props.row[column.field]"}}):e._e(),"options"===o.type?a("q-select",{attrs:{"map-options":"",autofocus:"","options-dark":"",options:o.options,dark:e.dark,"emit-value":""},on:{input:function(a){return e.update(t.row[e.rowKey])}},model:{value:t.row[o.field],callback:function(a){e.$set(t.row,o.field,a)},expression:"props.row[column.field]"}}):e._e()],1):e._e()],1)],1):e._e(),a("div",{staticClass:"col text-left",staticStyle:{overflow:"hidden"}},[!0!==!o.hidden||"string"!==o.type&&"number"!==o.type&&o.type?e._e():a("span",{staticClass:"ellipsis"},[e._v("\n                      "+e._s(t.row[o.field])+"\n                    ")]),!0!==!o.hidden||"date"!==o.type&&"time"!==o.type&&"datetime"!==o.type?e._e():a("span",[e._v(e._s(t.row[o.field]))])]),o.slotRight?a("span",[a(o.slotRight,{tag:"component",attrs:{columns:e.columns,row:t.row,data:e.data}})],1):e._e()],1)]):e._e()})),e.actions.length>0&&e.canAction||e.canDelete?a("q-td",{on:{click:function(e){e.stopPropagation()}}},[e.actions.length>0&&e.canAction||e.canDelete?a("q-btn",{staticClass:"no-border no-shadow",staticStyle:{},attrs:{icon:"fal fa-ellipsis-v",flat:"",dense:"",size:"10px","text-color":"primary"}}):e._e(),a("q-menu",{staticClass:"bg-grey",staticStyle:{"min-width":"300px"},attrs:{dark:"","content-style":'{min-width:"200px"}',"auto-close":""}},[a("q-list",{staticClass:"bg-menu text-primary q-py-xs",staticStyle:{"min-width":"150px"},attrs:{dense:"",dark:""}},[e._l(e.actions,(function(o){return a("q-item",{key:o.name,staticClass:"q-mb-sm",attrs:{link:"",clickable:""},nativeOn:{click:function(a){return e.sendAction(o.event,t.row)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{staticClass:"text-primary",class:[o.icon?o.icon:""]})],1),a("q-item-section",[e._v("\n                            "+e._s(o.title)+"\n                          ")])],1)})),!0===e.canDelete?a("q-item",{attrs:{clickable:""},nativeOn:{click:function(a){return e.deleteRow(t.row)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{staticClass:"q-mr-sm text-red",attrs:{size:"lg",name:"fal fa-trash fa-menu"}})],1),a("q-item-section",[e._v("Delete")])],1):e._e()],2)],1)],1):e._e()],2),e.expand&&e.details?a("q-tr",{directives:[{name:"show",rawName:"v-show",value:t.row[e.rowKey]===e.expandedRowId,expression:"props.row[rowKey] === expandedRowId"}],class:[!0===t.row[e.indicator]?"indicatedRow":"normalRow",t.row[e.rowKey]===e.expandedRowId?"expanded":""],attrs:{props:t}},[a("q-td",{attrs:{colspan:"100%"}},[e._t("details",[a("details-row",{attrs:{canEdit:e.canEdit,columns:e.columns,selectedRow:t.row}})],{selectedRow:t.row})],2)],1):e._e()]}},{key:e.modal?"bottom":"pagination",fn:function(t){return e.hidePagination?e._e():a("div",{staticClass:"row flex-center q-py-sm"},[a("div",{staticClass:"row col flex-center"},[a("q-btn",{staticClass:"q-mr-sm no-shadow",attrs:{round:"",dense:"",size:"sm",icon:"undo",color:"","text-color":"primary",disable:t.isFirstPage},on:{click:t.prevPage}}),a("div",{staticClass:"q-mr-sm",staticStyle:{"font-size":"small"}},[e._v("Page "+e._s(t.pagination.page)+" / "+e._s(t.pagesNumber))]),a("q-btn",{staticClass:"no-shadow",attrs:{round:"",dense:"",size:"sm",icon:"redo",color:"","text-color":"primary",disable:t.isLastPage},on:{click:t.nextPage}})],1)])}}],null,!0)})],1):e._e()]},proxy:!0},e.showSidebar?{key:"after",fn:function(){return[e.showSidebar?a("div",{staticClass:"q-ml-sm",class:[e.sidebarWidth&&e.showTable?"col-"+e.sidebarWidth:"col"]},[a("q-tabs",{staticClass:"bg-toolbar text-white narrow no-border no-shadow",attrs:{dense:"",shrink:"",animated:"",swipeable:"",align:"justify","indicator-color":"primary"},model:{value:e.selectedSbComponent,callback:function(t){e.selectedSbComponent=t},expression:"selectedSbComponent"}},[e.tablehide?a("q-btn",{staticClass:"text-primary q-px-md no-shadow",attrs:{icon:e.showTable?"fal fa-arrow-left fa-xs":"fal fa-arrow-right fa-xs",dense:"",name:"details"},nativeOn:{click:function(t){e.showTable=!e.showTable}}}):e._e(),!0===e.details&&!1===e.expand?a("q-tab",{attrs:{name:"details",label:"Details"}}):e._e(),e._l(e.sidebarComponents,(function(e){return a("q-tab",{key:e.name,attrs:{name:e.name,label:e.title}})}))],2),a("q-tab-panels",{staticClass:"full-height",attrs:{"keep-alive":""},model:{value:e.selectedSbComponent,callback:function(t){e.selectedSbComponent=t},expression:"selectedSbComponent"}},[a("q-tab-panel",{staticClass:"no-border no-shadow",attrs:{name:"details"}},[e._t("details",[a("details-panel",{attrs:{columns:e.columns,selectedRow:e.selectedRow}})],{selectedRow:e.selectedRow,columns:e.columns,data:e.data})],2),e._l(e.sidebarComponents,(function(t){return a("q-tab-panel",{key:t.name,attrs:{name:t.name}},[a(t.component,{key:t.name,tag:"component",attrs:{columns:e.columns,selectedRow:e.selectedRow,data:e.data}})],1)}))],2)],1):e._e()]},proxy:!0}:null],null,!0),model:{value:e.splitterModel,callback:function(t){e.splitterModel=t},expression:"splitterModel"}}),a("q-dialog",{ref:"new",attrs:{"content-classes":"new-modal bg-dark q-pa-md",persistent:"","transition-show":"scale","transition-hide":"scale"},on:{show:e.newFormFocus},model:{value:e.showNewForm,callback:function(t){e.showNewForm=t},expression:"showNewForm"}},[a("q-card",{staticClass:"bg-grey-9",attrs:{dark:""}},[a("q-toolbar",[a("q-toolbar-title",[e._v("New")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",{key:e.newComponentKey},[a(e.insertComponent,{key:e.newComponentKey,tag:"component",attrs:{rowKey:e.rowKey,columns:e.columns,api:e.api,data:e.data},on:{saved:e.saved,close:function(t){e.showNewForm=!1}}})],1)],1)],1)],1)},n=[],i=(a("e125"),a("4823"),a("c880"),a("0c1f"),a("8e9e")),s=a.n(i),l=(a("06ef"),a("3cc3")),r=a.n(l),c=(a("2e73"),a("dde3"),a("76d0"),a("0e20"),a("0e30"),a("288e"),a("ce9c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.selectedRow?a("div",{staticClass:"row"},e._l(e.columns,(function(t){return a("div",{key:t.field,staticClass:"col-12"},["string"===t.type&&!0===!t.hidden?a("q-input",{attrs:{type:"text",dark:e.dark,"stack-label":t.label},model:{value:e.selectedRow[t.field],callback:function(a){e.$set(e.selectedRow,t.field,a)},expression:"selectedRow[column.field]"}}):e._e(),"number"===t.type&&!0===!t.hidden?a("q-input",{attrs:{type:"number",dark:e.dark,"stack-label":t.label},model:{value:e.selectedRow[t.field],callback:function(a){e.$set(e.selectedRow,t.field,a)},expression:"selectedRow[column.field]"}}):e._e(),"options"===t.type&&!0===!t.hidden?a("q-select",{attrs:{options:t.options,"map-options":"",dark:e.dark,"stack-label":t.label},model:{value:e.selectedRow[t.field],callback:function(a){e.$set(e.selectedRow,t.field,a)},expression:"selectedRow[column.field]"}}):e._e()],1)})),0):e._e()}),d=[],u={name:"ComponentCrudDetails",props:{columns:{required:!0,type:Array},selectedRow:{required:!0}},data:function(){return{dark:!0}},methods:{},computed:{},components:{},created:function(){}},p=u,f=(a("27da"),a("2be6")),m=Object(f["a"])(p,c,d,!1,null,"7ab01de1",null),w=m.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.selectedRow?a("div",{staticClass:"row content-start q-my-md"},e._l(e.columns,(function(t){return!0===t.hidden?a("div",{key:t.field,staticClass:"col block content-start q-mr-sm"},["string"===t.type?a("q-input",{attrs:{type:"text",dark:e.dark,label:t.label,"stack-label":"",readonly:!e.canEdit&&!t.editable},model:{value:e.selectedRow[t.field],callback:function(a){e.$set(e.selectedRow,t.field,a)},expression:"selectedRow[column.field]"}}):e._e(),"number"===t.type?a("q-input",{attrs:{type:"number",dark:e.dark,label:t.label,"stack-label":"",readonly:!e.canEdit&&!t.editable},model:{value:e.selectedRow[t.field],callback:function(a){e.$set(e.selectedRow,t.field,a)},expression:"selectedRow[column.field]"}}):e._e(),"options"===t.type&&!0===t.editable&&!0===e.canEdit?a("q-select",{attrs:{"map-options":"",options:t.options,dark:e.dark,"stack-label":t.label,readonly:!e.canEdit&&!t.editable},model:{value:e.selectedRow[t.field],callback:function(a){e.$set(e.selectedRow,t.field,a)},expression:"selectedRow[column.field]"}}):e._e(),"text"===t.type&&!0===t.editable&&!0===e.canEdit?a("q-input",{attrs:{label:t.label,"stack-label":"",dark:e.dark,type:"textarea",autofocus:"",counter:"",readonly:!e.canEdit&&!t.editable},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},model:{value:e.selectedRow[t.field],callback:function(a){e.$set(e.selectedRow,t.field,a)},expression:"selectedRow[column.field]"}}):e._e()],1):e._e()})),0):e._e()},b=[],y={name:"ComponentCrudDetails",props:{columns:{required:!0,type:Array},selectedRow:{required:!0},canEdit:{required:!0,type:Boolean}},data:function(){return{dark:!0}},methods:{},computed:{},components:{},created:function(){}},v=y,g=(a("510c"),Object(f["a"])(v,h,b,!1,null,"463ce00c",null)),x=g.exports,k=a("5a18"),q=a("9869"),C=a("c005"),_=a.n(C),R=a("9ce4");function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={name:"ComponentCRUD",props:{columns:{required:!0,type:Array},isPopup:{type:Boolean,default:!1},detailedView:{default:!0,type:Boolean},title:{default:"",type:String},api:{required:!1,type:Object,default:function(){return{get:null,parameters:{},getSingle:null,put:null,post:null,delete:null}}},actions:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1},sortBy:{type:String,default:"id"},reverse:{type:Boolean,default:!1},rowsPerPage:{default:0},rowKey:{type:String,default:"id"},multiselect:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},inlineEdit:{type:Boolean,default:!1},hideHeader:{type:Boolean,default:!1},details:{type:Boolean,default:!1},newtab:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},filterbox:{type:Boolean,default:!1},filterchips:{type:Boolean,default:!1},hidePagination:{type:Boolean,default:!0},sidebarComponents:{type:Array,default:function(){return[]}},newComponent:{},canNew:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canAction:{type:Boolean,default:!0},indicator:{type:String,default:""},selectIndicator:{type:Boolean,default:!0},sidebarWidth:{},tablehide:{default:!1},download:{type:Boolean,default:!1},modal:{type:Boolean,default:!1},maxWidth:{type:Number,default:0},dataOverride:{type:Array},channel:{type:String,default:""},selfPublish:{type:Boolean,default:!1}},data:function(){return{data:[],dark:!0,loading:!1,selected:[],selectedRow:null,newRow:[],searchTerm:null,filters:{},separator:"cell",expandedRowId:null,showNewForm:!1,rowIndex:null,newComponentKey:1,showTable:!0,pagination:{page:1,descending:this.reverse,sortBy:!1===this.sortBy?null:this.sortBy,rowsPerPage:100},wampSubscription:null,selectedSbComponent:null,splitterModel:100}},methods:{badgeColor:function(e,t){if(t.colors){var a=t.colors.find((function(t){return t.label.toLowerCase()===e.toLowerCase()}));if(a)return a.color}return t.color?t.color:"primary"},badgeTextColor:function(e,t){if(t.colors){var a=t.colors.find((function(t){return t.label.toLowerCase()===e.toLowerCase()}));if(a)return a.textColor}return t.textColor?t.textColor:"black"},publish:function(e){this.$wamp.publish(this.channel,[],{id:e},{exclude_me:!this.selfPublish})},newFormFocus:function(){},saved:function(e){if(this.newComponentKey+=1,this.showNewForm=!1,e){var t=e[this.rowKey];this.publish(t),this.$emit("new",t),this.$emit("change",t)}else this.get(),this.publish()},get:function(e){var t=this;if(e){if(this.api.parameters||(this.api.parameters={}),this.api.parameters[this.rowKey]=e,this.api.getSingle||console.warn(this.channel,"Getsingle Not Set"),!this.api.getSingle)return void this.get();this.api.getSingle((function(a){if(a.length>0){var o=t.data.findIndex((function(a){return a[t.rowKey]===e}));o>-1?(Object.entries(a[0]).forEach((function(e){var n=r()(e,2),i=n[0];n[1];t.data[o][i]=a[0][i]})),t.$emit("update",e,a),t.$emit("change",e,a)):(t.data.push(a[0]),t.$emit("new",e,a),t.$emit("change",e,a))}else t.data=t.data.filter((function(a){return a[t.rowKey]!==e})),t.$emit("delete",e),t.$emit("change",e)}),null,this.api.parameters)}else this.api.get((function(e){t.loading=!1,t.data=e}),null,this.api.parameters)},deleteRow:function(e){var t=this;this.$q.dialog({title:"Confirm Delete",message:"This action cannot be undone",ok:"DELETE",cancel:"Cancel",color:"dark"}).onOk((function(){t.api.delete((function(a){t.data=t.data.filter((function(a){return a[t.rowKey]!==e[t.rowKey]})),t.$emit("delete",a,e),t.$emit("change",a,e),t.publish(e[t.rowKey]),t.$q.notify({message:"Success",position:"top"})}),t.error,e[t.rowKey],t.api.parameters)})).onCancel((function(){t.$q.notify({message:"Cancelled",position:"top"})}))},error:function(){this.$q.notify({message:"Oops. Something went wrong",position:"top"})},update:function(e){var t=this,a=this.data.find((function(a){return a[t.rowKey]===e}));this.api.put((function(){t.channel?t.publish(e):console.warn("Wamp Channel Not Set"),t.$emit("update",e,a),t.$emit("change",e,a)}),this.error,a,this.api.parameters)},create:function(){},getOptions:function(e,t){if(!e)return"";var a=e.find((function(e){return e.value===t}));return a?a.label:void 0},clickRow:function(e){e.selected=!e.selected,this.selectedRow=e.row,e.expand=!e.expand,this.expandedRowId=this.expandedRowId===e.row[this.rowKey]?null:e.row[this.rowKey],this.$emit("clickedRow",e.row[this.rowKey])},searchFilter:function(e,t,a,o){var n=this,i=t?t.toLowerCase():"";return e.filter((function(e){return a.some((function(t){var a="options"===t.type?n.getOptions(t.options,e[t.field]):o(t,e);return-1!==(a+"").toLowerCase().indexOf(i)}))}))},setFilter:function(e,t){this.filters[e]?this.filters[e]=t:q["a"].set(this.filters,e,t)},focusSearch:function(e){this.$refs.search.focus(),this.$refs.search.val="",e&&e.preventDefault()},moveRowIndex:function(e){var t=this.filteredData[e];this.selectedRow=t,this.expandedRowId=this.expandedRowId===t[this.rowKey]?null:t[this.rowKey],this.rowIndex=e},downTable:function(e){var t=null===this.rowIndex?0:++this.rowIndex;t===this.filteredData.length&&(t=0),this.moveRowIndex(t),e.preventDefault()},upTable:function(e){var t=null===this.rowIndex?this.data.length-1:--this.rowIndex;-1===t&&(t=this.filteredData.length-1),this.moveRowIndex(t),e.preventDefault()},triggerNewForm:function(){this.showNewForm=!0},sendAction:function(e,t){this.$emit(e,t)}},computed:S({},Object(R["e"])("user",["isDark","isLight"]),{insertComponent:function(){var e=null;return e=this.newComponent?this.newComponent:function(){return Promise.resolve().then(a.bind(null,"5a18"))},e},filteredData:function(){var e=this,t=this.dataOverride?this.dataOverride:this.data,a=!0,o=t.filter((function(t){for(var o=0,n=Object.keys(e.filters);o<n.length;o++){var i=n[o];if(null!==e.filters[i]&&(a=!1,t[i]!==e.filters[i]))return!1}return!0}));return a?t:o},showSidebar:function(){return!1===this.expand&&!0===this.details||this.sidebarComponents.length>0},seperatorClass:function(){return this.isDark?"bg-secondary":"bg-black"},splitterLimits:function(){return this.showSidebar?[10,90]:[0,100]}}),watch:{api:function(){this.get()},selected:function(){this.$emit("selected",this.selected)}},components:{detailsPanel:w,detailsRow:x,insert:k["default"]},created:function(){this.showSidebar&&(this.splitterModel=this.sidebarWidth?this.sidebarWidth:100),this.columns.forEach((function(e){e.align||e.type&&"string"!==e.type||(e.align="left")}))},mounted:function(){q["a"].use(_.a),this.loading=!0,this.dataOverride?this.loading=!1:this.get(),this.selectedSbComponent=!0===this.details&&!1===this.expand||0===this.sidebarComponents.length?"details":this.sidebarComponents[0].name,this.pagination.rowsPerPage=!0===this.modal?10:1e3,this.rowsPerPage&&(this.pagination.rowsPerPage=this.rowsPerPage),this.pagination.sortBy=this.sortBy,this.pagination.rowsPerPage=this.rowsPerPage,this.pagination.descending=this.reverse,this.channel.length>0&&(this.wamp=this.$wamp.subscribe(this.channel,(function(e,t,a){this.get(t[this.rowKey])}),{acknowledge:!0}).then((function(e){this.wampSubscription=e}))),this.focusSearch()},beforeDestroy:function(){this.wampSubscription&&this.$wamp.unsubscribe(this.wampSubscription)}},D=O,P=(a("b433"),Object(f["a"])(D,o,n,!1,null,"4027c951",null));t["a"]=P.exports},fc9a:function(e,t,a){}}]);