(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"1be2":function(e,t,s){"use strict";var n=s("a30e"),a=s.n(n);a.a},"3f14":function(e,t,s){},"466c":function(e,t,s){"use strict";var n=s("3f14"),a=s.n(n);a.a},"71f0":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("toolbar-page",{attrs:{elements:e.elements,default:"all"},scopedSlots:e._u([{key:"side",fn:function(){},proxy:!0}])})},a=[],r=s("08e9"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?e._e():s("div",[s("crud",{ref:"crud",attrs:{dataOverride:e.absences,columns:e.columns,search:"",download:"",sortBy:"timestamp"}})],1),e.loading?s("div",{staticClass:"flex flex-center col",staticStyle:{height:"70vh"}},[s("div",{staticClass:"row flex flex-center full-width"},[s("div",{staticClass:"text-center",staticStyle:{width:"500px","max-width":"90vw"}},[s("q-circular-progress",{staticClass:"q-ma-md row full-width text-center",attrs:{indeterminate:"",size:"90px",thickness:.2,color:"accent","center-color":"secondary","track-color":"transparent"}}),s("span",{staticClass:"text-font q-mt-lg full-width text-center"},[e._v("Extracting absences from iSams...")])],1)])]):e._e()])},l=[],o=(s("e125"),s("4823"),s("2e73"),s("dde3"),s("76d0"),s("0c1f"),s("8e9e")),c=s.n(o),u=s("d612"),f=s("4778"),b={getAllAbsences:function(e,t,s){f["a"].get("/home/absences/all").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))},getSubjectAbsences:function(e,t,s){f["a"].get("/home/absences/subjects").then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}},d=s("9ce4");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"ComponentCompanies",data:function(){return{columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"timestamp",label:"timestamp",field:"timestamp",type:"string",align:"left",hidden:!0},{name:"lastName",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"firstName",label:"",field:"firstName",type:"string",align:"left"},{name:"boarding",label:"House",field:"boardingHouse",type:"string",align:"left",sortable:!0,filter:!0},{name:"year",label:"Year",field:"year",type:"string",align:"left",sortable:!0},{name:"reason",label:"Reason",field:"reason",type:"string",align:"left",sortable:!0},{name:"start",label:"Start",field:"start",type:"string",align:"left",sortable:!0},{name:"end",label:"End",field:"finish",type:"string",align:"left",sortable:!0}],absences:[],sets:[],subjects:[],loading:!0}},methods:{processAbsences:function(e){this.subjects=e.subjects,this.sets=e.sets,this.absences=e.absences,this.loading=!1}},computed:m({},Object(d["c"])("sockets",["progress"]),{syncProgress:function(){return this.progress("Home/Absences/All")}}),components:{Crud:u["a"]},created:function(){this.loading=!0,b.getAllAbsences(this.processAbsences,this.$errorHandler)}},h=g,y=(s("1be2"),s("2be6")),j=s("e279"),O=s.n(j),v=s("cf19"),w=s("4f61"),x=Object(y["a"])(h,i,l,!1,null,"182329b2",null),P=x.exports;O()(x,"components",{QCircularProgress:v["a"],QLinearProgress:w["a"]});var S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?e._e():s("div",[s("q-select",{staticStyle:{"min-width":"300px"},attrs:{filled:"",dense:"","use-input":"","input-debounce":"0",label:"Subject",options:e.options,clearable:""},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[e._v("\n            No Students\n          ")])],1)]},proxy:!0}],null,!1,851514735),model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}}),e.subject?s("crud",{ref:"crud",attrs:{dataOverride:e.filteredData,columns:e.columns,searchx:"",downloadx:"",sortBy:"displayName",filterboxx:""}}):e._e()],1),e.loading?s("div",{staticClass:"flex flex-center col",staticStyle:{height:"70vh"}},[s("div",{staticClass:"row flex flex-center full-width"},[s("div",{staticClass:"text-center",staticStyle:{width:"500px","max-width":"90vw"}},[s("q-circular-progress",{staticClass:"q-ma-md row full-width text-center",attrs:{indeterminate:"",size:"90px",thickness:.2,color:"accent","center-color":"secondary","track-color":"transparent"}}),s("span",{staticClass:"text-font q-mt-lg full-width text-center"},[e._v("Extracting absenses from iSams...")])],1)])]):e._e()])},C=[];function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function A(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var k={name:"ComponentCompanies",data:function(){return{columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"timestamp",label:"timestamp",field:"timestamp",type:"string",align:"left",hidden:!0},{name:"displayName",label:"Name",field:"displayName",type:"string",align:"left",sortable:!0},{name:"boarding",label:"House",field:"boardingHouse",type:"string",align:"left",sortable:!0},{name:"year",label:"Year",field:"year",type:"string",align:"left",sortable:!0},{name:"subject",label:"Subject",field:"subjectName",type:"string",align:"left",sortable:!0,filter:!0,options:[]},{name:"set",label:"Set",field:"setCode",type:"string",align:"left",sortable:!0},{name:"reason",label:"Reason",field:"reason",type:"string",align:"left",sortable:!0},{name:"start",label:"Start",field:"start",type:"string",align:"left",sortable:!0},{name:"end",label:"End",field:"finish",type:"string",align:"left",sortable:!0}],absences:[],sets:[],subjects:[],loading:!0,subject:null,subjectOptions:[],options:[]}},methods:{processAbsences:function(e){this.subjects=e.subjects,this.sets=e.sets,this.absences=e.absences,this.loading=!1,this.subjectOptions=this.$parseOptions(this.absences,"subjectName")},filterFn:function(e,t){var s=this;t(""!==e?function(){var t=e.toLowerCase();s.options=s.subjectOptions.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){s.options=s.subjectOptions})}},computed:A({},Object(d["c"])("sockets",["progress"]),{syncProgress:function(){return this.progress("Home/Absences/All")},filteredData:function(){var e=this;return this.subject?this.absences.filter((function(t){return t.subjectName===e.subject.value})):[]}}),components:{Crud:u["a"]},created:function(){this.loading=!0,b.getSubjectAbsences(this.processAbsences,this.$errorHandler)}},N=k,E=(s("466c"),s("3946")),D=s("ac9b"),q=s("66dc"),H=Object(y["a"])(N,S,C,!1,null,"0998bf52",null),Q=H.exports;O()(H,"components",{QSelect:E["a"],QItem:D["a"],QItemSection:q["a"],QCircularProgress:v["a"],QLinearProgress:w["a"]});var $={name:"PageHomeAbsences",data:function(){return{elements:[{name:"all",label:"all",component:P},{name:"subjects",label:"subjects",component:Q}]}},components:{toolbarPage:r["a"]},methods:{}},L=$,z=Object(y["a"])(L,n,a,!1,null,null,null);t["default"]=z.exports},a30e:function(e,t,s){}}]);