(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["501de65e"],{"08e9":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"no-scroll"},[n("q-toolbar",{staticClass:"bg-toolbar text-white shadow-2 rounded-borders narrowx justify",attrs:{dense:"",shrink:""}},[n("q-tabs",{attrs:{dense:"",shrink:"","indicator-color":"primary"},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},t._l(t.elements,function(e){return n("div",{key:e.name},[e.menu?t._e():n("q-tab",{attrs:{label:e.label,name:e.name}}),e.menu?n("q-btn",{directives:[{name:"hotkey",rawName:"v-hotkey",value:{"shift+a":function(){t.selectedTab="bookings"}},expression:"{'shift+a': () => { selectedTab = 'bookings' }}"}],attrs:{flat:"",label:"Admin",icon:"fal fa-caret-down"},nativeOn:{click:function(n){n.stopPropagation(),t.selectedTab=e.name}}},[n("q-menu",{ref:"settingsPopover",refInFor:!0,attrs:{"content-class":"bg-dark text-white","auto-close":""}},[n("q-list",{attrs:{"item-separator":"",link:"","content-class":"bg-primary"}},t._l(e.menu,function(e){return n("q-item",{key:e.name,attrs:{clickable:""},nativeOn:{click:function(n){t.selectedTab=e.name}}},[n("q-item-section",{attrs:{avatar:"",left:"",dark:""}},[n("q-icon",{attrs:{name:e.icon+" fa-sm"}})],1),n("q-item-section",[n("q-item-label",[t._v(t._s(e.label))])],1)],1)}),1)],1)],1):t._e()],1)}),0),n("q-space"),t._t("side")],2),n("q-tab-panels",{model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},t._l(t.tabPanels,function(e){return n("q-tab-panel",{key:e.name,attrs:{name:e.name}},[n(e.component,{tag:"component",on:{close:function(e){t.selectedTab=null}}})],1)}),1)],1)},a=[],l=(n("c880"),n("2e73"),{name:"ComponentPageToolbar",props:{default:null,elements:null},watch:{selectedTab:function(){console.log(":",this.selectedTab)}},data:function(){return{selectedTab:null}},computed:{tabPanels:function(){var t=[];return this.elements.forEach(function(e){e.menu?e.menu.forEach(function(e){t.push({name:e.name,component:e.component})}):t.push({name:e.name,component:e.component})}),t}},created:function(){this.selectedTab=this.default}}),o=l,i=n("2be6"),c=Object(i["a"])(o,s,a,!1,null,null,null);e["a"]=c.exports},8976:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("toolbar-page",{attrs:{elements:t.elements,default:"students"}})},a=[],l=n("08e9"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-8"},[n("crud",{ref:"crud",attrs:{dataOverride:t.misStudents,api:t.api,columns:t.columns,settings:t.settings,actions:t.actions,sortBy:"name",rowKey:"id",channel:t.channel,search:""}})],1),n("div",{staticClass:"col-4"},[n("div",{staticClass:"block border-primary q-ba-sm"},[n("div",{staticClass:"row"},[n("div",{attrs:{clsss:"col flex"}},[n("q-input",{attrs:{type:"text",align:"left",suffix:"",color:"primary",dark:"",readonly:"",label:"# MIS Students"},model:{value:t.stats.misStudentCount,callback:function(e){t.$set(t.stats,"misStudentCount",e)},expression:"stats.misStudentCount"}})],1),n("div",{staticClass:"col"},[n("q-input",{attrs:{type:"text",align:"left",suffix:"",color:"primary",dark:"",readonly:"",label:"# ADA Students"},model:{value:t.stats.adaStudentCount,callback:function(e){t.$set(t.stats,"adaStudentCount",e)},expression:"stats.adaStudentCount"}})],1)]),n("q-btn",{staticClass:"full-width q-mt-xl",attrs:{loading:t.loading,percentage:t.syncProgress,"dark-percentage":"",outline:"",dark:"",color:"primary","icon-rightx":"fal fa-sync fa-xs"},on:{click:t.syncStudents}},[t._v("\n           Sync\n          "),n("span",{attrs:{slot:"loading"},slot:"loading"},[n("q-spinner-gears",{staticClass:"on-left"}),t._v("\n            Computing...\n          ")],1)]),t.syncIsComplete&&!t.loading?n("div",[n("h4",[t._v("Summary")]),n("div",{attrs:{clsss:"row"}},[n("div",{staticClass:"col"},[n("q-input",{attrs:{type:"text",align:"left",suffix:"",color:"primary",dark:"",readonly:"","stack-label":"New"},model:{value:t.results.new,callback:function(e){t.$set(t.results,"new",e)},expression:"results.new"}})],1)]),n("div",{staticClass:"row full-width"},[n("div",{staticClass:"col"},[n("q-input",{attrs:{type:"text",align:"left",suffix:"",color:"primary",dark:"",readonly:"","stack-label":"Updated"},model:{value:t.results.updated,callback:function(e){t.$set(t.results,"updated",e)},expression:"results.updated"}})],1)]),n("div",{staticClass:"row full-width"},[n("div",{staticClass:"col"},[n("q-input",{attrs:{type:"text",align:"left",suffix:"",color:"primary",dark:"",readonly:"","stack-label":"Disabled"},model:{value:t.results.disabled,callback:function(e){t.$set(t.results,"disabled",e)},expression:"results.disabled"}})],1)])]):t._e()],1)])])])},i=[],c=n("b506"),r=n.n(c),u=n("9ce4"),d=n("4778"),m={getMISStudents:function(t){d["a"].get("/admin/sync/misstudents").then(function(e){t(e.data)}).catch(function(t){console.log(t)})},postSyncStudents:function(t){d["a"].post("/admin/sync/students").then(function(e){t(e.data)}).catch(function(t){console.log(t)})}},f=n("d612"),p={name:"ComponentAdminSyncStudentSync",props:{},data:function(){return{id:"0",stats:{misStudentCount:0,adaStudentCount:0},misStudentCount:"",misStudents:[],columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"lastName",required:!0,label:"Name",align:"left",field:"txtSurname",sortable:!0},{name:"firstName",required:!0,label:"",align:"left",field:"txtForename",sortable:!0},{name:"gender",label:"M/F",field:"txtGender",align:"left",sortable:!0},{name:"house",label:"Hs",field:"txtBoardingHouse",align:"left",sortable:!0}],loading:!1,percentage:100,syncIsComplete:!1,results:[],channel:"lab.crud.basic",settings:{search:!0,fullscreen:!1,filterbox:!0,chips:!0,multi:!1,canEdit:!0,canAction:!0,canNew:!0,canDelete:!0,inlineEdit:!0,details:!1,expand:!1}}},methods:r()({},Object(u["b"])("sockets",["clearConsoleLog"]),{showMISStudents:function(t){this.misStudents=t.misStudents,this.stats=t.stats},syncStudents:function(){this.loading=!0,m.postSyncStudents(this.syncComplete)},syncComplete:function(t){this.results=t,this.loading=!1,this.syncIsComplete=!0,this.percentage=0}}),computed:r()({},Object(u["c"])("sockets",["progress"]),{syncProgress:function(){return this.progress("Admin/Sync/Students")}}),components:{Crud:f["a"]},created:function(){m.getMISStudents(this.showMISStudents)}},b=p,g=(n("e7b0"),n("2be6")),h=Object(g["a"])(b,o,i,!1,null,"39b31d1e",null),y=h.exports,v={name:"PageAdminSync",data:function(){return{elements:[{name:"students",label:"Students",component:y,shortcut:"s"},{name:"staff",label:"Staff",component:null,shortcut:"t"}]}},components:{toolbarPage:l["a"]},methods:{refresh:function(){}}},S=v,k=Object(g["a"])(S,s,a,!1,null,null,null);e["default"]=k.exports},bfc6:function(t,e,n){},e7b0:function(t,e,n){"use strict";var s=n("bfc6"),a=n.n(s);a.a}}]);