(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{"0087":function(e,t,a){"use strict";var s=a("e778"),n=a.n(s);n.a},"0c4f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("toolbar-page",{attrs:{elements:e.elements,default:"chat"}})},n=[],o=a("08e9"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("p",{staticClass:"text-secondary"},[e._v("\n      Uses the socket server directy (i.e no api calls) to subscribe / publish\n    ")]),a("q-space"),a("p",[e._v("\n      "+e._s(e.time)+"\n      "),a("span",[e._v(" ms")])])],1),a("div",{staticClass:"row"},[a("p",{staticClass:"text-secondary"},[e._v("\n      "+e._s(e.server)+"\n    ")])]),a("div",{staticClass:"row q-px-md"},[a("div",{staticClass:"col-6 "},[a("q-input",{staticClass:"bg-black text-green",attrs:{outlined:"",dark:"",type:"textarea",autogrow:""},on:{keyup:e.keyUp},model:{value:e.sendText,callback:function(t){e.sendText=t},expression:"sendText"}})],1),a("div",{staticClass:"col-6 q-pl-lg"},[a("q-input",{staticClass:"bg-black text-green",attrs:{outlined:"",dark:"",type:"textarea",autogrow:"",readonly:""},model:{value:e.receiveText,callback:function(t){e.receiveText=t},expression:"receiveText"}})],1)])])},l=[],c={name:"PageLabSockets",data(){return{wamp:null,time:"Time of flight",wampSubscription:null,sendText:"",receiveText:"",sendTime:0,receiveTime:0,channel:"lab.sockets.chat",server:""}},components:{},methods:{keyUp(e){console.log("K:",e.key),this.sendTime=Date.now(),this.$wamp.publish(this.channel,[],{key:e.key},{exclude_me:!1})}},mounted(){this.server="wss://adazmq.marlboroughcollege.org/wss",this.wamp=this.$wamp.subscribe(this.channel,(function(e,t,a){var s=t.key;console.log("/."),this.receiveTime=Date.now(),this.time=this.receiveTime-this.sendTime,1===s.length?this.receiveText+=s:"Backspace"===s&&(this.receiveText=this.receiveText.slice(0,-1))}),{acknowledge:!0}).then((function(e){this.sendText="",this.wampSubscription=e}))}},i=c,d=a("2be6"),u=a("f962c"),p=a("bc74"),m=a("e279"),h=a.n(m),b=Object(d["a"])(i,r,l,!1,null,null,null),g=b.exports;h()(b,"components",{QSpace:u["a"],QInput:p["a"]});var v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("p",{staticClass:"text-font"},[e._v("\n      Uses ZeroMQ Transport to send content from a running php script to the Ratchet (Websocket) server. Tests the console and progress channels.\n    ")]),a("q-space"),a("p",[e._v("\n      "+e._s(e.time)+"\n      "),a("span",[e._v(" ms")])])],1),a("div",{staticClass:"row q-mb-md"},[a("p",{staticClass:"text-font"},[e._v("\n      "+e._s(e.server)+" ["+e._s(e.zmqServer)+"] ("+e._s(e.consoleProgress)+")\n    ")]),a("q-space"),a("q-btn",{staticStyle:{width:"100px"},attrs:{color:"primary",dark:"",outline:""},on:{click:e.clear}},[e._v("Clear\n   ")])],1),a("div",{staticClass:"row q-mb-lg"},[a("q-btn",{staticStyle:{width:"100%"},attrs:{loading:e.loading,percentage:e.consoleProgress,color:"accent",dark:"",outline:""},on:{click:e.start},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-gears",{staticClass:"on-left"}),e._v("\n         Computing...\n       ")]},proxy:!0}])},[e._v("\n       Compute PI\n       ")])],1),a("div",{staticClass:"row q-px-md"},[a("div",{staticClass:"col"},[a("console",{staticStyle:{"min-height":"50vh"}})],1)])])},f=[],k=(a("e125"),a("2e73"),a("8e9e")),y=a.n(k),w=a("9ce4"),x=a("dd14"),C=a("4778"),_={postStartConsole(e,t,a){C["a"].post("/lab/sockets/console",a).then(t=>{e(t.data)}).catch(e=>{console.log(e),t&&t()})},postNotify(e,t,a){C["a"].post("/lab/sockets/notify",a).then(t=>{e(t.data)}).catch(e=>{console.warn(e),t&&t()})},getZMQ(e,t,a){C["a"].get("/lab/sockets/zmq").then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getTable(e,t,a){C["a"].get("/lab/sockets/table").then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getCars(e,t,a){C["a"].get("/lab/sockets/cars").then(t=>{e(t.data)}).catch(e=>{console.log(e)})},getTableSingle(e,t,a){C["a"].get("/lab/sockets/table/"+a.id).then(t=>{e(t.data)}).catch(e=>{console.log(e)})},postTable(e,t,a){C["a"].post("/lab/sockets/table",a).then(t=>{e(t.data)}).catch(e=>{console.warn(e),t&&t()})},putFavorite(e,t,a){C["a"].put("/lab/sockets/favorite",a).then(t=>{e(t.data)}).catch(e=>{console.warn(e),t&&t()})},putTable(e,t,a){C["a"].put("/lab/sockets/table",a).then(t=>{e(t.data)}).catch(e=>{console.warn(e),t&&t()})},deleteTable(e,t,a){C["a"].delete("/lab/sockets/table/"+a).then(t=>{e(t.data)}).catch(e=>{console.warn(e),t&&t()})}};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){y()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={name:"PageLabConsole",data(){return{loading:!1,server:null,zmqServer:" - "}},components:{console:x["a"]},methods:T(T({},Object(w["b"])("sockets",["clearConsoleLog"])),{},{start(){this.loading=!0,_.postStartConsole(()=>{this.loading=!1})},clear(){this.loading=!1,this.clearConsoleLog()}}),computed:T(T({},Object(w["c"])("sockets",["progress"])),{},{consoleProgress(){return this.progress("Lab.Sockets.Console")}}),mounted(){this.server="wss://adazmq.marlboroughcollege.org/wss",_.getZMQ(e=>{console.log(e),this.zmqServer=e})}},O=S,j=a("2ef0"),P=a("d1dc"),E=Object(d["a"])(O,v,f,!1,null,null,null),$=E.exports;h()(E,"components",{QSpace:u["a"],QBtn:j["a"],QSpinnerGears:P["a"]});var Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",{staticClass:"row q-mb-md"},[a("p",{staticClass:"text-secondary"},[e._v("\n      "+e._s(e.server)+" ["+e._s(e.zmqServer)+"]\n    ")])]),a("div",{staticClass:"row q-px-md"},[a("div",{staticClass:"col"},[a("q-input",{staticClass:"bg-black text-green",attrs:{outlined:"",dark:"",type:"textarea"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send(t)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)])])},z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("p",{staticClass:"text-secondary"},[e._v("\n      Sends a notification via ZMQ (API) and Sockets\n    ")])])}],L={name:"PageLabNotify",data(){return{text:"",server:"",zmqServer:""}},components:{},methods:{send(){console.log("Sending"),_.postNotify(()=>{this.text=""},null,{message:this.text})}},mounted(){this.server="wss://adazmq.marlboroughcollege.org/wss",_.getZMQ(e=>{this.zmqServer=e})}},D=L,F=Object(d["a"])(D,Q,z,!1,null,null,null),N=F.exports;h()(F,"components",{QInput:p["a"]});var M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crud",{ref:"crud",attrs:{api:e.api,columns:e.columns,actions:e.actions,rowKey:"id",fullscreen:"",search:"",filterbox:"",filterchips:"",canNew:"",canDelete:"",canEdit:"",inlineEdit:"",multiselectx:"",sortBy:"Name",indicator:"isFavorite",channel:"lab.sockets.data"},on:{favorite:e.makeFavorite}})],1)},Z=[],I=a("d612"),U=a("89a2"),A={name:"LabSocketsData",data(){return{api:{get:_.getTable,getSingle:_.getTableSingle,put:_.putTable,post:_.postTable,delete:_.deleteTable},columns:[{name:"id",label:"id",field:"id",type:"string",align:"left",hidden:!0},{name:"Name",label:"Name",field:"name",type:"string",align:"left",required:!0,validations:{required:U["required"],minLength:Object(U["minLength"])(6)},editable:!0,sortable:!0},{name:"Age",required:!0,label:"Age",field:"age",type:"number",sortable:!0,align:"right",editable:!0,validations:{required:U["required"]}},{name:"Car",label:"Car",field:"car",icon:"fal fa-car",type:"options",filter:!0,sortable:!0,options:[],align:"left",editable:!0,validations:{required:U["required"]}}],cars:[],actions:[{title:"Make Favorite",event:"favorite",icon:"fal fa-check"}]}},methods:{makeFavorite(e){this.$refs.crud.data.forEach((function(e){e.isFavorite=!1})),e.isFavorite=!0,_.putFavorite(()=>{this.$refs.crud.publish()},null,{id:e.id})},setOptions(){_.getCars(e=>{console.log(e),this.columns[3].options=e.map((function(e){return{value:e.id,label:e.car}})),console.log(this.columns[3].options)})}},created(){this.setOptions()},components:{Crud:I["a"]}},B=A,J=(a("0087"),Object(d["a"])(B,M,Z,!1,null,"2f174bac",null)),K=J.exports,G={name:"PageLabSockets",data(){return{elements:[{name:"chat",label:"Chat",component:g,shortcut:"c"},{name:"console",label:"Console",component:$,shortcut:"s"},{name:"notify",label:"Notify",component:N,shortcut:"n"},{name:"data",label:"Data",component:K,shortcut:"d"}]}},components:{toolbarPage:o["a"]},methods:{refresh(){this.$root.$emit("crud_refresh")}}},R=G,W=Object(d["a"])(R,s,n,!1,null,null,null);t["default"]=W.exports},e778:function(e,t,a){}}]);